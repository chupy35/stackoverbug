30637894
Make Elasticsearch return the number of all documents on query
<p>When I do a query Elasticsearch returns how many hits I get. Can I also get it to reply how many documents it has in total?&#xA;Here I've added the imaginary field <strong>sum_documents</strong> to the result. Does such thing exist, or to I have to make an extra query to fetch the sum?</p>&#xA;&#xA;<pre><code>{&#xA;  "took" : 1,&#xA;  "timed_out" : false,&#xA;  "_shards" : {&#xA;    "total" : 5,&#xA;    "successful" : 5,&#xA;    "failed" : 0&#xA;  },&#xA;  "hits" : {&#xA;    "total" : 0,&#xA;    "sum_documents": 500,&#xA;    "max_score" : null,&#xA;    "hits" : [ ]&#xA;  }&#xA;}&#xA;</code></pre>&#xA;
<p>You can add a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-global-aggregation.html" rel="nofollow"><code>global</code> aggregation</a> in your query, and it will return the total document count in your search context (index/alias + type(s))</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "query_string": {&#xA;      "query": "viking",&#xA;      "default_operator": "AND"&#xA;    }&#xA;  },&#xA;  "aggs": {&#xA;    "harvester-test": {&#xA;      "global": {}&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;