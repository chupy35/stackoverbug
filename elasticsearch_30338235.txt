30338235
elasticsearch: Steps to add replica?
<p>We have a single ES server, in production.</p>&#xA;&#xA;<p>We would now like to add a replica, in another DC, as a warm/hot spare fail over.</p>&#xA;&#xA;<p>I know how to do this on mongo, redis, etc, but cannot seem to find the docs on how to do it to ES. (ES docs seem to assume the systems are all on same subnet, etc)</p>&#xA;
<p>Elasticsearch exists as a cloud, means if you have replicas they act sort of a master-master mode. If one server is down other will automatically take over. When indexing a documents it indexes in the replica also before returning thereby maintaining consistency of data.</p>&#xA;&#xA;<p>A cluster can have zero or more replicas and it can be configured runtime using the update settings api as below</p>&#xA;&#xA;<pre><code>curl -XPUT 'localhost:9200/your_index/_settings' -d '&#xA;{&#xA;    "index" : {&#xA;        "number_of_replicas" : 1&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>The replicas will be created only if there is enough nodes running(replica of a shard will never exist in the same node as it's primary). Your cluster will go into yellow state if the replicas could not be assigned.</p>&#xA;&#xA;<p>In your new DC start a new elasticsearch node having same cluster name.&#xA;If you are using default configurations you need not do any changes except making same cluster name for the nodes to discover each other else changes may be required to do in the network configuration.</p>&#xA;&#xA;<p><strong>caution:</strong> it is not recommended to have a replica or elasticsearch nodes for same cluster in separate DC as network latency can impact the performance. Moreover it may affect the cluster stability. </p>&#xA;&#xA;<p>If you intend have a backup of data in a separate DC, you may consider using the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-snapshots.html" rel="nofollow">snapshot</a></p>&#xA;