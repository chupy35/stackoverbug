33903336
How to change the Elasticsearch ES_HEAP_SIZE on CentOS
<p>Elasticsearch 1.7.2 on CentOS, 8GB RAM</p>&#xA;&#xA;<p>We see that <code>ES_HEAP_SIZE</code> should be increased to 4g.</p>&#xA;&#xA;<p>The only place this seems declared in the ES environment is in <code>/etc/init.d/elasticsearch</code></p>&#xA;&#xA;<p>We set it to 4g in this init file, restarted ES, but the jvm <code>"heap_max_in_bytes"</code> (as returned from <code>/_nodes/stats</code> ) did not move from the default 1g value.</p>&#xA;&#xA;<p>Where and how can we get control of <code>ES_HEAP_SIZE</code>  ?</p>&#xA;&#xA;<p>(I should add: The similar looking threads here on SO are either dated [e.g. apply to earlier versions of ES and do not apply to 1.7.x] or are for other platforms [win, osx], or are do not work [have tried them, and you can see many of the responses are tagged 'this is a hack don't do it'])</p>&#xA;&#xA;<p>(I should further note that the ES docs document this element, and suggest what to set it to, but do not instruct how or where.)</p>&#xA;
<p><strong>Note: Below is for Elasticsearch 1.7.x. For 5.3 and higher, it is different.</strong></p>&#xA;&#xA;<p>Per a comment that is rather buried on <a href="https://stackoverflow.com/q/18132719/147637">How to change Elasticsearch max memory size</a></p>&#xA;&#xA;<p>On CentOS <code>/etc/sysconfig/elasticsearch</code> is the appropriate place to make these changes.</p>&#xA;&#xA;<p>This has been tested and verified on my CentOS 7 environment. Strongly expect it to also fly on CentOS 6.</p>&#xA;