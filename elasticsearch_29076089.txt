29076089
ElasticSearch - How do I order aggregations (not results within aggregations)
<p>I execute a query which returns some hits, and a bunch of different aggregations which I use to filter the results.</p>&#xA;&#xA;<p>I'm data-binding the results with Knockout to my page and I'd like to be able to specify the order that the filters appear on the page.  </p>&#xA;&#xA;<p>There isn't anything within the returned aggregations I can use to sort them so &#xA;the easiest way to do this is simply to control the order that the aggregation sections appear in the results.  How do I do this?</p>&#xA;&#xA;<p>Example below.... I submit a query with multiple aggregations.  I've marked the first four.&#xA;The aggregation results I get back aren't ordered how I want though.  How do I specify the order of the returned aggregations (NOT the terms within them...)?</p>&#xA;&#xA;<p>Query:</p>&#xA;&#xA;<pre><code>{&#xA;  "from": 0,&#xA;  "size": 16,&#xA;  "aggs": {&#xA;    "Keyword": { **&lt;------ One**&#xA;      "terms": {&#xA;        "field": "topics",&#xA;        "size": 15&#xA;      }&#xA;    },&#xA;    "Audience": { **&lt;------- Two**&#xA;      "terms": {&#xA;        "field": "audience"&#xA;      }&#xA;    },&#xA;    "Category": { **&lt;-------- Three**&#xA;      "terms": {&#xA;        "field": "topLevelCategory",&#xA;        "size": 15&#xA;      }&#xA;    },&#xA;    "Author": { **&lt;--------- Four**&#xA;      "terms": {&#xA;        "field": "authors",&#xA;        "size": 10&#xA;      }&#xA;    },&#xA;    ...&#xA;</code></pre>&#xA;&#xA;<p>Results:</p>&#xA;&#xA;<pre><code>    ...&#xA;   "aggregations": {&#xA;      "Resource": { **&lt;--------- Six**&#xA;         "buckets": [&#xA;         ]&#xA;      },&#xA;      "Category": { **&lt;--------- Three**&#xA;         "buckets": [&#xA;         ]&#xA;      },&#xA;      "Published": { **&lt;---------- Five**&#xA;         "buckets": [&#xA;         ]&#xA;      },&#xA;      "Keyword": { **&lt;------------ One**&#xA;         "buckets": [&#xA;         ]&#xA;      },&#xA;      ...&#xA;</code></pre>&#xA;
<p>In short, you can't order them. In general key/value pairs in JSON are considered unordered so I doubt Elasticsearch will add a feature to do so. </p>&#xA;&#xA;<p>If this is a public site, I also strongly recommend you put something between the page and your Elasticsearch cluster for security purposes. Whatever that "something" is, can transform the result and order the aggregation in a list that be bound accordingly at the javascript layer. </p>&#xA;