29667212
What's the different between _id and _uid in elasticsearch?
<p>Well, here is the detail:</p>&#xA;&#xA;<p>First, I create three documents:</p>&#xA;&#xA;<pre><code>foo/bar/1&#xA;foo/bar/2&#xA;foo/bar/3&#xA;</code></pre>&#xA;&#xA;<p>I want to get max id:</p>&#xA;&#xA;<pre><code>var elasticsearch = require('elasticsearch');&#xA;var client = new elasticsearch.Client({&#xA;  host: 'localhost: 9200'&#xA;});&#xA;&#xA;client.search({&#xA;  index: 'foo',&#xA;  type: 'bar',&#xA;  sort: '_id:desc',&#xA;  size: 1,&#xA;  fields: [ '_id' ]&#xA;}, function(err, resp) {&#xA;  if (err) return console.error(err);&#xA;  console.log(resp.hits); // _id is '1'&#xA;})&#xA;</code></pre>&#xA;&#xA;<p>In the code above, I can not get right result.</p>&#xA;&#xA;<p>Then, I google the reason about it, I found the '_uid'</p>&#xA;&#xA;<pre><code>var elasticsearch = require('elasticsearch');&#xA;var client = new elasticsearch.Client({&#xA;  host: 'localhost: 9200'&#xA;});&#xA;&#xA;client.search({&#xA;  index: 'foo',&#xA;  type: 'bar',&#xA;  sort: '_uid:desc', // here is a little bit different&#xA;  size: 1,&#xA;  fields: [ '_id' ]&#xA;}, function(err, resp) {&#xA;  if (err) return console.error(err);&#xA;  console.log(resp.hits); // _id is '3'&#xA;})&#xA;</code></pre>&#xA;&#xA;<p>Yes I get the right result.</p>&#xA;&#xA;<p>So question is</p>&#xA;&#xA;<p><strong>Can I say '_id' and '_uid' are the same things?</strong></p>&#xA;&#xA;<p><strong>Is '_id' equal to '_uid'?</strong></p>&#xA;
<p>Not exactly same .</p>&#xA;&#xA;<p>The <code>_uid</code> field is automatically used when <code>_type</code> is not indexed to perform type based filtering, and does not require the <code>_id</code> to be indexed.</p>&#xA;&#xA;<p><a href="http://www.elastic.co/guide/en/elasticsearch/reference/1.3/mapping-uid-field.html" rel="nofollow">http://www.elastic.co/guide/en/elasticsearch/reference/1.3/mapping-uid-field.html</a></p>&#xA;
<p>No they are not the same. <em>_uid</em> is a combination of the type and <em>_id</em>: <em>{type}#{id}</em>. As a result <em>_uid</em> is unique inside an index, whereas <em>_id</em> is unique inside a type (<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-uid-field.html" rel="nofollow">see the official documentation</a>).</p>&#xA;