30212001
ElasticSearch Multi Term Searching
<p>I have some documents stored in elastic and want to query them on serveral terms, with several possible values.</p>&#xA;&#xA;<p>For example, the document is basically as follows:</p>&#xA;&#xA;<pre><code>[id] =&gt; 1&#xA;[title] =&gt; 'running shoes'&#xA;[parent_product_id] =&gt; 100&#xA;[brand_id] =&gt; 198&#xA;[category_id] =&gt; 3&#xA;</code></pre>&#xA;&#xA;<p>I want to, for example, look for all products that fall under one of the categories 1, 2 and 3 and where the brand is either 198 or 245. </p>&#xA;&#xA;<p>One product has only one category and only one brand , but I need the ability for search to accept multiples of both. So all products under 1 category but multiple brands, or one brand, under multiple categories, or multiple brands under multiple categories.</p>&#xA;&#xA;<p>Thanks</p>&#xA;
<blockquote>&#xA;  <p>I have some documents stored in elastic and want to query them on serveral terms, with several possible values.</p>&#xA;</blockquote>&#xA;&#xA;<p>Please, read here: <a href="http://www.elastic.co/guide/en/elasticsearch/guide/master/combining-filters.html" rel="nofollow">How to combine filters</a>, <a href="http://www.elastic.co/guide/en/elasticsearch/guide/master/bool-query.html" rel="nofollow">How to combine queries</a></p>&#xA;&#xA;<blockquote>&#xA;  <p>I want to, for example, look for all products that fall under one of the categories 1, 2 and 3 and where the brand is either 198 or 245.</p>&#xA;</blockquote>&#xA;&#xA;<p>Try this:</p>&#xA;&#xA;<pre><code>curl -XGET 'http://localhost:9200/_search?pretty' -d '{&#xA;    "filter": {&#xA;        "bool": {&#xA;            "must": [&#xA;                {&#xA;                    "terms": {&#xA;                        "category_id": [1, 2, 3]&#xA;                    }&#xA;                },&#xA;                {&#xA;                    "terms": {&#xA;                        "brand_id": [198, 245]&#xA;                    }&#xA;                }&#xA;            ]&#xA;        }&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;