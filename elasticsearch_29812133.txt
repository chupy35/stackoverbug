29812133
Elasticsearch regexp on query
<p>I have the following query which works great:</p>&#xA;&#xA;<pre><code>query: {&#xA;  multi_match: {&#xA;   fields: ["first_name", "last_name", "email", "sku"],&#xA;   query: query,&#xA;   type: "cross_fields",&#xA;   operator: "and"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>However, I'd like to have the incoming <code>query</code> get rid of non-alphanumeric characters, using this regex:</p>&#xA;&#xA;<pre><code>[^a-zA-Z0-9\ @\.]&#xA;</code></pre>&#xA;&#xA;<p>Is there a way to have Elasticsearch filter the incoming <code>query</code> for that regex for all fields?</p>&#xA;
<p>You can specify a different analyzer for search during query construction.</p>&#xA;&#xA;<pre><code>query: {&#xA;  multi_match: {&#xA;   fields: ["first_name", "last_name", "email", "sku"],&#xA;   query: query,&#xA;   type: "cross_fields",&#xA;   operator: "and",&#xA;   analyzer: "your-custom-analyzer"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>You have to provide the definition of "your-custom-analyzer" in the mapping. The analyzer definition can use the <a href="http://www.elastic.co/guide/en/elasticsearch/reference/1.3/analysis-pattern-replace-charfilter.html" rel="nofollow">pattern replace filter</a> to meet your requirement.</p>&#xA;