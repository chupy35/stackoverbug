34101815
How to search multiple fields using * by using Common Terms
<p>I have the following mapping:</p>&#xA;&#xA;<pre><code>"mappings": {&#xA;&#xA;    "mydoctype": {&#xA;        ....        &#xA;        "properties": {&#xA;&#xA;            "title": {&#xA;                "properties": {&#xA;                    "en": {&#xA;                    ...&#xA;                    },&#xA;                    "zh_CN": {&#xA;                    ...&#xA;                    },&#xA;                    "zh_TW": { &#xA;                    ...&#xA;                    }&#xA;                    ...&#xA;                }&#xA;            },&#xA;&#xA;            ...&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I would like to perform Common Terms on the <code>title.*</code> fields, but the following query does not return any results or error message. </p>&#xA;&#xA;<pre><code>"common" : {&#xA;    "title.*" : {&#xA;        "query" : "sleep",&#xA;        "cutoff_frequency" : 0.001&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>However, if I change the above <code>"title.*"</code> to <code>"title.en"</code>, then I am able to get returned results. </p>&#xA;&#xA;<p>How can I do the <code>"title.*"</code> search with Common Terms? Or can I?</p>&#xA;
<p>is this working ? i use it to search a wildcarded (with*) value on many field</p>&#xA;&#xA;<pre><code>   {&#xA;    "query" : {&#xA;        "dis_max" : {&#xA;            "tie_breaker" : 0,&#xA;            "boost" : 1,&#xA;            "queries" : [&#xA;               {"wildcard" : {"title.en" : "sic*"}}, &#xA;               { "wildcard" : { "title.zh_CN"  : "sic*"}},&#xA;               { "wildcard" : { "title.zh_TW" : "*sic*" }}&#xA;            ]&#xA;        }&#xA;    }&#xA;   }&#xA;</code></pre>&#xA;&#xA;<p>dis_max les you run multiple queries and concat the result</p>&#xA;
<p>If you really want to use a common terms query, just know that it only works on a single field, i.e. not several and not wildcarded ones.</p>&#xA;&#xA;<p>Otherwise, you can use a <code>multi_match</code> query with the <code>cutoff_frequency</code> like in your <a href="https://stackoverflow.com/questions/34101464/how-to-convert-filtered-query-with-multi-match-to-filtered-query-with-common-ter">other question</a>.</p>&#xA;