31631395
elasticsearch php client search with date type
<p>I have index with mappings type like this:</p>&#xA;&#xA;<pre><code>{&#xA;  "mappings":{&#xA;    "logs_june":{&#xA;      "_timestamp":{&#xA;        "enabled":"true"&#xA;      },&#xA;      "properties":{&#xA;        "logdate":{&#xA;          "type":"date",&#xA;          "format":"dd/MM/yyyy HH:mm:ss"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>And there is many doc in it(<a href="https://i.stack.imgur.com/fxG8O.png" rel="nofollow noreferrer"><img src="https://i.stack.imgur.com/fxG8O.png" alt="enter image description here"></a>). When I try to get the docs with search query below it throws SearchPhaseExecutionException .. all shards failed.. bla bla&#xA;What is it problem that I must fix ?</p>&#xA;&#xA;<pre><code>$queryFilter = '{&#xA;                "query":{&#xA;                    "filtered":{&#xA;                        "query":{&#xA;                            "match_all":{}&#xA;                        },&#xA;                        "filter":{&#xA;                            "range":{&#xA;                                "logdate":{&#xA;                                    "gte":"00/00/2014 00:00:00  "&#xA;                                }&#xA;                            }&#xA;                        }&#xA;                    }&#xA;                }&#xA;            }';&#xA;            $params['body'] = $queryFilter;&#xA;            $params['index'] = 'accesslog';&#xA;            $params['size'] = 1000;&#xA;            $query = $elasticSearch-&gt;search($params);&#xA;</code></pre>&#xA;
<p>I'm pretty certain your <code>SearchPhaseExecutionException</code> tells you something along the lines of</p>&#xA;&#xA;<pre><code>IllegalFieldValueException[Cannot parse "00/00/2014 00:00:00": Value 0 for monthOfYear must be in the range [1,12]]; &#xA;</code></pre>&#xA;&#xA;<p>Try using <code>"01/01/2014 00:00:00"</code> in your <code>range</code> filter instead, i.e. with a valid day and month instead of <code>00</code>, which is not valid. Also make sure to remove the spaces at the end, as it will also cause an error during the date parsing.</p>&#xA;