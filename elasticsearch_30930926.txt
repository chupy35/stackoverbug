30930926
How to check if a the particular element of an array field exists in elasticsearch?
<p>This is a sample document from my index</p>&#xA;&#xA;<pre><code>{&#xA;    "name": "sandy",&#xA;    "age": "25",&#xA;    "ug":["B.tech"],&#xA;    "pg":["MS","Phd"]&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I want to filter the candidates on the basis of PG qualifications. I want two types of filters.</p>&#xA;&#xA;<ol>&#xA;<li><p>In certain cases the PG field would be empty. So,I need to filter out only the ones who have PG qualifications.</p></li>&#xA;<li><p>I want the candidates with PG qualification "MS". But not others like "MBA" and all. This would be given as the first element under the "pg" array.&#xA;How can I implement this in Elasticsearch?</p></li>&#xA;</ol>&#xA;
<p>Considering the information provided, i could suggest as follows.</p>&#xA;&#xA;<ol>&#xA;<li><p>For your first question, try using <strong>exists filter</strong> for filtering records containing atleast one PG value in the array.</p>&#xA;&#xA;<p>{&#xA;"query": {&#xA;"constant_score": {&#xA;  "exists": {&#xA;    "field": "pg"&#xA;  }&#xA;}&#xA;}&#xA;}</p></li>&#xA;<li><p>For your second question, considering the fact that the result can contain other elements along with MS in the array is shown below.</p>&#xA;&#xA;<p>{&#xA;"query": {&#xA;"bool": {&#xA;  "must": [&#xA;    {&#xA;      "term": {&#xA;        "additionalSkill": "java"&#xA;      }&#xA;    },&#xA;    {&#xA;      "constant_score": {&#xA;        "filter": {&#xA;          "exists": {&#xA;            "field": "additionalSkill"&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  ]&#xA;}&#xA;}&#xA;}</p></li>&#xA;<li><p>If your use case dint allow any other elements other then MS in the array then you would probably have to limit the result records by using scripting feature in the elasticsearch.</p></li>&#xA;</ol>&#xA;