33483748
Elasticsearch query with multiple exact avlues
<p>For a bool query, I could get results with the following:</p>&#xA;&#xA;<pre><code>POST _search&#xA;{&#xA; "query": {&#xA;    "bool": {&#xA;      "must": [&#xA;        { "match": { "city":  "LA" }},&#xA;        { "match": { "employee_id" : 123}}&#xA;     ]&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>How can I pass the it a list of employee_id's like this <code>"employee_id" : [123, 234, 345]</code> for <code>{ "match": { "city":  "LA" }</code> . ? Basically I want to retrieve documents for employee_id <code>123, 234, 345</code> whose <code>city = 'LA'</code></p>&#xA;
<p>You can use the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-term-query.html" rel="nofollow">term</a> filter to find single exact-match terms, and <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-terms-query.html" rel="nofollow">terms</a> to find documents which match at least <em>n</em> of a list of terms.</p>&#xA;&#xA;<p>If you don't need document ranking (which you don't when doing exact term matches, since the documents would all score the same), use <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-filtered-query.html" rel="nofollow">filtered queries</a> to improve query performance.</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "bool": {&#xA;          "must": [&#xA;            {&#xA;              "term": {&#xA;                "city": "LA"&#xA;              }&#xA;            },&#xA;            {&#xA;              "terms": {&#xA;                "employee_id": [ 123, 456, 789 ]&#xA;              }&#xA;            }&#xA;          ]&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;