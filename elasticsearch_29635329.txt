29635329
Elastich search : more_like_this operator returns no hit
<p>I am trying to find similar documents to one document in elastic search (the document with id '4' in this case) in my sandbox based on a field (the 'town' field in this case).&#xA;So i wrote this query, which returns no hit :</p>&#xA;&#xA;<pre><code>GET _search&#xA;{&#xA;       "query": {&#xA;        "more_like_this" : {&#xA;            "fields" : ["town"],&#xA;            "docs" : [&#xA;            {&#xA;                "_index" : "app",&#xA;                "_type" : "house",&#xA;                "_id" : "4"&#xA;            }&#xA;            ],&#xA;            "min_term_freq" : 1,&#xA;            "max_query_terms" : 12&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>In my dataset, the document #4 is located in a town nammed 'Paris'. Thus when I run the following query, the document #4 is in the hits results with a lot of others results : </p>&#xA;&#xA;<pre><code>GET _search&#xA;{&#xA;    "query": {&#xA;             "match": { "town": "Paris" }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I don't understand why the 'more_like_this' query does not return results whereas there are other documents that have a field with the same value.&#xA;I precise that I check the _index, _type and _id parameters using the '"match_all": {}' query.</p>&#xA;&#xA;<p>It looks like the second example of this official elastic search ressource : <a href="http://www.elastic.co/guide/en/elasticsearch/reference/1.5/query-dsl-mlt-query.html" rel="nofollow">http://www.elastic.co/guide/en/elasticsearch/reference/1.5/query-dsl-mlt-query.html</a></p>&#xA;&#xA;<p>What's wrong with my 'more_like_this' query ? </p>&#xA;
<p>I am assuming you have only a less number of documents.&#xA;In that case , can you give min_doc_freq as 0 and try again.&#xA;Also use POST for search - </p>&#xA;&#xA;<pre><code>POST _search&#xA;{&#xA;       "query": {&#xA;        "more_like_this" : {&#xA;            "fields" : ["town"],&#xA;            "docs" : [&#xA;            {&#xA;                "_index" : "app",&#xA;                "_type" : "house",&#xA;                "_id" : "4"&#xA;            }&#xA;            ],&#xA;            "min_term_freq" : 1,&#xA;            "max_query_terms" : 12,&#xA;            "min_doc_freq" : 1&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;