33979225
how use shingle token elasticsearch begin from string
<p>I want use Shingle token to analyze the string "The quick brown fox jumps over the lazy dog" into:</p>&#xA;&#xA;<p>1.The</p>&#xA;&#xA;<p>2.The quick</p>&#xA;&#xA;<p>...</p>&#xA;&#xA;<p>n. The quick brown fox jumps over the lazy dog</p>&#xA;&#xA;<p>I need help.&#xA;Thanks.</p>&#xA;
<p>By using the following index settings where we create a custom analyzer with a shingle token filter, you'll be able to generate the terms you're expecting:</p>&#xA;&#xA;<pre><code>curl -XPUT localhost:9200/your_index -d '{&#xA;  "settings": {&#xA;    "index": {&#xA;      "number_of_shards": "5",&#xA;      "number_of_replicas": "1",&#xA;      "analysis": {&#xA;        "analyzer": {&#xA;          "my_shingles": {&#xA;            "tokenizer": "standard",&#xA;            "filter": [&#xA;              "shingles"&#xA;            ]&#xA;          }&#xA;        },&#xA;        "filter": {&#xA;          "shingles": {&#xA;            "type": "shingle",&#xA;            "min_shingle_size": 2,&#xA;            "max_shingle_size": 10&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  },&#xA;  "mappings": {&#xA;    "your_type": {&#xA;      "properties": {&#xA;        "field": {&#xA;          "type": "string",&#xA;          "analyzer": "my_shingles"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>Then, we can ask the <code>_analyze</code> endpoint to show how it would tokenize your sentence:</p>&#xA;&#xA;<pre><code> curl -XGET 'localhost:9200/your_index/_analyze?analyzer=my_shingles&amp;pretty' -d 'The quick brown fox jumps over the lazy dog'&#xA;</code></pre>&#xA;&#xA;<p>The response will be</p>&#xA;&#xA;<pre><code>{&#xA;  "tokens" : [ {&#xA;    "token" : "The",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 3,&#xA;    "type" : "&lt;ALPHANUM&gt;",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 9,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick brown",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 15,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick brown fox",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 19,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick brown fox jumps",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 25,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick brown fox jumps over",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 30,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick brown fox jumps over the",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 34,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick brown fox jumps over the lazy",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 39,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;    "token" : "The quick brown fox jumps over the lazy dog",&#xA;    "start_offset" : 0,&#xA;    "end_offset" : 43,&#xA;    "type" : "shingle",&#xA;    "position" : 1&#xA;  }, {&#xA;  ...&#xA;</code></pre>&#xA;&#xA;<p>You'll also note that there will be a lot more shingles generated, but the ones above do match your expectations.</p>&#xA;