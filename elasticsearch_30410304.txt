30410304
Latest fsriver plugin not working
<p>I have issue with latest <code>fsriver</code> plugin.&#xA;I executed following command to index document </p>&#xA;&#xA;<pre><code>PUT _river/mynewriver2/_meta&#xA;{&#xA;    "type": "fs",&#xA;    "fs": {&#xA;        "url": "d://tmp",&#xA;        "update_rate": "1h",&#xA;        "includes": [ "*.doc" , "*.xls", "*.txt" ]&#xA;    },&#xA;    "index": {&#xA;        "index": "docs1",&#xA;        "type": "doc1",&#xA;        "bulk_size": 50&#xA;    }  &#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Inside <code>d://tmp</code>  I have a simple txt  file with person name.&#xA;But when I am executing the command to check document, I am not getting any document.</p>&#xA;&#xA;<pre><code>GET docs1/doc1/_search&#xA;output : &#xA;{&#xA;    "took": 3,&#xA;    "timed_out": false,&#xA;    "_shards": {&#xA;        "total": 5,&#xA;        "successful": 5,&#xA;        "failed": 0&#xA;    },&#xA;    "hits": {&#xA;        "total": 0,&#xA;        "max_score": null,&#xA;        "hits": []&#xA;    }&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>In elasticsearch console, I have following log: </p>&#xA;&#xA;<pre><code>[2015-05-23 12:40:40,645][INFO ][cluster.metadata         ] [Ulysses] [.marvel-2015.05.23] update_mapping [cluster_stats] (dynamic)&#xA;[2015-05-23 12:40:54,037][INFO ][cluster.metadata         ] [Ulysses] [_river] creating index, cause [auto(index api)], templates [], shards [1]/[1], mappings [mynewriver2]&#xA;[2015-05-23 12:40:56,511][INFO ][cluster.metadata         ] [Ulysses] [_river] update_mapping [mynewriver2] (dynamic)&#xA;[2015-05-23 12:40:57,023][INFO ][fr.pilato.elasticsearch.river.fs.river.FsRiver] [Ulysses] [fs][mynewriver2] Starting fs river scanning&#xA;[2015-05-23 12:40:57,309][INFO ][cluster.metadata         ] [Ulysses] [docs1] creating index, cause [api], templates [], shards [5]/[1], mappings []&#xA;[2015-05-23 12:41:00,762][INFO ][cluster.metadata         ] [Ulysses] [.marvel-2015.05.23] update_mapping [index_event] (dynamic)&#xA;</code></pre>&#xA;&#xA;<p>I am running elasticsearch 1.5.2 in windows 7 ( 64 bit).</p>&#xA;
<p>Since you're on a Windows system, it looks like the specified path is not correct according to <a href="https://github.com/dadoonet/fsriver#choose-scanned-directory" rel="nofollow">the documentation</a>, i.e. you should either use <strong>two back slashes instead of two forward slashes</strong> in your path OR a <strong>single forward slash</strong>. Can you try to delete your river and re-create it like this</p>&#xA;&#xA;<pre><code>PUT _river/mynewriver2/_meta&#xA;{&#xA;    "type": "fs",&#xA;    "fs": {&#xA;        "url": "d:\\tmp",&#xA;        "update_rate": "1h",&#xA;        "includes": [ "*.doc" , "*.xls", "*.txt" ]&#xA;    },&#xA;    "index": {&#xA;        "index": "docs1",&#xA;        "type": "doc1",&#xA;        "bulk_size": 50&#xA;    }  &#xA;}&#xA;</code></pre>&#xA;&#xA;<p>or like this:</p>&#xA;&#xA;<pre><code>PUT _river/mynewriver2/_meta&#xA;{&#xA;    "type": "fs",&#xA;    "fs": {&#xA;        "url": "d:/tmp",&#xA;        "update_rate": "1h",&#xA;        "includes": [ "*.doc" , "*.xls", "*.txt" ]&#xA;    },&#xA;    "index": {&#xA;        "index": "docs1",&#xA;        "type": "doc1",&#xA;        "bulk_size": 50&#xA;    }  &#xA;}&#xA;</code></pre>&#xA;