31968359
elasticsearch auto rebalancing of data across shards
<p>I'm new to ElasticSearch.&#xA;Lets suppose I've 10000 documents. The relevant field in the documents are such that after getting indexed most of them would end up in a single shard.</p>&#xA;&#xA;<p>Would ElasticSearch rebalance this "skewed" distribution for, may be better load balancing?</p>&#xA;
<p>I don't exactly understand what you mean by this "the relevant field in the documents are such that after getting indexed most of them would end up in a single shard".</p>&#xA;&#xA;<p>From what I understand, ElasticSearch will automatically balances the shards between all the nodes started on your setup to be the most effective possible.</p>&#xA;&#xA;<p>The document are indexed on a shard with the field. The same document cannot have some fields on node 1 and some other fields on node 2.</p>&#xA;
<p>If I got you question right, the short answer - no, the documents will not be relocated. Choosing shard is based on modulo-like distribution, and its used for index as well as for retrieval.</p>&#xA;&#xA;<p>So, if (theoretically) ES will rebalance such docs, you'll be unable to retrieve them with you routing key, as it will leads to original shard (which is empty in such theoretical case).</p>&#xA;&#xA;<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/distributed-docs.html" rel="nofollow">"distribution" part of docs</a> if nice place for further reading</p>&#xA;