29117373
To Select documents having same startDate and endDate
<p>I have some documents where in each document , there is a <code>startDate</code> and <code>endDate</code> date fields. I need all documents with both these value as same. I couldn't find any query which will help me to do it.</p>&#xA;
<p>Elasticsearch supports script filters, which you can use in this case . <a href="http://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-script-filter.html" rel="nofollow">More Info</a>&#xA;Something like this is what you will need -</p>&#xA;&#xA;<pre><code>POST /&lt;yourIndex&gt;/&lt;yourType&gt;/_search?&#xA;{&#xA;    "query": {&#xA;        "filtered": {&#xA;           "filter": {&#xA;               "script": {&#xA;                  "script": "doc['startDate'].value == doc['endDate'].value"&#xA;               }&#xA;           }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;
<p>This can be achieved in 2 manner</p>&#xA;&#xA;<ol>&#xA;<li>Index solution - While indexing add an additional field called isDateSame and set it to true or false based on the value of startDate and endDate. Then you can easily do a query based on that field. This is the best optimized solution</li>&#xA;<li>Script solution - Elasticsdearch maintains all the indexed data in field data which is more like a reverse reverse index. Using script you can access  any indexed fields and do comparison. This is pretty fast but not as good as first one.You can use the following query for the same</li>&#xA;</ol>&#xA;