33120572
elasticsearch must restart master for new node joining in zen discovery
<p>I have an elasticsearch cluster of version 1.5.2<br>&#xA;There is one master node and one data node in the cluster.<br>&#xA;When I add a new data node into the cluster(with the same <strong>cluster name</strong>) with the name <strong>node.name : "Node2"</strong>, the new node can't join in the cluster <strong>with no logs</strong> indicating what happens.<br>&#xA;My main conifg file is as below:<br>&#xA;<strong>master node config:</strong>  </p>&#xA;&#xA;<pre><code>cluster.name: cluster1&#xA;node.name: "Master"&#xA;node.master: true&#xA;node.data: false&#xA;discovery.zen.minimum_master_nodes: 1&#xA;discovery.zen.ping.timeout: 3s&#xA;discovery.zen.ping.retries: 6&#xA;discovery.zen.ping.interval: 30s&#xA;</code></pre>&#xA;&#xA;<p><strong>data node config of node1:</strong>  </p>&#xA;&#xA;<pre><code>cluster.name: cluster1&#xA;node.name: "Node1"&#xA;node.master: false&#xA;node.data: true&#xA;discovery.zen.minimum_master_nodes: 1&#xA;discovery.zen.ping.timeout: 3s&#xA;discovery.zen.ping.retries: 6&#xA;discovery.zen.ping.interval: 30s&#xA;</code></pre>&#xA;&#xA;<p><strong>data node config of node2:</strong>  </p>&#xA;&#xA;<pre><code>cluster.name: cluster1&#xA;node.name: "Node2"&#xA;node.master: false&#xA;node.data: true&#xA;discovery.zen.minimum_master_nodes: 1&#xA;discovery.zen.ping.timeout: 3s&#xA;discovery.zen.ping.retries: 6&#xA;discovery.zen.ping.interval: 30s&#xA;</code></pre>&#xA;&#xA;<p>When I restart the master node, the new node successfully join in the cluster.<br>&#xA;Does anyone know how to join new nodes into the cluster without restarting the master??</p>&#xA;
<p>If you're using <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-zen.html#unicast" rel="nofollow">unicast</a>, you need to add:</p>&#xA;&#xA;<pre><code>discovery.zen.ping.unicast.hosts = [...]&#xA;discovery.zen.ping.multicast.enabled = False&#xA;</code></pre>&#xA;&#xA;<p>If you're using multicast, you need to set the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-zen.html#multicast" rel="nofollow">appropriate multicast settings</a> (for <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-discovery-zen.html#_external_multicast" rel="nofollow">external multicast</a>).</p>&#xA;&#xA;<p>If you're using AWS, I suggest looking at the <a href="https://github.com/elastic/elasticsearch-cloud-aws" rel="nofollow">elasticsearch-cloud-aws</a> plugin.</p>&#xA;&#xA;<p>PS: In the current configuration, you have no data nodes.</p>&#xA;