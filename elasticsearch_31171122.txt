31171122
Cannot load search template registered with REST API
<p>I have a problem when loading a search template which has been registrered through the REST API. If the search template is placed in the /config/scrips/ folder there is no problem.</p>&#xA;&#xA;<p>The template has been registrered via POST to: <strong>/_search/template/templateName</strong>, and I can see that the template has been succesfully registered when I do a GET to: <strong>/_search/template/templateName</strong>.</p>&#xA;&#xA;<p>However, when I try to send a request that utilizes this search template I get an error. If have tried the following endpoints:</p>&#xA;&#xA;<p><code>POST: /_search/template</code> (the one from the documentation)</p>&#xA;&#xA;<p><code>POST: [index]/_search/template</code></p>&#xA;&#xA;<p><code>POST: [index]/[type]/_search/template</code></p>&#xA;&#xA;<p>With this body:</p>&#xA;&#xA;<pre><code>{&#xA;"template": {&#xA;"file": "templateName"&#xA;},&#xA;"params": {&#xA;"userId" : "AU43nSoTZOSzwq_2ZUA4",&#xA;etc...&#xA;}&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>But it keeps returning this error:</p>&#xA;&#xA;<pre><code>{&#xA;"error": "SearchPhaseExecutionException[Failed to execute phase [query_fetch], all shards failed; shardFailures {[UDBaJWKqQ5GpZedzLCtrFg][.scripts][0]: ElasticsearchIllegalArgumentException[Unable to find on disk script templateName]}]",&#xA;"status": 400&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I cannot upload files to the ElasticSearch host that I'm using, so I need to register them via POST request. What am I missing?</p>&#xA;&#xA;<p>Thanks in advance</p>&#xA;
<p>The correct search request is like this:</p>&#xA;&#xA;<pre><code>GET /some_index/_search/template&#xA;{&#xA;  "template": {&#xA;    "id":"templateName"&#xA;  },&#xA;  "params": {&#xA;    "userId" : "AU43nSoTZOSzwq_2ZUA4",&#xA;    ...&#xA;  }&#xA;}&#xA;</code></pre>&#xA;