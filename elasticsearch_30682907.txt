30682907
Elasticsearch query ignoring spaces
<p>On Elasticsearch how can you query a string attribute ignoring white spaces ? </p>&#xA;&#xA;<p>The scenario is having phone numbers indexed as strings, with different formatings. Querying a phone without spaces, can I get all strings that have that phone (with or without spaces). For example: </p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "bool": {&#xA;      "must": [&#xA;        {&#xA;          "match_all": {}&#xA;        }&#xA;      ],&#xA;      "must_not": [],&#xA;      "should": []&#xA;    }&#xA;  },&#xA;  "filter": {&#xA;    "nested": {&#xA;      "path": "Contacts",&#xA;      "query": {&#xA;        "query_string": {&#xA;          "default_field": "Contacts.ContactValue",&#xA;          "query": "261981255"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>This query would return contacts like: "261981255", "261 981 255", "26 19 81 25 5", etc. </p>&#xA;
<p>You need to use a specific analyzer which breaks your query into grams.</p>&#xA;&#xA;<p>You can do that by setting un the mapping a search_analyzer for your field.</p>&#xA;
<p>Try to reindex your data using a char filter in your analyzer to recognize these patterns and adjust to a desired way.</p>&#xA;&#xA;<p>By this way, all your future queries will be easy to perform if you have a single pattern in entire data.</p>&#xA;