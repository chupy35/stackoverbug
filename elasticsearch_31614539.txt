31614539
How to do two almost identical Elasticsearch queries in one, where the second query results are a subset of the first
<p>Say for example, I have two queries. The second query is exactly the same as the first but matches on an additional field, so the results are a subset of the first. Can this be done in one query?</p>&#xA;&#xA;<p>The reason being is I want to do a paginated search on products, but at the same time I want to show 3 random products from the entire result set (on any page in the paginated set) that are "new". So those 3 random products are basically the same query but matching on the "new" field (or alternatively doing a range on the added field). Rather than doing two separate queries can this be done in one go?</p>&#xA;
<p>Using <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-multi-search.html" rel="nofollow">Multi query _msearch</a> API would work for your requirement.&#xA;Also if you are thinking of random score , you can think of using <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html" rel="nofollow">random score function</a> , but then its not exactly what you are looking for.</p>&#xA;