29622443
Scripted Metric Aggregation order
<p>In elasticsearch 1.5.0, I try to sort/order the aggregation bucket using scripted_metric result,but receive bellow error:</p>&#xA;&#xA;<p>AggregationExecutionException[Invalid terms aggregation order path [custom_script]. Terms buckets can only be sorted on a sub-aggregator path that is built out of zero or more single-bucket aggregations within the path and a final single-bucket or a metrics aggregation at the path end</p>&#xA;&#xA;<p>is any way to solve this issue?</p>&#xA;&#xA;<p><strong>my query like this:</strong></p>&#xA;&#xA;<pre><code>"aggs": {&#xA;    "mygroup": {&#xA;      "terms": {&#xA;        "field": "customername",&#xA;        "order": {&#xA;          "custom_script": "asc"&#xA;        }&#xA;      },&#xA;      "aggs": {&#xA;        "custom_script": {&#xA;          "scripted_metric": {&#xA;            ...&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;</code></pre>&#xA;
<p>Nope, it's a current limitation. Being tracked in <a href="https://github.com/elastic/elasticsearch/issues/8486" rel="nofollow">https://github.com/elastic/elasticsearch/issues/8486</a></p>&#xA;