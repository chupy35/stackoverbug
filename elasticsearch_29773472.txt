29773472
How to ignore some fields in river mongodb and elasticsearch?
<p>I use river mongo to bind a mongodb collection to elastic search. </p>&#xA;&#xA;<p>This results in every field in mongo collection will be saved in elasticseach index.</p>&#xA;&#xA;<p>I want to know how to ignore some fields, don't let it save in elastic index.</p>&#xA;
<p>When setting up mongodb river, you can exclude certain fields, e.g.</p>&#xA;&#xA;<pre><code> "mongodb": {&#xA;        "db": "YourDbName",&#xA;        "collection": "YourCollectionName",&#xA;        "options": {&#xA;              "exclude_fields": "name_of_field_to_be_ignored"&#xA;            }&#xA;    },&#xA;</code></pre>&#xA;
<p>I got another method from river mongo wiki. by using script, you can customize..However, you should set disable script to be false in elasticsearch.yml .</p>&#xA;&#xA;<p><a href="https://github.com/richardwilly98/elasticsearch-river-mongodb/wiki" rel="nofollow">https://github.com/richardwilly98/elasticsearch-river-mongodb/wiki</a></p>&#xA;&#xA;<pre><code>$ curl -XPUT "localhost:9200/_river/mongoscriptfilter/_meta" -d'&#xA;{&#xA;  "type": "mongodb",&#xA;    "mongodb": {&#xA;      "db": "testmongo", &#xA;      "collection": "documents", &#xA;      "script": "ctx.document.title = ctx.document.title_from_mongo; delete ctx.document.title_from_mongo;"&#xA;    },&#xA;    "index": {&#xA;      "name": "testmongo", &#xA;      "type": "documents"&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;