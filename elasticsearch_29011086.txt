29011086
How do I search within an list of strings in Elastic Search?
<p>My data has a field localities which is an array of strings.</p>&#xA;&#xA;<pre><code>"localities": [&#xA;"Mayur Vihar Phase 1",&#xA;"Paschim Vihar",&#xA;"Rohini",&#xA;"",&#xA;"Laxmi Nagar",&#xA;"Vasant Vihar",&#xA;"Dwarka",&#xA;"Karol Bagh",&#xA;"Inderlok"  ]&#xA;</code></pre>&#xA;&#xA;<p>What query should I write to filter the documents by a specific locality such as "Rohini"?</p>&#xA;
<p>A simple <code>match</code> query will be enough (if you don't know the mapping of your <code>localities</code> field).</p>&#xA;&#xA;<pre><code>POST &lt;your index&gt;/_search&#xA;{&#xA;  "query": {&#xA;    "match": {&#xA;      "localities": "Rohini"&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>If the <code>localities</code> field is set as a <code>string</code> type and <code>index</code> as <code>not_analyzed</code>, the best way to query this is to use a <code>term</code> filter, wrapped in a <code>filtered</code> query (you can't use directly filters) :</p>&#xA;&#xA;<pre><code>POST &lt;your index&gt;/_search&#xA;{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "term": {&#xA;          "localities": "Rohini"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>If you doesn't need the score, the second solution is the way to go as filters doesn't compute score, are faster and cached.</p>&#xA;&#xA;<p>Check the documentation for information about analysis which is a very important subject in ElasticSearch, heavily influencing the way you query.</p>&#xA;
<pre><code>POST /_search&#xA;{&#xA;  "query": {&#xA;    "match": {&#xA;      "localities": "Rohini"&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Or you can simply query:</p>&#xA;&#xA;<pre><code>GET /_search?q=localities:Rohini&#xA;</code></pre>&#xA;