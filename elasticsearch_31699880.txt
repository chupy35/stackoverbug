31699880
Elasticsearch boost but only one occurrence of term per field
<p>I'm currently sending the following query to ElasticSearch:</p>&#xA;&#xA;<pre><code>{&#xA;    "size": 100,&#xA;    "query": {&#xA;        "function_score": {&#xA;            "query": {&#xA;                "simple_query_string": {&#xA;                    "query": "term1",&#xA;                    "fields": ["field1^10", "field2^5"]&#xA;                }&#xA;            }]&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Now imagine I have two documents.</p>&#xA;&#xA;<ul>&#xA;<li>Document1 contains one occurrence of "term1" on field1</li>&#xA;<li>Document2 contains three occurrences of "term1" on field2</li>&#xA;</ul>&#xA;&#xA;<p><strong>What I get</strong>: Elastic returns Document2 above Document1</p>&#xA;&#xA;<p><strong>What I want</strong>: Document1 above Document2.</p>&#xA;&#xA;<p>To achieve this, Elastic should not multiply the number of occurrences of "term1" just that it "appears". What should I do to my query?</p>&#xA;
<p>There seems to be two kinds of options to force Elastic not give more weight based on number of occurrences of a term.</p>&#xA;&#xA;<p>The fist one is map the fields to disable term frequency (TF): <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/scoring-theory.html#tfidf" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/guide/current/scoring-theory.html#tfidf</a></p>&#xA;&#xA;<p>The second one is to use the Constant Score Query: <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/ignoring-tfidf.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/guide/current/ignoring-tfidf.html</a></p>&#xA;