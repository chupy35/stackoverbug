31735250
Can I define a snapshot repository in the configuration YAML?
<p>I need to have Elastic Search do snapshots and restores of indices to and from Amazon S3. </p>&#xA;&#xA;<p>The documentation for the elasticsearch-cloud-aws plugin which contains the S3 repository <a href="https://github.com/elastic/elasticsearch-cloud-aws#s3-repository" rel="nofollow">states</a>:</p>&#xA;&#xA;<blockquote>&#xA;  <p>The S3 repository is using S3 to store snapshots. The S3 repository can be created using the following command:</p>&#xA;&#xA;<pre><code>$ curl -XPUT 'http://localhost:9200/_snapshot/my_s3_repository -d '{&#xA;    "type": "s3",&#xA;    "settings": {&#xA;        "bucket": "my_bucket_name",&#xA;        "region": "us-west"&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;</blockquote>&#xA;&#xA;<p>I'm not understanding the concept of repositories. Shouldn't repositories be defined in the YAML configuration file? We're automating the installation and configuration of Elastic Search and we want each cluster to have an S3 repository defined with a given name. </p>&#xA;&#xA;<p>Do I have to send this PUT as part of my configuration of the Elastic Search cluster, or is there a way to define this configuration in the YAML configuration file for Elastic Search? </p>&#xA;&#xA;<p><sub>(CentOS 7 on EC2 with Elastic Search 1.7.0)</sub></p>&#xA;
<p>I think you linked the answer yourself..</p>&#xA;&#xA;<p>At the bottom of the page <a href="https://github.com/elastic/elasticsearch-cloud-aws#s3-repository" rel="nofollow">states</a> you have an example. The parts of importance seems to be</p>&#xA;&#xA;<pre><code>repositories:&#xA;    s3:&#xA;        bucket: "bucket_name"&#xA;        region: "us-west-2"&#xA;</code></pre>&#xA;&#xA;<p>Putting that in your <strong>elasticsearch.yml</strong> should work (thou I have not tested it).</p>&#xA;