32206781
Elastic Search Adding a Script Field vs Adding a new Index field
<p>I'm new to Elastic Search.&#xA;I have a index field called "actual" which is of float type.&#xA;I need a new field "derived" which is derived from the "actual" field after some computations.&#xA;E.g derived.value = ((actual.value/120) - 30) x 2&#xA;I need desired field in the Elastic Search because,&#xA; - I want to sort Elastic Search results based on the derived.value&#xA; - I want to retrieve the results based on the derived.value E.g. Retrieve only documents if derived.value > 20</p>&#xA;&#xA;<p>I know we could do this using script field in elastic search as well.&#xA;My question is, Which would be more efficient based on fetching time?&#xA;Either adding a new index field to the elastic search storage or using a script field?</p>&#xA;&#xA;<p><strong>Update:</strong>&#xA;The formula becomes much complex,&#xA;derived.value = ((actual.value/a) - b) x (c - d/2)</p>&#xA;&#xA;<p>Here, 'a' can take 6 different values, 'b' can take 8 different values, 'c' can take 12 different values and 'd' can take 3 different values.&#xA;If I'm precomputing the values, then i would need additional (6 x 8 x 12 x 3) fields in one document to just retrieve the value without any computation.</p>&#xA;&#xA;<p>But if I'm using script field then i could just pass the current values for a, b , c, d as params while searching and calculate them on the fly.</p>&#xA;&#xA;<p>I have ten thousand documents currently and it's size can grow more.&#xA;Is there any other optimistic way to do this, other than having script fields?</p>&#xA;
<p>It should be the added field for sure. Script needs to be executed per document per search execution which is CPU intensive. In the former , we just need to retrieve it which should be  much faster.</p>&#xA;