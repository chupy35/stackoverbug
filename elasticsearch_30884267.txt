30884267
Is it possible to do equivalent of SQL "HAVING" in elasticsearch aggregations?
<p>I'm doing an an aggregation where I'm looking for term frequency of a certain field.  There are many terms that are very common, many of that are very uncommon and some of that are moderately common.  I would like to find those. </p>&#xA;&#xA;<p>In SQL I would do something like <code>HAVING num_words &lt; 300 and num_words &gt;50</code>. I'm trying to find a way to tell the aggregation do the same thing.  </p>&#xA;&#xA;<p>How would I do this?</p>&#xA;
<pre><code>curl -XGET 'http://127.0.0.1:9200/indexName/typeName/_search' -d '&#xA;{&#xA;"min_score": 1,&#xA;"query": {&#xA;    "function_score": {&#xA;        "boost_mode": "replace",&#xA;        "script_score": {&#xA;            "lang": "javascript",&#xA;            "script": "if(_score&gt;min_value &amp;&amp; _score&lt;max_value) {_score} else {0.0}",&#xA;            "params": {&#xA;                "min_value": 0,&#xA;                "max_value": 1000&#xA;            }&#xA;        },&#xA;        "query": {&#xA;            "score_type": "sum",&#xA;            "query": {&#xA;                "function_score": {&#xA;                    "boost_mode": "replace",&#xA;                    "script_score": {&#xA;                        "script": "if(doc[\"indexname.amt\"]) {doc[\"indexname.amt\"].value} else {0.0}"&#xA;                    }&#xA;                }&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>This is part of my request. I hope it could help you.</p>&#xA;