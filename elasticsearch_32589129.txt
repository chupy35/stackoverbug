32589129
Searching for term and range in same bool filter in elasticsearch
<p>My query is like:</p>&#xA;&#xA;<pre><code>query: {&#xA;    filtered: {&#xA;        filter: {&#xA;            bool: {&#xA;                must: [&#xA;                    range: {price: {gte: 222, lte: 1000}},&#xA;                    term: {city: Adana}&#xA;                ]&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>It returns empty result. But doing same using uri search (<code>_search?q=city:Adana</code> gives correct result.</p>&#xA;&#xA;<p>Giving multiple range queries, like latitude and price works, but adding term fails.</p>&#xA;&#xA;<p>What can be problem here?</p>&#xA;
<p>Try this:</p>&#xA;&#xA;<pre><code>query: {&#xA;    filtered: {&#xA;        filter: {&#xA;            bool: {&#xA;                must: [&#xA;                    { range: {price: {gte: 222, lte: 1000}} },&#xA;                    { term: {city: Adana} }&#xA;                ]&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Here is some code I used to test it:</p>&#xA;&#xA;<p><a href="http://sense.qbox.io/gist/7a4811d00e562f4d41e252ae5084ec78fa23d80f" rel="noreferrer">http://sense.qbox.io/gist/7a4811d00e562f4d41e252ae5084ec78fa23d80f</a></p>&#xA;