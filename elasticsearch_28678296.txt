28678296
Elasticsearch store field vs _source
<p>Using Elasticsearch 1.4.3</p>&#xA;&#xA;<p>I'm building a sort of "reporting" system. And the client can pick and chose which fields they want returned in their result.</p>&#xA;&#xA;<p>In 90% of the cases the client will never pick all the fields, so I figured I can disable _source field in my mapping to save space. But then I learned that</p>&#xA;&#xA;<pre><code>GET myIndex/myType/_search/&#xA;{&#xA;    "fields": ["field1", "field2"]&#xA;    ...&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Does not return the fields.</p>&#xA;&#xA;<p>So I assume I have to then use "store": true for each field. From what I read this will be faster for searches, but I guess space wise it will be the same as _source or we still save space?</p>&#xA;
<p>Enabling <code>_source</code> will store the entire JSON document in the index while <code>store</code> will only store individual fields that are marked so. So using <code>store</code> might be better than using <code>_source</code> if you want to save disk space.</p>&#xA;
<p>The <code>_source</code> field stores the JSON you send to Elasticsearch and you can choose to only return certain fields if needed, which is perfect for your use case. I have never heard that the stored fields will be faster for searches. The <code>_source</code> field could be bigger on disk space, but if you have to store every field there is no need to use stored fields over the <code>_source</code> field. If you do disable the source field it will mean:</p>&#xA;&#xA;<ul>&#xA;<li>You won’t be able to do partial updates</li>&#xA;<li>You won’t be able to re-index your data from the JSON in your&#xA;Elasticsearch cluster, you’ll have to re-index from the data source&#xA;(which is usually a lot slower).</li>&#xA;</ul>&#xA;
<p>Clinton Gormley says in the link below</p>&#xA;&#xA;<p><a href="https://groups.google.com/forum/#!topic/elasticsearch/j8cfbv-j73g/discussion" rel="nofollow">https://groups.google.com/forum/#!topic/elasticsearch/j8cfbv-j73g/discussion</a></p>&#xA;&#xA;<ul>&#xA;<li><p>by default ES stores your JSON doc in the _source field, which is&#xA;set to "stored"</p></li>&#xA;<li><p>by default, the fields in your JSON doc are set to NOT be "stored"&#xA;(ie stored as a separate field)</p></li>&#xA;<li><p>so when ES returns your doc (search or get) it just load the _source&#xA;field and returns that, ie a single disk seek</p></li>&#xA;</ul>&#xA;&#xA;<p>Some people think that by storing individual fields, it will be faster&#xA;than loading the whole JSON doc from the _source field.  What they don't&#xA;realise is that each stored field requires a disk seek (10ms each seek!&#xA;), and that the sum of those seeks far outweighs the cost of just&#xA;sending the _source field.</p>&#xA;&#xA;<p>In other words, it is almost always a false optimization. </p>&#xA;
<p>By default in elasticsearch, the <code>_source</code> (the document one indexed) is stored. This means when you search, you can get the actual document source back. Moreover, elasticsearch will automatically extract <code>fields/objects</code> from the <code>_source</code> and return them if you explicitly ask for it (as well as possibly use it in other components, like highlighting).</p>&#xA;&#xA;<p>You can specify that a specific field is also stored. This means that the data for that field will be stored <strong>on its own</strong>. Meaning that if you ask for <code>field1</code> (which is stored), elasticsearch will identify that its stored, and load it from the index instead of getting it from the <code>_source</code> (assuming <code>_source</code> is enabled).</p>&#xA;&#xA;<p>When do you want to enable storing specific fields? Most times, you don't. Fetching the <code>_source</code> is fast and extracting it is fast as well. If you have very large documents, where the cost of storing the <code>_source</code>, or the cost of parsing the <code>_source</code> is high, you can explicitly map some fields to be stored instead.</p>&#xA;&#xA;<p>Note, there is a cost of retrieving each stored field. So, for example, if you have a json with 10 fields with reasonable size, and you map all of them as stored, and ask for all of them, this means loading each one (more disk seeks), compared to just loading the <code>_source</code> (which is one field, possibly compressed).</p>&#xA;&#xA;<p><strong>I got this answer on below link answered by shay.banon you can read this whole thread to get good understanding about it.</strong> <a href="http://elasticsearch-users.115913.n3.nabble.com/What-does-it-mean-to-quot-store-quot-a-field-td3514176.html" rel="nofollow noreferrer">enter link description here</a></p>&#xA;