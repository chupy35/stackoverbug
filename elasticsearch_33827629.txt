33827629
Elasticsearch cluster data migration to new cluster
<p>We have a Elasticsearch cluster which is running on elasticsearch 1.4 and logstash 1.4 with 1 master and 4 data node, now I want to upgrade the version of elasticsearch to 1.7 and logstash to 1.5 without losing any data. So my plan is to create a new cluster with new nodes and restore the snapshot of the current cluster on that. Now my question is this the best way or upgrade the versions on the current cluster. I am bit of nervous because it a production logging stack working smoothly.I don't want to mess around with production cluster with testing</p>&#xA;
<p>First of all, read <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/setup-upgrade.html" rel="nofollow">documentation</a>. As you said, you'd like to upgrade from 1.4 to 1.7, which means there's no significant version jump.</p>&#xA;&#xA;<p>Documentation states that upgrading from 1.x version to another 1.x version you have to do a rolling upgrade. What's that? Quoting documentation:</p>&#xA;&#xA;<blockquote>&#xA;  <p>A rolling upgrade allows the ES cluster to be upgraded one node at a&#xA;  time, with no observable downtime for end users.</p>&#xA;</blockquote>&#xA;&#xA;<p>Which means you can shut node down one by one, upgrade its binaries and turn it back on. <strong>One node by one!</strong>.</p>&#xA;&#xA;<p>Of course, always do a backup in case **** happens.</p>&#xA;