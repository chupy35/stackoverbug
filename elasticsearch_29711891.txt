29711891
Elasticsearch Multi-match query and matching a single field
<p>How can I perform a multi-match query on a single index type, matching all fields while matching a single field. </p>&#xA;&#xA;<p>Let say I have a books index type and I want to perform search on all of its fields that will match the genre field. For example search within "autobiography" genre..</p>&#xA;&#xA;<p><strong>my code</strong></p>&#xA;&#xA;<pre><code>{&#xA;   "query": {&#xA;      "filtered": {&#xA;         "query": {&#xA;            "match": {&#xA;               "genre": "autobiography"&#xA;            },&#xA;            "multi_match" : {&#xA;                "query": "Johnny Appleseed",&#xA;                "fields": ["author", "publication_date", "isbn", "genre"]&#xA;            }&#xA;         },&#xA;         "filter": {&#xA;            "type": {&#xA;               "value": "books"&#xA;            }&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;</code></pre>&#xA;
<p>_all is the right choice to solve this problem.&#xA;LINK - <a href="http://www.elastic.co/guide/en/elasticsearch//reference/current/mapping-all-field.html" rel="nofollow">http://www.elastic.co/guide/en/elasticsearch//reference/current/mapping-all-field.html</a></p>&#xA;&#xA;<p>Be default _all is an additional field which has all tokens from all fields. This makes it ideal for document level unstructured search.&#xA;Now as _all is for all fields , it might not be that generic for us.&#xA;In that case , in the mapping you can give include_in_all as false for the fields that you don't want to be present in _all.&#xA;Hence instead of doing a multi search , you can search just to _all.</p>&#xA;