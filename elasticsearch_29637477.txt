29637477
Unassigned shards in one node
<p>I have two nodes, one with the primary shards working fine, but in the other node the replicas are "jumping" all the time, they go from "UNASSIGNED" to "INITIALIZING" or "STARTED" state every few seconds. The cluster is yellow and is working fine, but is not ideal. At the beginning everything was fine, and was working fine for weeks, but now I don't know what happened.&#xA;This is the situation:</p>&#xA;&#xA;<pre><code>my_index 2 p STARTED      1923276 2.4gb 127.0.1.1 Node1 &#xA;my_index 2 r STARTED      1923276 2.4gb 127.0.1.1 Node2  &#xA;my_index 0 p STARTED      1923241 2.4gb 127.0.1.1 Node1 &#xA;my_index 0 r STARTED      1923241 2.4gb 127.0.1.1 Node2  &#xA;my_index 3 p STARTED      1922607 2.4gb 127.0.1.1 Node1 &#xA;my_index 3 r INITIALIZING               127.0.1.1 Node2  &#xA;my_index 1 p STARTED      1921356 2.4gb 127.0.1.1 Node1 &#xA;my_index 1 r UNASSIGNED                                                       &#xA;my_index 4 p STARTED      1922748 2.4gb 127.0.1.1 Node1 &#xA;my_index 4 r INITIALIZING               127.0.1.1 Node2  &#xA;</code></pre>&#xA;&#xA;<p>I tried allocating the unassigned shards but then another is unassigned:</p>&#xA;&#xA;<pre><code>http://virt4.sitescout.com:9200/_cluster/reroute&#xA;{&#xA;        "commands" : [ {&#xA;              "allocate" : {&#xA;                  "index" : "my_index", &#xA;                  "shard" : 1, &#xA;                  "node" : "Node2", &#xA;                  "allow_primary" : false&#xA;              }&#xA;            }&#xA;        ]&#xA;    }&#xA;</code></pre>&#xA;&#xA;<p>Anyone has an idea why is this happening? </p>&#xA;&#xA;<p>Thanks!</p>&#xA;
<p>It was as simple as checking the logs. I saw that there were too many open files, so I increased the limit in both machines and now everything is working fine.</p>&#xA;