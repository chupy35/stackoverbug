28982336
ReactJS key attribute type
<p>I can't find the documentation about the allowed types for <em>key</em> attribute.&#xA;Looks like type <em>object</em> is not an option, i'm getting 'duplicate keys warning' in console while  using plain js object as key :</p>&#xA;&#xA;<pre class="lang-jsx prettyprint-override"><code>var someArray = [{name:1},{name:2}];&#xA;{someArray.map(function(o){&#xA;    return &lt;div key={o}&gt; {o.name} &lt;/div&gt;&#xA;    })&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>The fiddle is here :   <a href="http://jsfiddle.net/iamfuric/gosbgm6q/" rel="nofollow">http://jsfiddle.net/iamfuric/gosbgm6q/</a></p>&#xA;&#xA;<p>Is it a bug or <em>object</em> is  unsupported ?</p>&#xA;&#xA;<p>Thanks</p>&#xA;
<p>I think that it is better to specify the key as a unique id instead of an object.</p>&#xA;&#xA;<p>Because the key only has to be unique among its siblings, not globally unique so you can add an index in your map function and assign it to the key:</p>&#xA;&#xA;<pre class="lang-jsx prettyprint-override"><code>var someArray = [{name:1},{name:2}];&#xA;    {someArray.map(function(o, index){&#xA;         return &lt;div key={index}&gt; {o.name} &lt;/div&gt;&#xA;    })&#xA;}&#xA;</code></pre>&#xA;
<p>The <code>key</code> just needs to be a basic type that can be treated as a hash value to determine uniqueness. So, a string or a number for example. There isn't a built-in JavaScript function on objects like some programming languages have that can return a unique hash value for an object instance. </p>&#xA;&#xA;<p>You'll either need to use an existing unique value, or create something artificially that will remain part of the object's lifetime. </p>&#xA;&#xA;<p><a href="http://jsfiddle.net/wiredprairie/vkfr6wc5/1/" rel="nofollow">http://jsfiddle.net/wiredprairie/vkfr6wc5/1/</a></p>&#xA;&#xA;<p>In my example, I've created a simple function that adds a unique property called <code>_key</code> to each object if the property doesn't already exist. Then I passed that as the <code>key</code> attribute to the component. </p>&#xA;&#xA;<pre class="lang-jsx prettyprint-override"><code>var Hello = React.createClass({     &#xA;    render: function() {&#xA;        var someArray = [{name:'name1'},&#xA;                         {name:'name2'}];     &#xA;         return &lt;div&gt; {someArray.map(function(o){&#xA;            unique(o);&#xA;            return &lt;div key={o._key}&gt; {o.name} - { o._key} &lt;/div&gt;&#xA;         });&#xA;    }&#xA;});&#xA;&#xA;var __unique = 0;&#xA;function unique(obj, key) {&#xA;    key = key || '_key';&#xA;    if(typeof obj === 'undefined' || obj === null) {&#xA;        return obj;&#xA;    }&#xA;    if(!obj[key]) {&#xA;        obj[key] = ++__unique;&#xA;    }&#xA;    return obj;&#xA;}&#xA;&#xA;React.render(&lt;Hello key="world" /&gt;, document.body);&#xA;</code></pre>&#xA;