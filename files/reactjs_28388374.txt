28388374
Creating an HTML editor component with ReactJS
<p>New to React, please point out if I've headed down the wrong track: I'm trying to build an HTML editor component, which so far looks like this:</p>&#xA;&#xA;<pre><code>var CopyEditor = React.createClass({&#xA;  render: function(){&#xA;    var pageBody = "&lt;p&gt;My HTML string ...";&#xA;    return (&#xA;      &lt;form id="editForm" method="POST"&gt;&#xA;        &lt;textarea id="editor" name="body" value=pageBody /&gt;&#xA;        &lt;input type="submit" id="saveBt" value="save" class="button-primary" /&gt;&#xA;      &lt;/form&gt;&#xA;    );&#xA;  }&#xA;});&#xA;</code></pre>&#xA;&#xA;<p>But I'm getting the following error in the console:</p>&#xA;&#xA;<blockquote>&#xA;  <p>Uncaught Error: Parse Error: Line 6: Unexpected token ILLEGAL&#xA;     at <a href="http://localhost:8000/index.html" rel="nofollow">http://localhost:8000/index.html</a></p>&#xA;  &#xA;  <p>var pageBody = '<br>&#xA;  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;^</p>&#xA;</blockquote>&#xA;&#xA;<p>My HTML string is being generated on the Server, and there's a newline where the carot is pointing in the error message. What SHOULD I be doing?</p>&#xA;
<p>You dont really need <code>dangerouslySetInnerHTML</code> with <code>textarea</code>. You can just use <code>value</code> prop: </p>&#xA;&#xA;<p><a href="http://jsfiddle.net/egkc7dbd/" rel="nofollow">http://jsfiddle.net/egkc7dbd/</a></p>&#xA;&#xA;<pre><code>var CopyEditor = React.createClass({&#xA;  onChange : function(){&#xA;  },&#xA;  render: function(){&#xA;    var pageBody = "&lt;p&gt;My HTML string ...";&#xA;    return (&#xA;      &lt;form id="editForm" method="POST"&gt;&#xA;        &lt;textarea id="editor" name="body" value="&lt;p&gt;My HTML string ..." onChange={this.onChange}/&gt;&#xA;        &lt;input type="submit" id="saveBt" value="save" className="button-primary" /&gt;&#xA;      &lt;/form&gt;&#xA;    );&#xA;  }&#xA;});&#xA;&#xA;React.render(&lt;CopyEditor/&gt;, document.body);&#xA;</code></pre>&#xA;&#xA;<hr>&#xA;&#xA;<p><strong>UPDATE</strong></p>&#xA;&#xA;<p>According to the <a href="http://facebook.github.io/react/docs/forms.html#why-textarea-value" rel="nofollow">documentation</a> you can have line breaks using <code>\n</code>. The first solution is missing <code>{}</code> around <code>value</code> prop.</p>&#xA;&#xA;<p>new jsfiddle: <a href="http://jsfiddle.net/jwb50xu9/" rel="nofollow">http://jsfiddle.net/jwb50xu9/</a></p>&#xA;&#xA;<pre><code>var CopyEditor = React.createClass({&#xA;  onChange : function(){&#xA;  },&#xA;  render: function(){&#xA;    var pageBody = "&lt;p&gt; \n My HTML string ...";&#xA;    return (&#xA;      &lt;form id="editForm" method="POST"&gt;&#xA;        &lt;textarea id="editor" name="body" value={pageBody} onChange={this.onChange}/&gt;&#xA;        &lt;input type="submit" id="saveBt" value="save" className="button-primary" /&gt;&#xA;      &lt;/form&gt;&#xA;    );&#xA;  }&#xA;});&#xA;&#xA;React.render(&lt;CopyEditor/&gt;, document.body);&#xA;</code></pre>&#xA;