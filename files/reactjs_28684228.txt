28684228
Externalizing route paths using react-router
<p>I have a simple React Router Handler:</p>&#xA;&#xA;<pre><code>var routes = (&#xA;    &lt;Route name="main" path="/" handler={require('./main')}&gt;&#xA;        &lt;Route name="page1" path="/page1" handler={require('./page1')}/&gt;&#xA;        &lt;Route name="page2" path="/page2" handler={require('./page2')}/&gt;&#xA;        &lt;Route name="page3" path="/page3" handler={require('./page3')}/&gt;&#xA;&#xA;        &lt;DefaultRoute handler={require('./signin')}/&gt;&#xA;    &lt;/Route&gt;&#xA;);&#xA;</code></pre>&#xA;&#xA;<p>I'd like to externalize the page1, page2, page3 properties in a separate file (say a json file) and iterate that within the routes. Something like this:</p>&#xA;&#xA;<pre><code>var routes = (&#xA;  &lt;Route name="main" path="/" handler={require('./main')}&gt;&#xA;    _.each (routes, function(r) {&#xA;      &lt;Route name={r.name} path={r.path} handler={require(r.module)}/&gt;&#xA;    });&#xA;&#xA;    &lt;DefaultRoute handler={require('./main')}/&gt;&#xA;  &lt;/Route&gt;&#xA;);&#xA;</code></pre>&#xA;&#xA;<p>Obviously I cannot have such a construct within routes, what is the React way of achieving this? </p>&#xA;&#xA;<p>Or is there a way to alter the routes via an api?</p>&#xA;&#xA;<p>For eg:</p>&#xA;&#xA;<pre><code>routes.addRoute({name: r.name, path: r.path, handler: r.module}) ?&#xA;</code></pre>&#xA;
<p>I think you should be able to do it with <code>jsx</code>, but there is an error in your <code>jsx</code> syntax. Try this:</p>&#xA;&#xA;<pre><code>var routes = (&#xA;  &lt;Route name="main" path="/" handler={require('./main')}&gt;&#xA;    {&#xA;     _.each (routes, function(r) {&#xA;         return &lt;Route name={r.name} path={r.path} handler={require(r.module)}/&gt;;&#xA;     });&#xA;    }&#xA;    &lt;DefaultRoute handler={require('./main')}/&gt;&#xA;  &lt;/Route&gt;&#xA;);&#xA;</code></pre>&#xA;
<p>react-router just added top-level API for defining routes without JSX in version 0.12.2:</p>&#xA;&#xA;<pre><code>Router.createRoute()&#xA;Router.createDefaultRoute()&#xA;Router.createNotFoundRoute()&#xA;Router.createRedirect()&#xA;</code></pre>&#xA;&#xA;<p>The doc annotations in the <a href="https://github.com/rackt/react-router/blob/master/modules/Route.js" rel="nofollow">Route.js</a> source and the detailed <a href="https://github.com/rackt/react-router/commit/c5a24a5" rel="nofollow">commit note</a> are probably the best places to look while you wait until official docs and examples appear.</p>&#xA;