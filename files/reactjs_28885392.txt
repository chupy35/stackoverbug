28885392
Nested ReactComponent not showing (most of the time)
<p>a new React user here trying to learn the ropes. I'm working on a little isomorphic test app using node and react. I'm able to get the main parent component loaded by using React.renderToString() and passing it into the handlebars template. </p>&#xA;&#xA;<p>But the child ReactComponent doesn't load. Well, it does.. but only for a millisecond before disappearing. It's almost as if the app initializes with the state i'd like, but clears it right after loading.</p>&#xA;&#xA;<p>Below is the relavant code with brief explanations:</p>&#xA;&#xA;<hr>&#xA;&#xA;<p><strong>StreamRApp.react.js</strong></p>&#xA;&#xA;<p>This is the main react component, which includes another ReactComponent in its render() function.</p>&#xA;&#xA;<pre><code>/** @jsx React.DOM */&#xA;&#xA;var React = require('react'),&#xA;    Track = require('./Track.react');&#xA;&#xA;module.exports = StreamRApp = React.createClass({&#xA;&#xA;  getInitialState: function() {&#xA;    return {&#xA;      initialTracks: [&#xA;        {&#xA;          id: 1,&#xA;          artist: 'bob',&#xA;          title: 'this is a great song'&#xA;        },&#xA;        {&#xA;          id: 2,&#xA;          artist: 'mary',&#xA;          title: 'this song sucks'&#xA;        }&#xA;      ],&#xA;      tracks: []&#xA;    }&#xA;  },&#xA;&#xA;  componentWillMount: function() {&#xA;    this.setState({ tracks: this.state.initialTracks })&#xA;  },&#xA;&#xA;  render: function() {&#xA;&#xA;    return (&#xA;      &lt;div&gt;&#xA;        Hello&#xA;        &lt;div&gt;&#xA;          &lt;Track tracks={this.state.tracks}/&gt;&#xA;        &lt;/div&gt;&#xA;      &lt;/div&gt;&#xA;    );&#xA;&#xA;  }&#xA;&#xA;});&#xA;</code></pre>&#xA;&#xA;<p>Pretty simple. I  initialize this components state with some tracks, and pass it into my  component in the render function:</p>&#xA;&#xA;<hr>&#xA;&#xA;<p><strong>Track.react.js</strong></p>&#xA;&#xA;<pre><code>/** @jsx React.DOM */&#xA;&#xA;var React = require('react');&#xA;&#xA;module.exports = Track = React.createClass({&#xA;&#xA;  render: function() {&#xA;    return (&#xA;      &lt;ul&gt;&#xA;      {&#xA;        this.props.tracks.map(function(track) {&#xA;          return &lt;li className="track" key={track.id}&gt;{track.artist} - {track.title}&lt;/li&gt;&#xA;        })&#xA;      }&#xA;      &lt;/ul&gt;&#xA;    )&#xA;  }&#xA;&#xA;});&#xA;</code></pre>&#xA;&#xA;<hr>&#xA;&#xA;<p><strong>Routes.js</strong></p>&#xA;&#xA;<p>In my code for the page's route, I render the main component to string, and pass it into my handlebars view:</p>&#xA;&#xA;<pre><code>module.exports = {&#xA;&#xA;  index: function(req, res) {&#xA;&#xA;  var markup = React.renderToString(StreamRApp({}));&#xA;&#xA;  res.render('home', { markup: markup });&#xA;&#xA;  }&#xA;&#xA;};&#xA;</code></pre>&#xA;&#xA;<hr>&#xA;&#xA;<p>Anyone have an idea why this is happening? Like I explained in the beginning, it seems like it's correctly rendering the tracks for a brief moment, but something clears it?</p>&#xA;