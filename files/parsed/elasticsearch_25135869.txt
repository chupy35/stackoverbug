25135869 How to rebalance shard elasticsearch

The data stored in my cluster is not balanced. How can I rebalance it?

[Link to snapshot of cluster](https://lh6.googleusercontent.com/-bH-
VCgOCVWk/U-Ck6ykiJgI/AAAAAAAASlI/S54duefOraA/s1600/Screen+Shot+2557-08-05+at+4.32.44+PM.png)

Is the issue that the shards themselves are disproportionate, or that the
nodes are not balancing all the shards optimally? You can manually re-route
shards to different nodes, but I'm not sure there is a way to have your shards
re-balance themselves to be equal in size. If you find that the default
sharding behavior of elasticsearch is still too heavily biased (based on your
document set), you could implement your own routing to distribute the payload
more evenly.

If you want to try re-routing your shards to different nodes, here is a sample
command:

    
    
    curl -XPOST 'localhost:9200/_cluster/reroute' -d '{
        "commands" : [ {
            "move" :
                {
                  "index" : "test", "shard" : 0,
                  "from_node" : "node1", "to_node" : "node2"
                }
            },
            {
              "allocate" : {
                  "index" : "test", "shard" : 1, "node" : "node3"
              }
            }
        ]
    }'
    

