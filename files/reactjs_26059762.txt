26059762
Callback when DOM is loaded in react.js
<p>I want to have a callback invoked on my react.js component when it's DOM element (including all child nodes) is actually loaded on the page and ready. Specifically, I have two components that I want to render the same size, choosing the maximum of whichever component has the larger natural size.</p>&#xA;&#xA;<p>It looks like <code>componentDidMount</code> is not really what I want because it is only called once per component, but I want my callback to be called again anytime the component is finished rendering. I thought I could add an <code>onLoad</code> event to the top level DOM element, but I guess that only applies for certain elements, like <code>&lt;body&gt;</code> and <code>&lt;img&gt;</code>.</p>&#xA;
<p>Looks like a combination of <code>componentDidMount</code> and <code>componentDidUpdate</code> will get the job done. The first is called after the initial rendering, when the DOM is available, the second is called after any subsequent renderings, once the updated DOM is available. In my case, I both have them delegate to a common function to do the same thing.</p>&#xA;
<p>I applied componentDidUpdate to table to have all columns same height. it works same as on $(window).load() in jquery.</p>&#xA;&#xA;<p>eg:</p>&#xA;&#xA;<pre><code>componentDidUpdate: function() {&#xA;        $(".tbl-tr").height($(".tbl-tr ").height());&#xA;    }&#xA;</code></pre>&#xA;
<p>Add onload listener in componentDidMount </p>&#xA;&#xA;<pre><code>class Comp1 extends React.Component {&#xA; constructor(props) {&#xA;    super(props);&#xA;    this.handleLoad = this.handleLoad.bind(this);&#xA; }&#xA;&#xA; componentDidMount() {&#xA;    window.addEventListener('load', this.handleLoad);&#xA; }&#xA;&#xA; handleLoad() {&#xA;  $("myclass") //  $ is available here&#xA; }&#xA;}&#xA;</code></pre>&#xA;
<p>In modern browsers, it should be like </p>&#xA;&#xA;<pre><code>try() {&#xA;     if (!$("#element").size()) {&#xA;       window.requestAnimationFrame(try);&#xA;     } else {&#xA;       // do your stuff&#xA;     }&#xA;};&#xA;&#xA;componentDidMount(){&#xA;     this.try();&#xA;}&#xA;</code></pre>&#xA;