26317844
How can a component do layout of its children?
<p>I've been playing with React for a couple of weeks, so I'm far from an expert. This is the problem: I'm building some components that layout their children. That is, a<code>Layout</code>may be used as in:</p>&#xA;&#xA;<pre><code>var SomeComponent = React.createClass({&#xA;    render: function () {&#xA;        return (&#xA;            &lt;Layout&gt;&#xA;                &lt;...child 1/&gt;&#xA;                &lt;...child 2/&gt;&#xA;                ...&#xA;            &lt;/Layout&gt;&#xA;        );&#xA;    }&#xA;});&#xA;</code></pre>&#xA;&#xA;<p>Well, Layout does not own the children, so it cannot modify their props. It cannot clone the children either, as they could contain refs. Could Layout wrap each child in a (properly positioned) div? Would a child with a ref result in the correct update of SomeComponent refs? Is there a better way of doing this?</p>&#xA;&#xA;<p>I thought a bit more about the general problem of parent-child communication and I'm more confused than before. The documentation states:</p>&#xA;&#xA;<blockquote>&#xA;  <p>"For parent-child communication, simply pass props."</p>&#xA;</blockquote>&#xA;&#xA;<p>In a related part of the documentation we find:</p>&#xA;&#xA;<blockquote>&#xA;  <p>"In React, an owner is the component that sets the props of other components."</p>&#xA;</blockquote>&#xA;&#xA;<p>So, what gives? It seems to me that <b>only the owner, not the parent, can set props</b>.</p>&#xA;&#xA;<p>This has been discussed here in several posts, but I find no satisfactory answer. Some answers suggest cloning the children in the parent, but we run into problems if the original owner set ref props in its "ownees". In the example above, SomeComponent owns the components passed to Layout as children. If I clone the children in Layout (say, to add a callback) the layout becomes the owner of the clones so SomeComponent refs will not get them.</p>&#xA;&#xA;<p>I am utterly confused. </p>&#xA;
<p>I'm not entirely sure of what you're asking, but there are things that a wrapping component like your <code>&lt;Layout /&gt;</code> can do to children.</p>&#xA;&#xA;<p>You mention you'd like to wrap each child component in a div.  Here's an example of that:</p>&#xA;&#xA;<pre><code>var Layout = React.createClass({&#xA;    render: function() {&#xA;        var children = [];&#xA;        if (this.props.children) {&#xA;            for (var i=0; i &lt; this.props.children.length; i++) {&#xA;                var child = this.props.children[i];&#xA;                children.push(&#xA;                    &lt;div className="child-container"&gt;&#xA;                        {child}&#xA;                    &lt;/div&gt;&#xA;                );&#xA;            }&#xA;        }&#xA;&#xA;        return (&#xA;            &lt;div className="layout-container"&gt;&#xA;                {children}&#xA;            &lt;/div&gt;&#xA;        );&#xA;    }&#xA;});&#xA;</code></pre>&#xA;&#xA;<p>Above you can see that you can access the children of <code>Layout</code> in <code>this.props.children</code> which is just an array of child components.  So by using a simple for loop as above, or using <code>this.props.children.map</code> you can wrap each child however you like and render it.</p>&#xA;