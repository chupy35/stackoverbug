b'fix($rootScope): when adding/removing watchers during $digest'
b'**What kind of change does this PR introduce? (Bug fix, feature, docs update, ...)**\r\nBug fix.\r\n\r\n\r\n**What is the current behavior? (You can also link to an open issue here)**\r\nAdding a watcher during a `$digest` (i.e. from within a watcher), results in the next watcher getting skipped. Similarly, removing a watcher during a `$digest` could result in the current watcher being run twice (if the removed watcher had not run yet in the current `$digest`).\r\n\r\n\r\n**What is the new behavior (if this is a feature change)?**\r\nAdding/Removing watchers during a `$digest` works as expected.\r\n\r\n\r\n**Does this PR introduce a breaking change?**\r\nNo.\r\n\r\n\r\n**Please check if the PR fulfills these requirements**\r\n- [x] The commit message follows our guidelines: https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit-message-format\r\n- [x] Tests for the changes have been added (for bug fixes / features)\r\n- [ ] ~~Docs have been added / updated (for bug fixes / features)~~\r\n\r\n**Other information**:\r\nThis commit fixes both cases by keeping track of the current watcher index during a digest and properly updating it when adding/removing watchers.\r\n\r\nThere might be a tiny extra overhead due to looking up `$$digestWatchIndex` on `scope.$$watchers` during the `$digest`. \r\n\r\nFixes #15422'