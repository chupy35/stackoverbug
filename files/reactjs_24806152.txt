24806152
How to implement one way binding in react.js?
<p>I want to implement one way binding in react.js.</p>&#xA;&#xA;<p>I have <strong>chatHistory</strong> variable: </p>&#xA;&#xA;<pre><code>   var chatHistory = [{ Author: "Daniel Lo Nigro", Text: "Hello ReactJS.NET World!" },&#xA;      { Author: "Pete Hunt", Text: "This is one comment" },&#xA;      { Author: "Jordan Walke", Text: "This is *another* comment" }];&#xA;</code></pre>&#xA;&#xA;<p>and I want react to update the <strong>DOM</strong> if <strong>chatHistory</strong> variable will change.</p>&#xA;&#xA;<p>Here is the code I have:</p>&#xA;&#xA;<pre><code>var converter = new Showdown.converter();&#xA;var Comment = React.createClass({&#xA;    displayName: 'Comment',&#xA;    render: function () {&#xA;        var rawMarkup = converter.makeHtml(this.props.children.toString());&#xA;        return (&#xA;          React.DOM.div({ className: "comment" },&#xA;            React.DOM.h2({ className: "commentAuthor" },&#xA;              this.props.author&#xA;            ),&#xA;            React.DOM.span({ dangerouslySetInnerHTML: { __html: rawMarkup } })&#xA;        )&#xA;      );&#xA;    }&#xA;});&#xA;&#xA;var CommentList = React.createClass({&#xA;    displayName: 'CommentList',&#xA;    render: function () {&#xA;        var commentNodes = chatHistory.map(function (comment) {&#xA;            return Comment({ author: comment.Author }, comment.Text);&#xA;        });&#xA;        return (&#xA;          React.DOM.div({ className: "commentList" },&#xA;            commentNodes&#xA;          )&#xA;      );&#xA;    }&#xA;});&#xA;&#xA;var CommentBox = React.createClass({&#xA;    displayName: 'CommentBox',&#xA;    render: function () {&#xA;        return (&#xA;          React.DOM.div({ className: "commentBox" },&#xA;            React.DOM.h1(null, "Comments"),&#xA;            CommentList()&#xA;          )&#xA;      );&#xA;    }&#xA;});&#xA;&#xA;React.renderComponent(CommentBox(),document.getElementById('content'));&#xA;</code></pre>&#xA;&#xA;<p>React change the DOM only after calling <code>React.renderComponent(CommentBox(),document.getElementById('content'));</code> and not automatically via one way binding.</p>&#xA;&#xA;<p>How to force react to refresh DOM when <strong>chatHistory</strong> variable changes?</p>&#xA;
<p>React has two methods which can force a re-render - forceUpdate() and setState();</p>&#xA;&#xA;<p>setState is probably the method you'll want to use.</p>&#xA;&#xA;<p><a href="http://facebook.github.io/react/docs/component-api.html#setstate" rel="nofollow">http://facebook.github.io/react/docs/component-api.html#setstate</a></p>&#xA;&#xA;<p>This part of the React tutorial explains using setState pretty well with dynamically updating the model data via ajax</p>&#xA;&#xA;<p><a href="http://facebook.github.io/react/docs/tutorial.html#fetching-from-the-server" rel="nofollow">http://facebook.github.io/react/docs/tutorial.html#fetching-from-the-server</a></p>&#xA;