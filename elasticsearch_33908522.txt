33908522
Elasticsearch query for what fields have a given type?
<p>I have an elasticsearch (version 1.7) cluster with multiple indices. Each index has multiple doc_types, and each has fields w/ a variety of types. I'd like to get a list of field names for a given field type. This would be a necessarily nested list. For example, I'd like to query for field type "string", and return {index1: {doc_type1.1: [field1.1.1, field1.1.2], ...} -- the leaves of this nested dicts are only those fields w/ the given type. So the hits for this query won't be documents but rather a subset of the cluster's mapping. Is this possible using Elasticsearch? </p>&#xA;&#xA;<p>One solution: I know I can get the mapping as a dict using Python, then work on the mapping dict to recover this nested list. But I think there should be an elasticsearch way of doing this, not a Python solution. In my searches through the documentation I just keep finding the "type filter" which filters by doc_type, not field type. </p>&#xA;
<p>There's currently no way of achieving this. The <code>_mapping</code> endpoint will return all fields of the request mapping type(s).</p>&#xA;&#xA;<p>However, there might be a way, provided your fields have a special naming convention hinting at their type, for instance <code>name_str</code> (string field for "name"), <code>age_int</code> (integer field for "age"), etc. In this case, you could use <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#_response_filtering" rel="nofollow">response filtering</a> on the <code>_mapping</code> call and retrieve only the fields ending with <code>_str</code>:</p>&#xA;&#xA;<pre><code>curl -XGET localhost:9200/yourindex/_mapping/yourtype?filter_path=*_str&#xA;</code></pre>&#xA;