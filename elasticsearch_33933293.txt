33933293
Entries of ElasticSearch hits
<p>I am performing an ElasticSearch query through</p>&#xA;&#xA;<pre><code>curl -XGET 'http://localhost:9200/_search?pretty' -d '{\"_source\":[\"data.js_event\", \"data.timestamp\",\"data.uid\",\"data.element\"],\"query\":{\"match\":{\"event\":\"first_time_user_event\"}}}'&#xA;</code></pre>&#xA;&#xA;<p>I am ONLY interested in the ouput of <code>_source</code> but the retrieval leads to something like</p>&#xA;&#xA;<pre><code>{"took" : 46,&#xA;  "timed_out" : false,&#xA;  "_shards" : {&#xA;    "total" : 71,&#xA;    "successful" : 71,&#xA;    "failed" : 0&#xA;  },&#xA;  "hits" : {&#xA;    "total" : 2062326,&#xA;    "max_score" : 4.8918204,&#xA;    "hits" : [ {&#xA;      "_index" : "logstash-2015.11.22",&#xA;      "_type" : "fluentd",&#xA;      "_id" : "AVEv_blDT1yShMIEDDmv",&#xA;      "_score" : 4.8918204,&#xA;      "_source":{"data":{"js_event":"leave_page","timestamp":"2015-11-22T16:18:47.088Z","uid":"l4Eys1T/rAETpysn7E/Jog==","element":"body"}}&#xA;    }, {&#xA;      "_index" : "logstash-2015.11.21",&#xA;      "_type" : "fluentd",&#xA;      "_id" : "AVEnZa5nT1yShMIEDDW8",&#xA;      "_score" : 4.0081544,&#xA;      "_source":{"data":{"js_event":"hover","timestamp":"2015-11-21T00:15:15.097Z","uid":"E/4Fdl5uETvhQeX/FZIWfQ==","element":"infographic-new-format-selector"}}&#xA;    },&#xA;...&#xA;</code></pre>&#xA;&#xA;<p>Is there a way to get rid of <code>_index</code>, <code>_type</code>, <code>_id</code> and <code>_score</code>? The reason is that the query is performed on a remote server and I would like to limit the size of downloaded data.</p>&#xA;&#xA;<p>Thanks.</p>&#xA;
<p>Yes, you can use <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/common-options.html#_response_filtering" rel="nofollow">response filtering</a> (only available since ES 1.7) by specifying what you want in the response (i.e. <code>filter_path=hits.hits._source</code>) and ES will filter it out for you:</p>&#xA;&#xA;<pre><code>curl -XGET 'http://localhost:9200/_search?filter_path=hits.hits._source&amp;pretty' -d '{\"_source\":[\"data.js_event\", \"data.timestamp\",\"data.uid\",\"data.element\"],\"query\":{\"match\":{\"event\":\"first_time_user_event\"}}}'&#xA;</code></pre>&#xA;