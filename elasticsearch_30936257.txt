30936257
Elasticsearch geo distance filter on a point type geo shape
<p>So I have a location field in my documents (posts). This location field is a geo shape. It could be a point or a polygon. Sometimes I may have to use geo distance filter to get posts tagged closest to some coordinate (only posts with <code>point</code> type geo shape not polygons). However, on attempting to use the geo_distance filter I encountered the following error.</p>&#xA;&#xA;<pre><code>... nested: QueryParsingException[[naya] failed to find geo_point field [location]]; }] ...',&#xA;</code></pre>&#xA;&#xA;<p>Is there a way to use geo_distance filter on geo shapes that are <code>point</code> type?</p>&#xA;
<p>You can use something like this:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "geo_shape": {&#xA;      "location": {&#xA;        "shape": {&#xA;          "type": "circle",&#xA;          "radius": "100km",&#xA;          "coordinates": [ &#xA;            77,&#xA;            28&#xA;          ]&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>You can use the coordinates of the centre from where you want to run the geo-distance query. Use a shape like a circle, with a specified radius.&#xA;It matches any intersecting shapes as well as any geo-points lying within the shape you provided in the query.</p>&#xA;