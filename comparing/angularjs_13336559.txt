13336559
How do I structure AngularJS directive for compound form fields?
<p>I would like to use AngularJS for some administration forms. It's very easy to bind view and model. I also like how you can add validation. But when I tried to prevent redundant code by introducing directives I hit a border. Could you please help me how I should structure code with AngularJS for this problem:</p>&#xA;&#xA;<p>In my forms I have some compound fields. For example you can choose a country in a dropdown. Next to that dropdown you can enter a city in a textfield. When you choose another country the city name should be cleared. That's easy. Now I want autocompletion in the city textfield. When you enter a few characters you get suggestions for cities in the selected country. The autocompletion widget is the minor problem here, let's for simplicity say I would use JQueryUI for that.</p>&#xA;&#xA;<p>I already managed to implement simple directives. My questions are:</p>&#xA;&#xA;<p>1.) I like the functionality for validation in NgModelController. Can I somehow reuse this in my directive? It would be nice if I could add a "required" attribute to my directive. If it is set then all compound fields are required.&#xA;2.) How would I connect the directive with the surrounding model? For example I would like to edit a customer in an administration form and my "address" directive should display and edit the customer address.&#xA;3.) How would I connect the directive with my city lookup service? I need to give country and first typed letters of city to my service. Result is a list of city names that can be displayed in the autocompletion widget.</p>&#xA;
<p>Here is the <a href="http://plnkr.co/edit/KS8NlA?p=preview" rel="nofollow">plunker</a> that show you how to set require attribute. </p>&#xA;&#xA;<p>Main idea is having <code>required="{{isRequired}}"</code> in the template and having <code>isRequired</code> as attribute for your directive. </p>&#xA;&#xA;<pre><code>template: '&lt;input name="city" type="text" ng-model="city" placeholder="City" required="{{isRequired}}"&gt;'&#xA;</code></pre>&#xA;