34350566
Es update giving bad request
<p>I am trying to update the following document:</p>&#xA;&#xA;<pre><code>$ curl http://192.168.0.108:9200/customer/customer/AVGbTCQ2XioLLLZULBAD?pretty&#xA;{&#xA;  "_index" : "customer",&#xA;  "_type" : "customer",&#xA;  "_id" : "AVGbTCQ2XioLLLZULBAD",&#xA;  "_version" : 15,&#xA;  "found" : true,&#xA;  "_source":{"age":0,"n":"Abhishek Gupta","id":"AVGbTCQ2XioLLLZULBAD"}&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>According to <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-update.html#_scripted_updates" rel="nofollow">update API</a> my update request is:</p>&#xA;&#xA;<pre><code>$ curl -XPOST http://192.168.0.108:9200/customer/customer/AVGbTCQ2XioLLLZULBAD/_update -d '{&#xA;&gt;   "script": {&#xA;&gt;     "inline": "ctx._source.n = name",&#xA;&gt;     "params": {&#xA;&gt;       "name": "Elas"&#xA;&gt;     }&#xA;&gt;   }&#xA;&gt; }'&#xA;{"error":"ActionRequestValidationException[Validation Failed: 1: script or doc is missing;]","status":400}&#xA;</code></pre>&#xA;&#xA;<p>Why I am getting bad request?</p>&#xA;&#xA;<p>Es version details: </p>&#xA;&#xA;<pre><code>$ curl http://192.168.0.108:9200/&#xA;{&#xA;  "status" : 200,&#xA;  "name" : "Vance Astro",&#xA;  "cluster_name" : "dexter-elasticsearch",&#xA;  "version" : {&#xA;    "number" : "1.7.1",&#xA;    "build_hash" : "b88f43fc40b0bcd7f173a1f9ee2e97816de80b19",&#xA;    "build_timestamp" : "2015-07-29T09:54:16Z",&#xA;    "build_snapshot" : false,&#xA;    "lucene_version" : "4.10.4"&#xA;  },&#xA;  "tagline" : "You Know, for Search"&#xA;}&#xA;</code></pre>&#xA;
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/docs-update.html#_scripted_updates" rel="nofollow">Scripted updated in ES 1.7.1</a> is slightly different than in ES 2.x, i.e. there is no <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/docs-update.html#_scripted_updates" rel="nofollow"><code>inline</code> parameter</a> like in ES 2.x, instead you write it like this:</p>&#xA;&#xA;<pre><code>curl -XPOST http://192.168.0.108:9200/customer/customer/AVGbTCQ2XioLLLZULBAD/_update -d '{&#xA;    "script": "ctx._source.n = name",&#xA;    "params": {&#xA;      "name": "Elas"&#xA;    }&#xA;}' &#xA;</code></pre>&#xA;