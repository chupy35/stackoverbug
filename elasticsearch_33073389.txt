33073389
elasticsearch: Poss to change number of replicas after system is running?
<p>elasticsearch 1.7.2 on centos&#xA;3 node cluster</p>&#xA;&#xA;<p>This question is how to manage ES config via mods to elasticsearch.yml + restart of elasticsearch service. (Not via api.)</p>&#xA;&#xA;<p>Out of box, the config is:</p>&#xA;&#xA;<pre><code>index.number_of_replicas: 1&#xA;</code></pre>&#xA;&#xA;<p>So on a 3 node cluster, any 2 nodes have the whole package.</p>&#xA;&#xA;<p>If I want any 1 node to be complete, I would set:</p>&#xA;&#xA;<pre><code>index.number_of_replicas: 2&#xA;</code></pre>&#xA;&#xA;<ul>&#xA;<li>a) Correct?</li>&#xA;<li>b) Can I just walk up to an existing setup and make this change?</li>&#xA;<li>c) And, can I just walk up , and adjust it up to 2, and down to 1, whenever?  (up to make each node a possible stand alone, down to save disk space)</li>&#xA;</ul>&#xA;
<p>The number of replica can be changed at any point of time. You can increase or decrease the replica dynamically. There is a good example shown <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-update-settings.html#indices-update-settings" rel="nofollow">here</a>.</p>&#xA;&#xA;<p>Also please note that , you cant change the number of shards after index creation , but number of replica is open to change via index settings API.</p>&#xA;
<p>fwiw, another way to do this (I have now proven out) is to update the yml file (elasticsearch.yml). Change the element:</p>&#xA;&#xA;<pre><code>index.number_of_replicas: 2&#xA;</code></pre>&#xA;&#xA;<p>Up or down, as desired, and restart the elasticsearch service</p>&#xA;&#xA;<pre><code>service elasticsearch restart&#xA;</code></pre>&#xA;&#xA;<p>The cluster will go yellow (yellow status) while the replicas are being created/moved, and then will go green.</p>&#xA;