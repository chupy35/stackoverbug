28966966
Elasticsearch shutdown crash when run as Windows service
<p>Whenever I stop the Elasticsearch service, the following Application Error is logged in the Windows event log indicating an access violation in Java. There are no errors in the Elasticsearch log files. This occurs on multiple machines running Windows 7 Pro SP1 64-bit, and occurs with Elasticseach versions 1.3.4 and 1.4.4. I have also tried multiple versions of the Java SDK (8 updates 25 and 40, 7 updates 55 and 71) all with the same result. There is only one node.</p>&#xA;&#xA;<pre><code>Faulting application name: elasticsearch-service-x64.exe, version: 1.0.15.0, time stamp: 0x51543b9d&#xA;Faulting module name: jvm.dll, version: 25.40.0.25, time stamp: 0x54daf724&#xA;Exception code: 0xc0000005&#xA;Fault offset: 0x0000000000213388&#xA;Faulting process id: 0x2f0c&#xA;Faulting application start time: 0x01d05a7ef40ebb59&#xA;Faulting application path: C:\Program Files (x86)\MyCompany\ELK\Elasticsearch\bin\elasticsearch-service-x64.exe&#xA;Faulting module path: C:\Progra~1\Java\jdk1.8.0_40\jre\bin\server\jvm.dll&#xA;Report Id: 6638e03c-c72f-11e4-ae77-782bcb9439d2&#xA;</code></pre>&#xA;&#xA;<p>I installed Elasticsearch as a Windows service using the service.bat file provided in the bin folder. If I run elasticsearch.bat in a command prompt instead of as a service and stop it via ctrl-c, then the shutdown error does not occur. Since I need to run Elasticsearch as a service, does anyone know how to prevent this crash from occurring on every shutdown?</p>&#xA;