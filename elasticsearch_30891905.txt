30891905
Get elasticsearch result based on two keys
<p>I want to get all docs who's "PayerAccountId" should equal to "123" and "UsageStartDate" should be in range [2015-05-01 TO 2015-05-10]</p>&#xA;&#xA;<p>I am expecting something to run like this,</p>&#xA;&#xA;<pre><code> curl -X GET http://192.168.1.3:9200/_all/_search -d '{"query" : {"match" : { "PayerAccountId:\"156023466485\" AND UsageStartDate:[2015-01-01 TO 2015-01-10]" }}}'&#xA;</code></pre>&#xA;&#xA;<p>Obviously it's not working any suggestions </p>&#xA;&#xA;<p>Here is my one doc </p>&#xA;&#xA;<pre><code>    {&#xA;  "_index": "logstash-2015.04.01",&#xA;  "_type": "sam_billing_hourly",&#xA;  "_id": "ef06aeb5fbab7191a43335740779fc73b667ff0b",&#xA;  "_score": 1.0,&#xA;  "_source": {&#xA;    "@version": "1",&#xA;    "@timestamp": "2015-04-01T02:00:00.000Z",&#xA;    "Operation": "A",&#xA;    "PayerAccountId": "156023466485",&#xA;    "PricingPlanId": 482457,&#xA;    "RateId": 3035133,&#xA;    "RecordType": "LineItem",&#xA;    "UnBlendedCost": 4.0e-07,&#xA;    "UnBlendedRate": 4.0e-07,&#xA;    "UsageEndDate": "2015-04-01T03:00:00Z",&#xA;    "UsageQuantity": 1,&#xA;    "UsageStartDate": "2015-04-01T02:00:00Z",&#xA;    "UsageType": "DNS-Queries",&#xA;    "fingerprint": "ef06aeb5fbab7191a43335740779fc73b667ff0b"&#xA;  }&#xA;</code></pre>&#xA;
<p>You need a <code>query_string</code> not a <code>match</code>:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "query_string": {&#xA;      "query": "PayerAccountId:\"156023466485\" AND UsageStartDate:[2015-01-01 TO 2015-10-01]"&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;