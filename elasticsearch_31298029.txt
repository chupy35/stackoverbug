31298029
How does Elasticsearch manage its shards?
<p>I have three nodes working together. On those nodes I have five indexes, each having 5 primary shards and each primary shard has 2 replicas. It looks like this (i cut to see only two indices out of 5 ):&#xA;![IMG]<a href="http://i59.tinypic.com/2ez1wjt.png" rel="nofollow">http://i59.tinypic.com/2ez1wjt.png</a></p>&#xA;&#xA;<p>As you can see on the picture:&#xA;- the node 1 has primary shards 0 and 3 (and replicas 1,2 and 4)&#xA;- the node 2 has primary shards 2 (and replicas 0, 1, 3 and 4)&#xA;- the node 3 has primary shards 1 and 4 (and replicas 0 ,2 and 3)&#xA;and this is the case <strong>for each index</strong> (the 5 of them).</p>&#xA;&#xA;<p>I understand that if I restart my nodes this "organisation" will change but still the "look" of index will be the same as index2, 3, 4, 5. For example, after restarting, I would have:&#xA;- the node 1 has primary shards 1 and 2 (and replicas 0, 3 and 4)&#xA;- the node 2 has primary shards 3 (and replicas 0, 1, 2 and 4)&#xA;- the node 3 has primary shards 0 and 4 (and replicas 1 ,2 and 3)&#xA;and this would be the case <strong>for each index</strong> (the 5 of them).</p>&#xA;&#xA;<p>Is there a reason why I find always the same pattern for each of my index?</p>&#xA;&#xA;<p>Thanks</p>&#xA;