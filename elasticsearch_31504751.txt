31504751
How to create an Elasticsearch mapping with not_analyzed nested fields?
<p>How do I create a mapping with nested fields, where the nested fields are not_analyzed?</p>&#xA;&#xA;<p>I can't figure out the correct mapping, see my example below.</p>&#xA;&#xA;<p>Data which is indexed into the fields taxonomyHMG.0, taxonomyHMG.1, taxonomyHMG.2, etc. is processed through the standard tokenizer (can be tested by running a facet query). </p>&#xA;&#xA;<p>This happens although all the nested fields are set to "not_analyzed". I am running ES 1.4.5. What am I missing? </p>&#xA;&#xA;<pre><code>        "taxonomyHMG": {&#xA;                "properties": {&#xA;                "level0": {&#xA;                    "type": "string","index": "not_analyzed"&#xA;                },&#xA;                "level1": {&#xA;                    "type": "string","index": "not_analyzed"&#xA;                },&#xA;                "level2": {&#xA;                    "type": "string","index": "not_analyzed"&#xA;                },&#xA;                "level3": {&#xA;                    "type": "string","index": "not_analyzed"&#xA;                },&#xA;                "level4": {&#xA;                    "type": "string","index": "not_analyzed"&#xA;                },&#xA;                "level5": {&#xA;                    "type": "string","index": "not_analyzed"&#xA;                }&#xA;                }&#xA;</code></pre>&#xA;&#xA;<p><strong>Update 7.20.15</strong>&#xA;All resolved. Problems were caused by simple typo :-)</p>&#xA;&#xA;<p>Thx Andrei</p>&#xA;
<p>I think you are not checking this correctly, because your mapping looks good, the document being indexed looks good.</p>&#xA;&#xA;<p>How I would check it is like this:</p>&#xA;&#xA;<pre><code>GET /hmgshopmonitor/items/_search&#xA;{&#xA;  "query": {&#xA;    "nested": {&#xA;      "path": "taxonomyHMG",&#xA;      "query": {&#xA;        "term": {&#xA;          "taxonomyHMG.0": {&#xA;            "value": "Pullover &amp; Strick"&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;