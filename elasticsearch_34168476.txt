34168476
Nested JSON in Elastic Search Not Being Picked Up
<p>I have the following JSON Structure:</p>&#xA;&#xA;<pre><code>{&#xA;    "Dataset": "kh_offers",&#xA;    "Instance": "20140817",&#xA;    "Record": [{&#xA;        "45": "{\"errorCode\":null,\"runStatusId\":null,\"lakeHdfsPath\":\"/user/jmblnvr/20140817_011500_zoot_kohls_offer_init.dat\",\"fieldIndex\":45,\"datasetFieldName\":\"PRESENTABLE_FLAG\",\"datasetFieldSum\":0.0,\"datasetFieldMin\":0.0,\"datasetFieldMax\":0.0,\"datasetFieldMean\":0.0,\"datasetFieldSigma\":0.0,\"datasetFieldNullCount\":0.0,\"datasetFieldObsCount\":0.0,\"datasetFieldKurtosis\":0.0,\"datasetFieldSkewness\":0.0,\"frequencyDistribution\":\"(T,170544)\",\"id\":null,\"fieldType\":\"STRING\"}"&#xA;    }, {&#xA;        "30": "{\"errorCode\":null,\"runStatusId\":null,\"lakeHdfsPath\":\"/user/jmblnvr/20140817_011500_zoot_kohls_offer_init.dat\",\"fieldIndex\":30,\"datasetFieldName\":\"FIRST_PYMT_DATE\",\"datasetFieldSum\":0.0,\"datasetFieldMin\":0.0,\"datasetFieldMax\":0.0,\"datasetFieldMean\":0.0,\"datasetFieldSigma\":0.0,\"datasetFieldNullCount\":0.0,\"datasetFieldObsCount\":0.0,\"datasetFieldKurtosis\":0.0,\"datasetFieldSkewness\":0.0,\"frequencyDistribution\":null,\"id\":null,\"fieldType\":\"STRING\"}"&#xA;    }]&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I am wondering why Elastic Search cannot handle this nested structure? Is it because of the weird \ that makes it valid JSON when my writer is writing it? Is it some other reason? </p>&#xA;&#xA;<p>Elastic Search is picking up the first 3 fields but when I drill down into records it is just thinking its one mass block of string. </p>&#xA;
<p>Yes, Your Record Describe as string not document. remove quote and \ and send it again.</p>&#xA;&#xA;<pre><code>{&#xA;    "Dataset": "kh_offers",&#xA;    "Instance": "20140817",&#xA;    "Record": [{&#xA;&#xA;        "30": {"errorCode":null,"runStatusId":null,"lakeHdfsPath":"/user/jmblnvr/20140817_011500_zoot_kohls_offer_init.dat","fieldIndex":30,"datasetFieldName":"FIRST_PYMT_DATE","datasetFieldSum":0.0,"datasetFieldMin":0.0,"datasetFieldMax":0.0,"datasetFieldMean":0.0,"datasetFieldSigma":0.0,"datasetFieldNullCount":0.0,"datasetFieldObsCount":0.0,"datasetFieldKurtosis":0.0,"datasetFieldSkewness":0.0,"frequencyDistribution":null,"id":null,"fieldType":"STRING"}&#xA;    }]&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>like this</p>&#xA;
<p>You are passing it in as a string, because you have surrounded it with quotation marks and are escaping the 'inner' quotation marks. Just pass in the JSON:</p>&#xA;&#xA;<pre><code>{&#xA;    "Dataset": "kh_offers",&#xA;    "Instance": "20140817",&#xA;    "Record": [{&#xA;        "45": {&#xA;            "errorCode": null,&#xA;            "runStatusId": null,&#xA;            "lakeHdfsPath": "/user/jmblnvr/20140817_011500_zoot_kohls_offer_init.dat",&#xA;            "fieldIndex": 45,&#xA;            "datasetFieldName": "PRESENTABLE_FLAG",&#xA;            "datasetFieldSum": 0.0,&#xA;            "datasetFieldMin": 0.0,&#xA;            "datasetFieldMax": 0.0,&#xA;            "datasetFieldMean": 0.0,&#xA;            "datasetFieldSigma": 0.0,&#xA;            "datasetFieldNullCount": 0.0,&#xA;            "datasetFieldObsCount": 0.0,&#xA;            "datasetFieldKurtosis": 0.0,&#xA;            "datasetFieldSkewness": 0.0,&#xA;            "frequencyDistribution": "(T,170544)",&#xA;            "id": null,&#xA;            "fieldType": "STRING"&#xA;        }&#xA;    }, {&#xA;        "30": {&#xA;            "errorCode": null,&#xA;            "runStatusId": null,&#xA;            "lakeHdfsPath": "/user/jmblnvr/20140817_011500_zoot_kohls_offer_init.dat",&#xA;            "fieldIndex": 30,&#xA;            "datasetFieldName": "FIRST_PYMT_DATE",&#xA;            "datasetFieldSum": 0.0,&#xA;            "datasetFieldMin": 0.0,&#xA;            "datasetFieldMax": 0.0,&#xA;            "datasetFieldMean": 0.0,&#xA;            "datasetFieldSigma": 0.0,&#xA;            "datasetFieldNullCount": 0.0,&#xA;            "datasetFieldObsCount": 0.0,&#xA;            "datasetFieldKurtosis": 0.0,&#xA;            "datasetFieldSkewness": 0.0,&#xA;            "frequencyDistribution": null,&#xA;            "id": null,&#xA;            "fieldType": "STRING"&#xA;        }&#xA;    }]&#xA;}&#xA;</code></pre>&#xA;