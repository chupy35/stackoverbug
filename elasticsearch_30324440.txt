30324440
problems with elasticsearch mapping
<p>As the guide stated, &#xA;<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-geo-point-type.html#_mapping_options" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-geo-point-type.html#_mapping_options</a></p>&#xA;&#xA;<p>I could use an array of lat/lon variables, and map it to geo_point type.</p>&#xA;&#xA;<p>so here is my current mapping:</p>&#xA;&#xA;<pre><code>{&#xA;   "zoek": {&#xA;      "mappings": {&#xA;         "geo": {&#xA;            "properties": {&#xA;               "country": {&#xA;                  "type": "string"&#xA;               },&#xA;               "geonameid": {&#xA;                  "type": "string"&#xA;               },&#xA;               "locatie": {&#xA;                  "type": "double"&#xA;               },&#xA;               "name": {&#xA;                  "type": "string"&#xA;               }&#xA;            }&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>"locatie" refers to an array of two double. [ lat, lon ].</p>&#xA;&#xA;<p>I want to map this to the geo_point variable to perform geo distance queries.</p>&#xA;&#xA;<p>so i tried this:</p>&#xA;&#xA;<pre><code>PUT /zoek/geo/_mapping &#xA;{&#xA;    "geo" : {&#xA;        "properties" : {&#xA;            "locatie" : {"type" : "geo_point" }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>and got this error:</p>&#xA;&#xA;<pre><code>{&#xA;   "error": "MergeMappingException[Merge failed with failures {[mapper [locatie] of different type, current_type [double], merged_type [geo_point]]}]",&#xA;</code></pre>&#xA;&#xA;<p>"status": 400&#xA;    }</p>&#xA;&#xA;<p>Any suggestions?</p>&#xA;&#xA;<p>Greets,</p>&#xA;&#xA;<p>Dagmar.</p>&#xA;
<p>In a given mapping type (i.e. <code>geo</code>), you cannot define two fields with the same name (i.e. <code>locatie</code>) but a different type (i.e. one as <code>double</code> and another as <code>geo_point</code>). Since you already have a field name <code>locatie</code> in your <code>geo</code> mapping type, you cannot add a new one with the same name, but you can definitely add another with a different name, e.g. <code>location_geo</code>.</p>&#xA;&#xA;<p>However, I suggest changing your original mapping and replace your <code>locatie</code> (as <code>double</code>) with <code>locatie</code> (as <code>geo_point</code>). If you do so, you'll need to reindex your existing data, though, so that might not be an option for you.</p>&#xA;