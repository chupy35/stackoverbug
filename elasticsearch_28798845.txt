28798845
How to set memory limit to ElasticSearch in Windows?
<p>Is there any possible to limit ElasticSearch working set memory on a windows server 2008 R2?</p>&#xA;&#xA;<p>I tried everything online, but nothing seem to work.</p>&#xA;&#xA;<p>Tried to set (environment vars):&#xA;ES_MIN_MEM&#xA;ES_MAX_MEM&#xA;ES_HEAP_SIZE</p>&#xA;&#xA;<p>In the java service:&#xA;-Xms15g&#xA;-Xmx15g&#xA;-Xss256k</p>&#xA;&#xA;<p>In the YML file:&#xA;bootstrap.mlockall: true</p>&#xA;&#xA;<p>Any idea what am I doing wrong, or if its possible at all to limit RAM in a Windows service?</p>&#xA;&#xA;<p>Thanks!</p>&#xA;
<p>You can set the memory limit for Elastic Search on Windows Server by following command:</p>&#xA;&#xA;<pre><code>[Elasticsearch Path]\bin&gt;elasticsearch-service.bat manager&#xA;</code></pre>&#xA;&#xA;<p>Note: Run command prompt as administrator</p>&#xA;&#xA;<p>It will open manager as shown here: <a href="https://i.stack.imgur.com/5gIQ3.png" rel="noreferrer">Image: ElasticSearch service properties</a></p>&#xA;&#xA;<p>Now go to the 'Java' tab and change settings based on your requirement.</p>&#xA;&#xA;<p>Note: Make sure, you changed it under 'JavaOptions' textbox and also for separate parameters. For example, to set 1GB initial memory pool and maximum memory pool, you can set '1024'  MB for both. </p>&#xA;&#xA;<p>You can only use this manager after you install service. For more detail, refer  to the 'Using the Manager GUI' section at this link: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.1/windows.html#windows" rel="noreferrer">https://www.elastic.co/guide/en/elasticsearch/reference/5.1/windows.html#windows</a> </p>&#xA;&#xA;<p>After your change, you need to restart the service. And, you can also see the change reflected in the registry as well under 'elasticsearch-service-x64' node: </p>&#xA;&#xA;<pre><code>HKEY_LOCAL_MACHINE\SOFTWARE\WOW6432Node\Apache Software Foundation\Procrun 2.0\elasticsearch-service-x64\Parameters\Java&#xA;</code></pre>&#xA;&#xA;<p>Note: It is mandatory to restart the service after any changes made in&#xA;manager properties window.</p>&#xA;