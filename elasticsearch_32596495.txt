32596495
How exactly do mapped fields in elastic search work?
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-fields.html" rel="nofollow">The documentation</a> is sparse and not entirely helpful. So say I have the following fields for my attribute:</p>&#xA;&#xA;<pre><code>{&#xA;  "my_index": {&#xA;    "mappings": {&#xA;      "my_type": {&#xA;        "my_attribute": {&#xA;          "mapping": {&#xA;            "my_attribute": {&#xA;              "type": "string",&#xA;              "analyzer": "my_analyzer",&#xA;              "fields": {&#xA;                "lowercased": {&#xA;                  "type": "string"&#xA;                },&#xA;                "raw": {&#xA;                  "type": "string",&#xA;                  "index": "not_analyzed"&#xA;                }&#xA;              }&#xA;            }&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p><code>my_analyzer</code> lowercases tokens (in addition to other stuff).</p>&#xA;&#xA;<p>So now I would like to know if the following statements are true:</p>&#xA;&#xA;<ol>&#xA;<li><code>my_analyzer</code> does not get applied to <code>raw</code>, because the <code>not_analyzed</code> index does not have any analyzers, as its name implies.</li>&#xA;<li><code>my_attribute</code> and <code>my_attribute.lowercased</code> are the exact same, so it is redundant to have the field <code>my_attribute.lowercased</code></li>&#xA;</ol>&#xA;
<p>Your first statement is correct, however the second is not. <code>my_attribute</code> and <code>my_attribute.lowercased</code> might not be the same since the former has your <strong>custom</strong> <code>my_analyzer</code> search and index analyzer, while <code>my_attribute.lowercased</code> has the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html" rel="nofollow"><code>standard</code> analyzer</a> (since no analyzer is specified the standard one kicks in).</p>&#xA;&#xA;<p>Besides, your mapping is not correct the way it is written, it should be like this:</p>&#xA;&#xA;<pre><code>{&#xA;  "mappings": {&#xA;    "my_type": {&#xA;      "properties": {&#xA;        "my_attribute": {&#xA;          "type": "string",&#xA;          "analyzer": "my_analyzer",&#xA;          "fields": {&#xA;            "lowercased": {&#xA;              "type": "string"&#xA;            },&#xA;            "raw": {&#xA;              "type": "string",&#xA;              "index": "not_analyzed"&#xA;            }&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;