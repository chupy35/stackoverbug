32962171
Elasticsearch default behavior for mismatch (bad) type
<p>When indexing an ip, I may have an ipv6 type come through. Trying my best at mapping-foo (until they add support for ipv6), I am trying to do something like this:</p>&#xA;&#xA;<pre><code>"ip" : {&#xA;        "type" : "string",&#xA;        "index" : "not_analyzed",&#xA;        "norms" : {&#xA;              "enabled" : false&#xA;        },&#xA;        "fields" : {&#xA;            "ipV4" : { "type":"ip", "store":true}&#xA;        }&#xA;  }&#xA;</code></pre>&#xA;&#xA;<p>But I don't have it all the way. What I want is the following:</p>&#xA;&#xA;<ol>&#xA;<li>Store the ip field as a string always</li>&#xA;<li>If its an ipV4 string, store it that way, but if its not, don't throw an error and store a default value instead.</li>&#xA;</ol>&#xA;&#xA;<p>What do I need to change/add?</p>&#xA;
<p>This helped answer my question:</p>&#xA;&#xA;<p><a href="https://stackoverflow.com/questions/24224335/elasticsearch-fails-silently-if-document-has-mapping-mismatch-for-a-field?rq=1">Elasticsearch fails silently if document has mapping mismatch for a field</a> </p>&#xA;&#xA;<p>it makes my response look more like this:</p>&#xA;&#xA;<pre><code>"ip" : {&#xA;        "type" : "string",&#xA;        "index" : "not_analyzed",&#xA;        "norms" : {&#xA;              "enabled" : false&#xA;        },&#xA;        "fields" : {&#xA;            "ipV4" : { &#xA;                 "type":"ip", &#xA;                 "store":true, &#xA;                 "ignore_malformed":true, &#xA;                 "null_value":"255.255.255.255"&#xA;            }&#xA;        }&#xA;      }&#xA;</code></pre>&#xA;&#xA;<p>Im going to try before marking this as correct</p>&#xA;