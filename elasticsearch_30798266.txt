30798266
Copy field to payload
<p>When using suggesters in Elastic, it is possible to give a payload when indexing a document. Each time the suggester will be used, its payload will be given with the suggestions.</p>&#xA;&#xA;<p>I would like to add the value of the id field of a document to the payload. While it is easy to do so at index-time, I would want to handle it in the mapping, because I don't want to change the way I convert documents to JSON.</p>&#xA;&#xA;<p>I tried the following:</p>&#xA;&#xA;<pre><code>POST test&#xA;{&#xA;    "mappings" : {&#xA;        "type1" : {&#xA;            "properties" : {&#xA;                "id": {"type": "String", "copy_to": ["field1_suggest.payload"]},&#xA;                "field1" : { "type" : "string", "copy_to": ["field1_suggest"]},&#xA;                "field1_suggest":{"type": "completion", "payloads": true}&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;&#xA;POST test/type1/1&#xA;{&#xA;    "id": "payload",&#xA;    "field1": "my value"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>This fails, since "payload" is not a real field of field_suggest:</p>&#xA;&#xA;<blockquote>&#xA;  <p>"error": "MapperParsingException[attempt to copy value to non-existing object [field1_suggest.payload]]", "status": 400</p>&#xA;</blockquote>&#xA;&#xA;<p>How can I automatically include fields in the payload? If it is not possible, I guess I will have to use mainstream queries to get suggestions for completion...</p>&#xA;