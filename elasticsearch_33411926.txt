33411926
Child-parent aggregation
<p>I have a query that use 2 indices:</p>&#xA;&#xA;<ul>&#xA;<li>"index1" - parent</li>&#xA;<li>"index2" - child with proper mapping (<code>_parent: {type: index1}</code>)</li>&#xA;</ul>&#xA;&#xA;<p>I need to get simple terms aggregations at first for field that exists in "index2" and then for field that exists in "index1", but i can not find a way to do this with elasicsearch aggregations.</p>&#xA;&#xA;<p>Children aggregation allows almost opposite thing I want to do: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-children-aggregation.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-children-aggregation.html</a></p>&#xA;&#xA;<p>Is there a way to implement at first child field aggregation and only then parent field aggregation?</p>&#xA;