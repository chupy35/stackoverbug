28668106
Elasticsearch counts of all indices
<p>Trying to get counts of all indices. I am using <code>_all</code> in the URL. The following code works but its not returning data for all indices.</p>&#xA;&#xA;<pre><code>GET /_all/_search?search_type=count&amp;q=_type:invoice&#xA;{&#xA;  "aggs": {&#xA;    "by_index": {&#xA;      "terms": {&#xA;        "field": "_index"&#xA;      }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>}</p>&#xA;&#xA;<p>Most of the indices are skipped in the output. Is there any limit on indices or there is something wrong in my code?</p>&#xA;
<p>Yes, by default, the limit of the returned results is 10: <a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/_executing_aggregations.html" rel="nofollow">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/_executing_aggregations.html</a>.</p>&#xA;&#xA;<blockquote>&#xA;  <p>To start with, this example groups all the accounts by state, and then returns the top 10 (default) states sorted by count descending (also default)</p>&#xA;</blockquote>&#xA;&#xA;<p>The same applies for <code>terms</code> aggregation: <a href="http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#_size" rel="nofollow">http://www.elasticsearch.org/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#_size</a></p>&#xA;&#xA;<p>In your case, you need something like this:</p>&#xA;&#xA;<pre><code>GET /_all/_search?search_type=count&amp;q=_type:invoice&#xA;{&#xA;  "aggs": {&#xA;    "by_index": {&#xA;      "terms": {&#xA;        "field": "_index",&#xA;        "size": 0&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;