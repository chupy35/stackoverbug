28588184
ElasticSearch ignoring field named 'tags' when specified in "fields"
<p>I have a search index, <code>products</code>, containing a field named <code>tags</code>, which is an array. Tags values appears in results when I don't add a <code>fields</code> section to my query, but when I do, it's just ignored outright, and doesn't appear in results, as shown below.</p>&#xA;&#xA;<pre>&#xA;$ curl -XPOST 'http://localhost:9200/products/_search?pretty' -d '{  "query": {"match_all": {} }, "fields": ["tags", "id", "slug"], "size": 2}'&#xA;{&#xA;  "took" : 4,&#xA;  "timed_out" : false,&#xA;  "_shards" : {&#xA;    "total" : 5,&#xA;    "successful" : 5,&#xA;    "failed" : 0&#xA;  },&#xA;  "hits" : {&#xA;    "total" : 321826,&#xA;    "max_score" : 1.0,&#xA;    "hits" : [ {&#xA;      "_index" : "products",&#xA;      "_type" : "products",&#xA;      "_id" : "39969794",&#xA;      "_score" : 1.0,&#xA;      "fields" : {&#xA;        "id" : [ "39969794" ],&#xA;        "slug" : [ "slug-39969794" ]&#xA;      }&#xA;    }, {&#xA;      "_index" : "products",&#xA;      "_type" : "products",&#xA;      "_id" : "21296413",&#xA;      "_score" : 1.0,&#xA;      "fields" : {&#xA;        "id" : [ "21296413" ],&#xA;        "slug" : [ "slug-21296413" ]&#xA;      }&#xA;    } ]&#xA;  }&#xA;}&#xA;</pre>&#xA;&#xA;<p>Is there a reason or known issue for this? Is <code>tags</code> some kind of reserved word for ElasticSearch?</p>&#xA;&#xA;<p>I'm using ES version 1.1.2 (Lucene 4.7).</p>&#xA;
<p><code>tags</code> is not an ES reserved word.  So that's not your problem.</p>&#xA;&#xA;<p>Is your tags an array of atomic types (numbers, strings or booleans)?  Or is it an array of objects?  </p>&#xA;&#xA;<p><code>fields</code> only works with leaf nodes.  So <code>"fields": ["tags"]</code> should work fine with an array of strings but it would fail with an array of <code>tag</code> objects.</p>&#xA;