30857204
Remove bad node from ElasticSearch cluster
<p>We feel there is a bad node is our cluster. First, there were 2 shards which were not able to initialize, digging deeper we found both are trying to connect to a node. We found that node to be very old EC2 machine and have weird name (prefixed with domU-).&#xA;We decided to shut down ES on the node. We see that the node was shutdown gracefully. And there are 9 nodes in cluster (1 less than the original count.)</p>&#xA;&#xA;<p>However we still see several nodes trying to connect to the same bad host.&#xA;Here are the logs. </p>&#xA;&#xA;<pre><code>[2015-06-16 00:24:09,083][WARN ][cluster.service          ] [Left Hand] failed to reconnect to node [Wonder Man][r9EW8A7ySOmrFl5y-Mflfg][domU-12-31-39-05-39-61][inet[/10.241.58.143:9300]]&#xA;org.elasticsearch.transport.ConnectTransportException: [Wonder Man][inet[/10.241.58.143:9300]] connect_timeout[30s]&#xA;        at org.elasticsearch.transport.netty.NettyTransport.connectToChannels(NettyTransport.java:727)&#xA;        at org.elasticsearch.transport.netty.NettyTransport.connectToNode(NettyTransport.java:656)&#xA;        at org.elasticsearch.transport.netty.NettyTransport.connectToNode(NettyTransport.java:624)&#xA;        at org.elasticsearch.transport.TransportService.connectToNode(TransportService.java:146)&#xA;        at org.elasticsearch.cluster.service.InternalClusterService$ReconnectToNodes.run(InternalClusterService.java:518)&#xA;        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&#xA;        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&#xA;</code></pre>&#xA;