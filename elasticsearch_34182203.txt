34182203
Partial update to an index template
<p>In ElasticSearch, is it possible to make a partial update to an index template?</p>&#xA;&#xA;<p>For example, I tried changing only the default analyzer with the following (using Sense):</p>&#xA;&#xA;<pre><code>PUT /_template/testtemplate/_update&#xA;{&#xA;    "settings": {&#xA;        "index":{&#xA;            "analysis": {&#xA;               "analyzer": {&#xA;                  "default": {&#xA;                     "type": "whitespace"&#xA;                  }&#xA;               }&#xA;            }&#xA;        }&#xA;    }    &#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Bu that didn't work, I get an error that says <code>Invalid index name [_template], must not start with '_'</code>.</p>&#xA;&#xA;<p>Do I have to pass the full template again using a PUT or there's some other way to do a partial update?</p>&#xA;
<p>Partial updates only work for documents (and to some extent to mapping types), not for index templates. So, I confirm you'll need to store the full index template again and not only the small bit of it that you want to update.</p>&#xA;&#xA;<p>As you can see in the source code for <a href="https://github.com/elastic/elasticsearch/blob/fae494aa845bbb9e48797ac953ae5ec140c0e6eb/core/src/main/java/org/elasticsearch/rest/action/update/RestUpdateAction.java#L60" rel="nofollow"><code>RestUpdateAction.java</code></a>, the <code>_update</code> REST endpoint expects an <code>{index}</code> name, a <code>{type}</code> name and an <code>{id}</code>. So in your example above, that endpoint thinks that <code>_template</code> is an index name and complains.</p>&#xA;&#xA;<p>Similarly, in the REST endpoint for creating index templates, <a href="https://github.com/elastic/elasticsearch/blob/148265bd164cd5a614cd020fb480d5974f523d81/core/src/main/java/org/elasticsearch/rest/action/admin/indices/template/put/RestPutIndexTemplateAction.java#L35" rel="nofollow"><code>RestPutIndexTemplateAction.java</code></a>, you can see that the <code>_template</code> path doesn't support the <code>_update</code> endpoint at all.</p>&#xA;