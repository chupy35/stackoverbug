32894531
Elasticsearch Mapping _parent
<p>This is my Question</p>&#xA;&#xA;<pre><code>PUT /test/child/1&#xA;{&#xA;  "test": 123&#xA;}&#xA;&#xA;PUT /test/child/_mapping&#xA;{&#xA;  "child": {&#xA;    "_parent": {&#xA;      "type": "parent"&#xA;    }&#xA;  },&#xA;  "parent": {}&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>My child have document,can't add parent.</p>&#xA;&#xA;<p>This is Error Message</p>&#xA;&#xA;<pre><code>"error": "MergeMappingException[Merge failed with failures {[The _parent field's type option can't be changed]}]",&#xA;   "status": 400&#xA;</code></pre>&#xA;&#xA;<p>If no document, it is work.</p>&#xA;&#xA;<p><strong>I am sorry, I didn't say it clearly.&#xA;My question is how add parent in the child had document??</strong></p>&#xA;&#xA;<p>Please help me, Thanks.</p>&#xA;
<p>Try it like this:</p>&#xA;&#xA;<pre><code>DELETE /test_index&#xA;&#xA;PUT /test_index&#xA;{&#xA;   "mappings": {&#xA;      "parent": {},&#xA;      "child": {&#xA;         "_parent": {&#xA;            "type": "parent"&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;&#xA;PUT /test_index/parent/1&#xA;{&#xA;    "test_parent": 123&#xA;}&#xA;&#xA;PUT /test_index/child/1?parent=1&#xA;{&#xA;  "test_child": 123&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Here is some code I used to test it:</p>&#xA;&#xA;<p><a href="http://sense.qbox.io/gist/8efb91d986b43a294672471c49d39d98e78c0ffa" rel="nofollow">http://sense.qbox.io/gist/8efb91d986b43a294672471c49d39d98e78c0ffa</a></p>&#xA;