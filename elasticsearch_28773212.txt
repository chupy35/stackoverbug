28773212
Elasticsearch indexes but does not store documents
<p>I'm having troubles storing documents within a 3-node Elasticsearch cluster that previously was able to store documents. I use the Java API to send bulks of documents to Elasticsearch, which are accepted (no failure in BulkResponse object) AND Elasticsearch has heavy index activities. However, the number of documents are not increased and I assume that none of them are store.</p>&#xA;&#xA;<p><img src="https://i.stack.imgur.com/KO5Nn.png" alt="Document count and index activity"></p>&#xA;&#xA;<p>I've looked into Elasticsearch logs (of all three nodes) but I see no errors or warnings. </p>&#xA;&#xA;<p>Note: I've had to restart two nodes previously but search/query is working perfectly. (the count in the image starts at ~17:00 as I've installed the Marvel plugin at this time)</p>&#xA;&#xA;<p>What can I do to solve or debug the problem?</p>&#xA;
<p>Sorry for this point blank code blindness by me! I forgot to skip the cursor when reading from MongoDB and therefore re-inserted the same 1000 documents into Elasticsearch for thousands of times!</p>&#xA;&#xA;<p>Learning: If this problem occurs check if you select the correct documents in your database and that these documents are not already stored in ES. </p>&#xA;&#xA;<p>Sidenote to Marvel: It would be great is this could be indicated in any way - e.g. by having a chart with "updated documents" (I rechecked and could not find one)</p>&#xA;