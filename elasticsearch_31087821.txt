31087821
Terms filter not matching with multiple values
<p>My document's mapping:</p>&#xA;&#xA;<pre><code> ...&#xA; "user.id": {&#xA;   "type": "string",&#xA;   "index": "not_analyzed"&#xA;  },&#xA;  ...&#xA;</code></pre>&#xA;&#xA;<p>An example document that is indexed:</p>&#xA;&#xA;<pre><code>{ "user": { "id": "123" } }&#xA;</code></pre>&#xA;&#xA;<p>With the following query:</p>&#xA;&#xA;<pre><code>"query" : {&#xA;  "filtered" : {&#xA;    "query" : {&#xA;      "match_all" : { }&#xA;    },&#xA;    "filter" : {&#xA;      "terms" : {&#xA;        "user.id" : [ "123, foo" ]&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I get no hits.</p>&#xA;&#xA;<p>Whilst a term filter with just "123" matches successfully.</p>&#xA;&#xA;<p>From what I've read in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.3/query-dsl-terms-filter.html" rel="nofollow">documentation</a> the terms filter should match "any" of the provided values. So in my case the fact that "foo" doesn't match to the <code>userId</code> then the document should match since "123" does match.</p>&#xA;&#xA;<p>Have I misunderstood the terms filter?</p>&#xA;
<p>You are submitting <code>"123, foo"</code> as a single string. There is no document in your collection with that user id. If you submit "123" and "foo" as separate strings, i.e. <code>"user.id" : [ "123", "foo" ]</code>, your example document should match the query. </p>&#xA;