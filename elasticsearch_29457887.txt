29457887
Elasticsearch Bulk API - Unexpected end-of-input: expected close marker for ARRAY
<p>I'm trying to bulk import using a POST request to <code>localhost:9200/products/product/_bulk</code> with the following JSON:</p>&#xA;&#xA;<pre><code>[&#xA;  { "index": {"_index": "products", "_type": "product", "_id": 1} },&#xA;  { "title": "Product A","description": "Brand A - Product A - 1.5 kg","price": 3.49,"sku": "wi208564","supermarket": "AJ","categories": "Fruit AJ","product_type": "Sinaasappels - mandarijnen","brand": "Brand A\n"},&#xA;  { "index": {"_index": "products", "_type": "product", "_id": 2} },&#xA;  { "title": "Product B","description": "Brand B - Product B - 1 kg","price": 2.49,"sku": "wi308564","supermarket": "AJ","categories": "Fruit AJ","product_type": "Sinaasappels - mandarijnen","brand": "Brand B\n"},&#xA;  { "index": {"_index": "products", "_type": "product", "_id": 3} },&#xA;  { "title": "Product C","description": "Brand C - Product C - 2.5 kg","price": 4.49,"sku": "wi108564","supermarket": "AJ","categories": "Fruit AJ","product_type": "Sinaasappels - mandarijnen","brand": "Brand C\n"}&#xA;]&#xA;</code></pre>&#xA;&#xA;<p>I keep getting the following error:</p>&#xA;&#xA;<pre><code>{&#xA;"error": "JsonParseException[Unexpected end-of-input: expected close marker for ARRAY (from [Source: [B@2c1e2b0e; line: 1, column: 0])\ at [Source: [B@2c1e2b0e; line: 1, column: 3]]",&#xA;"status": 500&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I've tried changing the JSON format but it didn't help. What seems to be going wrong? </p>&#xA;
<p>Your formatting isn't quite right: for bulk request, individual items are separated by newline characters (not commas) and there are no square brackets at the end (ie the payload is a sequence of JSON documents, but the whole payload is not itself a valid json document)</p>&#xA;&#xA;<p>Your data should look like</p>&#xA;&#xA;<pre><code>{ "index": {"_index": "products", "_type": "product", "_id": 1} }&#xA;{ "title": "Product A","description": "Brand A - Product A - 1.5 kg","price": 3.49,"sku": "wi208564","supermarket": "AJ","categories": "Fruit AJ","product_type": "Sinaasappels - mandarijnen","brand": "Brand A\n"}&#xA;{ "index": {"_index": "products", "_type": "product", "_id": 2} }&#xA;{ "title": "Product B","description": "Brand B - Product B - 1 kg","price": 2.49,"sku": "wi308564","supermarket": "AJ","categories": "Fruit AJ","product_type": "Sinaasappels - mandarijnen","brand": "Brand B\n"}&#xA;</code></pre>&#xA;