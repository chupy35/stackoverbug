29648490
Elasticsearch reduce score if id in list
<p>I would like to give higher score for products not purchased yet by the user. We do not sell more than one piece of each product per user so there is no point to promote sold products to a user.</p>&#xA;&#xA;<p>In some cases I filter out product based on id. But I would like to give a negative boost if id is in given list.</p>&#xA;&#xA;<p>Any ideas how to implement this?</p>&#xA;
<p>Well the best way to implement this would be as follows - </p>&#xA;&#xA;<ol>&#xA;<li>Maintain another index where each document has a field purchased which is an array holding docID's of purchased products.</li>&#xA;<li>Use <a href="http://www.elastic.co/guide/en/elasticsearch/reference/1.x/query-dsl-function-score-query.html" rel="nofollow">function score query</a> and use the function score function to depromote the purchased documents.</li>&#xA;<li>Use terms filter in the function score function. In terms filter , its possible to <a href="http://www.elastic.co/guide/en/elasticsearch/reference/1.x/query-dsl-terms-filter.html#_terms_lookup_mechanism" rel="nofollow">look up</a> to a different document/field for the terms filter parameters. Utlize that to point to the purchased information</li>&#xA;<li>Provide boost as a negative value</li>&#xA;</ol>&#xA;