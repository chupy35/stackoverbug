30510899
How to specify certain fields only in the query property
<p>I am using a service which wraps requests to Elastic Search. This service only allows me to send the <code>query</code> property to Elastic Search. I want to tell Elastic Search to look only for matches in a certain field in a document.</p>&#xA;&#xA;<p>For example, if this is my document:</p>&#xA;&#xA;<pre><code>{&#xA;  name: 'foo',&#xA;  value: 'true'&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Then I want to tell Elastic Search to look only for documents where <code>name</code> equals <code>foo</code>.</p>&#xA;&#xA;<p>The Elastic Search <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html#_literal_fields_literal_and_per_field_boosting" rel="nofollow">documentation</a> says to do this by using the <code>fields</code> property like so:</p>&#xA;&#xA;<pre><code>{&#xA;  "multi_match" : {&#xA;    "query" : "this is a test",&#xA;    "fields" : [ "subject^3", "message" ] &#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>But I can ONLY access the <code>query</code> property, so I can't specify <code>fields</code>. Lower down on the page, under <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html#type-best-fields" rel="nofollow">best fields</a> it says that this is equivalent to doing something like <code>+first_name:will +first_name:smith</code>.  But when I put this, it's looking for text that actually matches <code>+first_name:will +first_name:smith</code> in the value, rather than looking for a <code>first_name</code> field that has a value <code>will</code>.</p>&#xA;&#xA;<p>Is it possible to specify what field to search in with Elastic Search using only the <code>query</code> property?</p>&#xA;
<p>This sounds like a perfect match for <code>query_string</code>(<a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.x/query-dsl-query-string-query.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/reference/1.x/query-dsl-query-string-query.html</a>). You can do something like this with it:</p>&#xA;&#xA;<pre><code>"query_string" : {&#xA;    "query" : "subject:whatever OR message:whatever"&#xA;  }&#xA;</code></pre>&#xA;&#xA;<p>So, if you can change <code>multi_match</code> to <code>query_string</code> this would be what you are looking for.</p>&#xA;
<p>Lucene supports fielded data. When performing a search you can either specify a field, or use the default field. The field names and default field is implementation specific.</p>&#xA;&#xA;<p>You can search any field by typing the field name followed by a colon ":" and then the term you are looking for.</p>&#xA;&#xA;<pre><code>{&#xA;    "query": {&#xA;        "query_string": {&#xA;            "query": "Name:\"foo bar cook\"",&#xA;            "default_operator" : "or"&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>use <code>default_operator</code> and to perform AND operation, or to perform OR kind of operation among the values</p>&#xA;