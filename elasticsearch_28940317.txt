28940317
Elasticsearch - Accessing nested variables
<p>I would like to get coordinates from my data.</p>&#xA;&#xA;<pre><code>"userLoc" : {&#xA;    "locNm" : "Alexandra Road",&#xA;    "coordinates" : [ &#xA;        103.8174926, &#xA;        1.29143&#xA;    ],&#xA;</code></pre>&#xA;&#xA;<p>I tried the following to get the second value of coordinates but it didn't work out.</p>&#xA;&#xA;<pre><code>"script": "return _score*doc['userLoc'].coordinates[1];"&#xA;</code></pre>&#xA;&#xA;<p>Got following error.</p>&#xA;&#xA;<pre><code>{&#xA;   "error": "SearchPhaseExecutionException[Failed to execute phase [query], all shards failed; shardFailures {[H94j5eYQRXantctqOKMduw][merchantindex][0]: QueryPhaseExecutionException[[merchantindex][0]: query[function score (_all:test,function=script[return _score*doc['userLoc'].coordinates[1];], params [null])],from[0],size[10]: Query Failed [Failed to execute main query]]; nested: GroovyScriptExecutionException[ElasticsearchIllegalArgumentException[No field found for [userLoc] in mapping with types []]]; }{[H94j5eYQRXantctqOKMduw][merchantindex][1]: QueryPhaseExecutionException[[merchantindex][1]: query[function score (_all:test,function=script[return _score*doc['userLoc'].coordinates[1];], params [null])],from[0],size[10]: Query Failed [Failed to execute main query]]; nested: GroovyScriptExecutionException[ElasticsearchIllegalArgumentException[No field found for [userLoc] in mapping with types []]]; }{[H94j5eYQRXantctqOKMduw][merchantindex][2]: QueryPhaseExecutionException[[merchantindex][2]: query[function score (_all:test,function=script[return _score*doc['userLoc'].coordinates[1];], params [null])],from[0],size[10]: Query Failed [Failed to execute main query]]; nested: GroovyScriptExecutionException[ElasticsearchIllegalArgumentException[No field found for [userLoc] in mapping with types []]]; }{[H94j5eYQRXantctqOKMduw][merchantindex][3]: QueryPhaseExecutionException[[merchantindex][3]: query[function score (_all:test,function=script[return _score*doc['userLoc'].coordinates[1];], params [null])],from[0],size[10]: Query Failed [Failed to execute main query]]; nested: GroovyScriptExecutionException[ElasticsearchIllegalArgumentException[No field found for [userLoc] in mapping with types []]]; }{[H94j5eYQRXantctqOKMduw][merchantindex][4]: QueryPhaseExecutionException[[merchantindex][4]: query[function score (_all:test,function=script[return _score*doc['userLoc'].coordinates[1];], params [null])],from[0],size[10]: Query Failed [Failed to execute main query]]; nested: GroovyScriptExecutionException[ElasticsearchIllegalArgumentException[No field found for [userLoc] in mapping with types []]]; }]",&#xA;   "status": 500&#xA;}&#xA;</code></pre>&#xA;
<p>_source.userLoc.coordinates[0] according to <a href="http://grokbase.com/t/gg/elasticsearch/1417z65gy4/using-a-nested-object-property-within-custom-filters-score-script" rel="nofollow">http://grokbase.com/t/gg/elasticsearch/1417z65gy4/using-a-nested-object-property-within-custom-filters-score-script</a></p>&#xA;