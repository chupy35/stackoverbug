33359202
Fastest way to join two indexes into a third
<p>I have the following two es indexes:</p>&#xA;&#xA;<pre><code>index1 = {&#xA;    "id": 1,&#xA;    "name": "fred",&#xA;    "shared_id": 77&#xA;}    &#xA;&#xA;index2 = {&#xA;    "id": 89,&#xA;    "FacebookID": 9288347,&#xA;    "shared_id": 77&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I want to merge these two indexes into a third index:</p>&#xA;&#xA;<pre><code>index3 = {&#xA;    "index1.id": 1,&#xA;    "index2.id": 89,&#xA;    "shared_id": 77,&#xA;    "FacebookID": 9288347,&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>In other words, all objects with a sharedID will be merged into a third object with all existing attributes. What would be the performant way to do this? My current idea is to download all the data in the two objects and use either Java or C++ to do the merge/upload. Is there a better way to do this, perhaps something native to ES itself? I would estimate several million objects per index.</p>&#xA;&#xA;<p>I've found this, which suggests the best solution is to search both indexes simultaneously or manually join them: <a href="http://elasticsearch-users.115913.n3.nabble.com/Merging-Two-Indexes-td4021708.html" rel="nofollow">http://elasticsearch-users.115913.n3.nabble.com/Merging-Two-Indexes-td4021708.html</a>.</p>&#xA;