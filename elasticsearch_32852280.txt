32852280
How are ElasticSearch Autogenerated IDs allocated?
<p>The <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.5/docs-index_.html#_automatic_id_generation" rel="nofollow">ElasticSearch docs</a> say "The index operation can be executed without specifying the id. In such a case, an id will be generated automatically." Is there any information about how these are generated, and specifically how they're kept unique? Are they monotone increasing in a string comparison over time? Are they allocated as per-node ranges?</p>&#xA;
<p>As always, the best source of information is the source code itself. </p>&#xA;&#xA;<p>In <a href="https://github.com/elastic/elasticsearch/blob/14b5308983c99c0b716e77ba9363841d63d8d0c0/src/main/java/org/elasticsearch/action/index/IndexRequest.java#L617" rel="nofollow"><code>IndexRequest.java</code></a>, we can see that if no ID is provided, the one that is automatically generated is a Base64 encoded time-based UUID (<a href="https://github.com/elastic/elasticsearch/blob/14b5308983c99c0b716e77ba9363841d63d8d0c0/src/main/java/org/elasticsearch/common/Strings.java#L1068" rel="nofollow">source</a>) whose implementation can be found <a href="https://github.com/elastic/elasticsearch/blob/14b5308983c99c0b716e77ba9363841d63d8d0c0/src/main/java/org/elasticsearch/common/TimeBasedUUIDGenerator.java" rel="nofollow">here</a>. They are essentially <a href="http://www.bmc.com/truesightpulse/blog/2012/01/flake-a-decentralized-k-ordered-unique-id-generator-in-erlang" rel="nofollow">Flake IDs</a>.</p>&#xA;