33121095
Enabling Elasticsearch _size field
<p>I have an index with over 9,000,000 docs.</p>&#xA;&#xA;<p>I have defined my own mapping and everything went fine.</p>&#xA;&#xA;<p>The only problem is that I forgot to enable the _size field and now I need it to localize document with a large size.</p>&#xA;&#xA;<p>From the documentation I found that it's just fine to use the PUT mapping API with these parameters:</p>&#xA;&#xA;<pre><code>{&#xA;    "my_index": {&#xA;        "_size": {&#xA;            "enabled": true&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<ul>&#xA;<li>Does the new mapping will be merged with the one already set?</li>&#xA;<li>Does the size field will be enabled for already stored documents?</li>&#xA;</ul>&#xA;&#xA;<p>I am a little worried making changes to mapping beacuse the last time that I have updated the settings with a new analyzer the service was having problem due to shard relocation and everything got stuck.</p>&#xA;
<p>The mappings will be merged OK and the <code>_size</code> field will be enabled for all your documents of type <code>my_index</code>.</p>&#xA;&#xA;<p>Note that if you want to store the <code>_size</code> (in addition to just index its value), you also need to add <code>"store": "yes"</code> in your <code>_size</code> mapping.</p>&#xA;&#xA;<p>Unfortunately, you'll need to re-index your data in order for the <code>_size</code> field to be properly indexed.</p>&#xA;