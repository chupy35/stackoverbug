32293681
How can I exclude a pattern from tagcloud facet in elasticsearch
<p>We are using Elasticsearch for generating the tag cloud in our site. The query used to create the tag cloud is as following.</p>&#xA;&#xA;<pre><code>{&#xA;"size": 0,&#xA;"facets": {&#xA;    "tagcloud": {&#xA;        "terms": {&#xA;            "field": "body.body",&#xA;            "size": "20",&#xA;            "exclude": [&#xA;                "http",&#xA;                "t.co"&#xA;            ]&#xA;        }&#xA;    }&#xA;},&#xA;"query": {&#xA;    "bool": {&#xA;        "must": [&#xA;            {&#xA;                "range": {&#xA;                    "body.postedTime": {&#xA;                        "gte": "2015-08-26T00:00:00Z",&#xA;                        "lte": "2015-08-26T23:59:59Z"&#xA;                    }&#xA;                }&#xA;            }&#xA;        ]&#xA;    }&#xA;}&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>The exclude section works fine. What I need is to exclude some patterns like excluding all links.</p>&#xA;&#xA;<p>Is that possible in elasticsearch ? if yest, how can I achieve it.</p>&#xA;
<p>Terms aggregation has exclude pattern option too. &#xA;Check it <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#_filtering_values" rel="nofollow">here</a>.&#xA;So , just use "http.*" as exclude pattern.</p>&#xA;&#xA;<p>For this to work , you need to enable <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-uaxurlemail-tokenizer.html" rel="nofollow">UAX Email tokeznier</a> , so that the links wont get tokenized whle analysis.</p>&#xA;