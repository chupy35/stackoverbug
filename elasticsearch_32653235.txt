32653235
elasticsearch sort by document id
<p>I have a simple index in elasticsearch and all my ids are manually added, i.e. I do not add documents with automatic string ids.</p>&#xA;&#xA;<p>Now the requirement is to get list of all documents page by page and sorted by the document id (i.e. _id)</p>&#xA;&#xA;<p>When I tried this with _id, it did not work. Then I looked for it on forums and found out this much that I have to use _uid for that. This actually works, although I have no clue how. But another problem is that the sorting is done as if the the _id is string. And it actually is a string. But I want the results as if the _id was a number.</p>&#xA;&#xA;<p>So there are two issues here:</p>&#xA;&#xA;<ol>&#xA;<li><p>Why sorting does not work with _id and it does work with _uid</p></li>&#xA;<li><p>Is there a way to get document ids sorted as numbers and not integers</p></li>&#xA;</ol>&#xA;&#xA;<p>For e.g. if my doc ids are <code>1</code>, <code>2</code>, <code>3</code>, ..... , <code>55</code></p>&#xA;&#xA;<p>I am getting results in this order:</p>&#xA;&#xA;<p><code>1</code>, <code>10</code>, <code>11</code>, <code>12</code>, ... , <code>19</code>, <code>2</code>, <code>20</code>, ... so on</p>&#xA;&#xA;<p>While I would like to get the results in this order:</p>&#xA;&#xA;<p><code>1</code>, <code>2</code>, <code>3</code>, ... so on</p>&#xA;&#xA;<p>Any help is highly appreciated!</p>&#xA;
<p>Have the <code>_id</code> indexed:</p>&#xA;&#xA;<pre><code>{&#xA;  "mappings": {&#xA;    "some_type": {&#xA;      "_id": {&#xA;        "index": "not_analyzed"&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>And use a script:</p>&#xA;&#xA;<pre><code>{&#xA;  "sort": {&#xA;    "_script": {&#xA;      "type": "number",&#xA;      "script": "doc['_id'].value?.isInteger()?doc['_id'].value.toFloat():null",&#xA;      "order": "asc"&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Even though I strongly recommend, if possible, changing the id to <code>integer</code> rather having it as <code>string</code> and contain numbers, instead.</p>&#xA;&#xA;<p>And I kind of doubt that it worked with <code>_uid</code> because <code>_uid</code> is a combination between type and id.</p>&#xA;