29284623
ElasticSearch _suggest not returning results
<p>I have an index that I'd like to get suggestions on:</p>&#xA;&#xA;<pre><code>{&#xA;    "book": {&#xA;        "_index": {&#xA;            "enabled": true&#xA;        },&#xA;        "_id": {&#xA;            "index": "not_analyzed",&#xA;            "store": "yes"&#xA;        },&#xA;        "properties": {&#xA;            "author": {&#xA;                "type": "completion"&#xA;            },&#xA;            "characters": {&#xA;                "type": "string"&#xA;            },&#xA;            "copies": {&#xA;                "type": "long",&#xA;                "ignore_malformed": false&#xA;            },&#xA;            "otitle": {&#xA;                "type": "string"&#xA;            },&#xA;            "tags": {&#xA;                "type": "string"&#xA;            },&#xA;            "title": {&#xA;                "type": "string"&#xA;            },&#xA;            "year": {&#xA;                "type": "long",&#xA;                "ignore_malformed": false,&#xA;                "index": "analyzed"&#xA;            },&#xA;            "available": {&#xA;                "type": "boolean"&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I've loaded some data into it using _bulk endpoint.</p>&#xA;&#xA;<p>When I try to query against the suggest endpoint:</p>&#xA;&#xA;<pre><code>POST library/book/_suggest&#xA;{&#xA;  "my_suggestion_1":{&#xA;    "text": "He",&#xA;    "term":{&#xA;      "analyzer":"standard",&#xA;     "field":"author" &#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I get back this:</p>&#xA;&#xA;<pre><code>{&#xA;   "_index": "library",&#xA;   "_type": "book",&#xA;   "_id": "_suggest",&#xA;   "_version": 8,&#xA;   "created": false&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>What am I missing here? </p>&#xA;
<p>I think you just need to use <code>completion</code> instead of <code>term</code> in your request body when you ask for suggestions:</p>&#xA;&#xA;<pre><code>POST library/book/_suggest&#xA;{&#xA;  "my_suggestion_1":{&#xA;    "text": "He",&#xA;    "completion":{&#xA;      "analyzer":"standard",&#xA;     "field":"author" &#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;