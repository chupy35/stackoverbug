32779023
Elasticsearch reverse match_phrase
<p>Consider following document:</p>&#xA;&#xA;<pre><code>{&#xA;  "Title": "Western Europe"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I'd like to run such search queries against <em>Title</em> field</p>&#xA;&#xA;<ul>&#xA;<li><em>Apple in Western Europe</em></li>&#xA;<li><em>Apple in Eastern Europe</em></li>&#xA;</ul>&#xA;&#xA;<p>I could run a simple match query:</p>&#xA;&#xA;<pre><code>POST /_search&#xA;{&#xA;  "query": {&#xA;    "match": {&#xA;      "Title": "Apple in Western Europe"&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>It obiviously would match and bring it back irregardless of which search phrase I'd use. But I'd like to make a query that would bring my document back only if <em>Title</em> field <em>phrase matches</em> my search query. Is that possible? Are there any additional parameters? It seems like a reverse case for <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/phrase-matching.html" rel="nofollow">phrase matching</a>.</p>&#xA;&#xA;<p>If not, should I consider reindexing my data with shingles?</p>&#xA;&#xA;<p>So in this scenario running this (with additional parameters) wouldn't score and bring back my document.</p>&#xA;&#xA;<pre><code>POST /_search&#xA;{&#xA;  "query": {&#xA;    "match": {&#xA;      "Title": "Apple in Eastern Europe"&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p><strong>tl;dr</strong></p>&#xA;&#xA;<p>How do I write a query that would bring back document if all of its field (the one I'm searching on) tokens are present in my search query?&#xA;For instance my field in document contains these two tokens only:</p>&#xA;&#xA;<ul>&#xA;<li>abc</li>&#xA;<li>xyz</li>&#xA;</ul>&#xA;&#xA;<p>And if my search phrase is, for instance <em>Lorem ipsum dolor sit amet, consectetur adipiscing elit <strong>abc xyz</strong></em>, document is <strong>brought back</strong>.</p>&#xA;&#xA;<p>If it's <em>Lorem ipsum dolor sit amet, consectetur adipiscing elit <strong>xyz</strong></em>, it's <strong>not brought back</strong>.</p>&#xA;