33942348
ElasticSearch analyzer that prioritizes order of term appearance in a search
<p>I have an object in Elastic which represents a product with two properties: <em>title</em> and <em>category</em>. Within title I have a field concerning <em>exact-word</em> and another with <em>synonyms</em>. At search time I am boosting the search of the documents by exact word, but if I have for example a product named "Notebook dell" and "bag Notebook", it's bringing bag notebook first.</p>&#xA;&#xA;<p>I want to prioritize the order of appearance of the search term after passing a custom analyzer, so for example:</p>&#xA;&#xA;<ul>&#xA;<li>samsung Notebook </li>&#xA;<li>Notebook Dell</li>&#xA;<li>notebook Macbook Pro</li>&#xA;<li>bag notebook</li>&#xA;</ul>&#xA;&#xA;<p>should come as </p>&#xA;&#xA;<ul>&#xA;<li>Notebook Dell</li>&#xA;<li>notebook Macbook Pro</li>&#xA;<li>bag notebook</li>&#xA;</ul>&#xA;&#xA;<p>Can this be possible?  </p>&#xA;
<p>I think you are looking for <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/query-dsl-span-first-query.html" rel="nofollow">Span First Query</a></p>&#xA;&#xA;<p>You can add this in you clause to boost documents that start with the search term like this</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "bool": {&#xA;      "should": [&#xA;        {&#xA;          "match": {&#xA;            "title": "notebook"&#xA;          }&#xA;        },&#xA;        {&#xA;          "span_first": {&#xA;            "match": {&#xA;              "span_term": {&#xA;                "title": "notebook"&#xA;              }&#xA;            },&#xA;            "end": 2,&#xA;            "boost" : 5&#xA;          }&#xA;        }&#xA;      ]&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Also <code>span queries</code> are not <code>analyzed</code> so you have to take care of that because <em>notebook</em> and <em>Notebook</em> will give different results.</p>&#xA;