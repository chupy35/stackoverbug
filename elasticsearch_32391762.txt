32391762
ElasticSearch Return a matched element of an array when searching
<p>I indexed documents like </p>&#xA;&#xA;<pre><code>{&#xA;  "words":[&#xA;    {&#xA;      "word":"Rakennustietosäätiö",&#xA;      "pos":[72, 3347, 97, 3642]&#xA;    },&#xA;    {&#xA;      "word":"homevauriot",&#xA;      "pos":[792, 972, 1041, 1011]&#xA;    },&#xA;    {&#xA;      "word":"mikrobivauriot",&#xA;      "pos":[1301, 972, 1572, 1005]&#xA;    },&#xA;    {&#xA;      "word":"kulkeutumisesta",&#xA;      "pos":[616, 1643, 970, 168]&#xA;    },&#xA;    {&#xA;      "word":"terveyshaitoista",&#xA;      "pos":[630, 1813, 981, 1861]&#xA;    }&#xA;  ],&#xA;  "image":"K00277_1.jpg",&#xA;  "pdf_file":"K00277.pdf",&#xA;  "page":1&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Then I search by word "Rakennustietosäätiö". I would like it return the matched document but containing only the matched element. In this case, it is</p>&#xA;&#xA;<pre><code>{&#xA;  "word":"Rakennustietosäätiö",&#xA;  "pos":[72, 3347, 97, 3642]&#xA;}&#xA;</code></pre>&#xA;
<p>This is not possible using this structure.&#xA;To achieve this , a better approach would be <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/parent-child.html" rel="nofollow">parent child</a></p>&#xA;&#xA;<p>Create one parent document for each page , one child document for each word.&#xA;Now you can search word document based on condition in parent document or vice versa.&#xA;In this case item given back would be parent document or child document based on the query used.</p>&#xA;