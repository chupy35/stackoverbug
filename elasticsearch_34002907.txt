34002907
ElasticSearch. Total number of unique terms in an index
<p>Is there a way to access the total number of terms in an index through ES API?&#xA;I need to estimate the prior probability of a term occurring in the index:</p>&#xA;&#xA;<pre><code>total_term_frequency/total_terms_in_index&#xA;</code></pre>&#xA;&#xA;<p>I can access <code>ttf</code> but no total number of terms stored in the index. </p>&#xA;
<p>I think the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-cardinality-aggregation.html" rel="nofollow">cardinality aggregation</a> is what you're looking for.</p>&#xA;&#xA;<p>For example:</p>&#xA;&#xA;<pre><code>POST /test_index/_search&#xA;{&#xA;   "size": 0,&#xA;   "aggs": {&#xA;      "term_count": {&#xA;         "cardinality": {&#xA;            "field": "doc_text"&#xA;         }&#xA;    }&#xA;}&#xA;...&#xA;{&#xA;   "took": 7,&#xA;   "timed_out": false,&#xA;   "_shards": {&#xA;      "total": 5,&#xA;      "successful": 5,&#xA;      "failed": 0&#xA;   },&#xA;   "hits": {&#xA;      "total": 4,&#xA;      "max_score": 0,&#xA;      "hits": []&#xA;   },&#xA;   "aggregations": {&#xA;      "term_count": {&#xA;         "value": 161&#xA;      }&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Here is some code I used to play around with it:</p>&#xA;&#xA;<p><a href="http://sense.qbox.io/gist/d5625c80946f332718b0fa166bba27efd264b76e" rel="nofollow">http://sense.qbox.io/gist/d5625c80946f332718b0fa166bba27efd264b76e</a></p>&#xA;