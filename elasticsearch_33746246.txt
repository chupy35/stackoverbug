33746246
Elasticsearch phrase prefix results
<p>I have two ES queries:</p>&#xA;&#xA;<pre><code>{match:{text:{query: "text box", type: "phrase"}}}&#xA;{match:{text:{query: "text bo", type: "phrase_prefix"}}}&#xA;</code></pre>&#xA;&#xA;<p>The problem is that the second query returns fewer documents than the first one, although I would expect the second query to return all records from the first one plus something extra. What am I missing?</p>&#xA;&#xA;<p>Thanks</p>&#xA;
<p>This could be due to <code>max_expansions</code> being set to its default value 10</p>&#xA;&#xA;<p>Try this</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "match_phrase_prefix": {&#xA;      "text": {&#xA;        "query": "text bo",&#xA;        "max_expansions": 100&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>This <a href="http://elasticsearch-users.115913.n3.nabble.com/How-exactly-works-quot-max-expansions-quot-in-match-phrase-prefix-query-td4030146.html" rel="nofollow">thread</a> will help you understand how terms are expanded. make <code>max_expansions</code> 1000 and see the results.</p>&#xA;&#xA;<p>Basically you have lot of words starting with bo like <em>bond, boss</em> and since <em>'x'</em> comes last alphabetically, you are not getting what you expect. </p>&#xA;&#xA;<p>I hope this helps!</p>&#xA;