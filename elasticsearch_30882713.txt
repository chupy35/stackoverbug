30882713
How to get duplicate field values in elastic search by field name without knowing its value
<p>I have a field "EmployeeName" in an elastic search index - and I would like to execute a query that will return me all the cases where there are duplicate values of "EmployeeName". Can this be done?</p>&#xA;&#xA;<p>I found more_like_this but this requires field value for "like_text".&#xA;But my requirement is to get  list of employees who are having duplicate names without knowing its value.</p>&#xA;&#xA;<pre><code>{&#xA;    "more_like_this" : {&#xA;        "fields" : ["EmployeeName"],&#xA;        "like_text" : "Mukesh",&#xA;        "min_term_freq" : 1,&#xA;        "max_query_terms" : 12&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Thanks in Advance</p>&#xA;&#xA;<p>Regards&#xA;Mukesh</p>&#xA;
<p>You can use <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html"><code>Terms Aggregation</code></a> for this.</p>&#xA;&#xA;<pre><code>POST &lt;index&gt;/&lt;type&gt;/_search?search_type=count&#xA;{&#xA;    "aggs": {&#xA;        "duplicateNames": {&#xA;            "terms": {&#xA;                "field": "EmployeeName",&#xA;                "size": 0,&#xA;                "min_doc_count": 2&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>This will return all values of the field <code>EmployeeName</code> which occur in at least 2 documents.</p>&#xA;