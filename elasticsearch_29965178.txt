29965178
Get aggregation for _version of documents elasticsearch
<p>I'm trying to get some statistics about how many documents of one index were updated using<code>_version</code> field</p>&#xA;&#xA;<p>Unfortunately I can't get it to work with <code>_search</code> api.</p>&#xA;&#xA;<p>My query:</p>&#xA;&#xA;<pre><code>GET /index/_search?search_type=count&#xA;{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "exists": {&#xA;          "field": "_version"&#xA;        }&#xA;      }&#xA;    }&#xA;  },&#xA;  "aggs": {&#xA;    "_version": {&#xA;      "terms": {&#xA;        "field": "_version",&#xA;        "size": 0&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>and returns:</p>&#xA;&#xA;<pre><code>{&#xA;   "took": 2900,&#xA;   "timed_out": false,&#xA;   "_shards": {&#xA;      "total": 12,&#xA;      "successful": 12,&#xA;      "failed": 0&#xA;   },&#xA;   "hits": {&#xA;      "total": 456754855,&#xA;      "max_score": 0,&#xA;      "hits": []&#xA;   },&#xA;   "aggregations": {&#xA;      "_version": {&#xA;         "buckets": []&#xA;      }&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Is it possible to get that number: <strong>how many documents have _version 1, 2 etc</strong> like for <code>_version:1 doc_count:10000, _version:2  doc_count:200</code></p>&#xA;&#xA;<p>Elasticsearch_version: 1.3.7</p>&#xA;