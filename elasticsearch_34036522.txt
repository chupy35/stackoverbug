34036522
Total count of all the tokens
<p>Is it possible to get the <code>ttf</code> (total term frequency) for all the tokens from a field in all the shards for a given index?</p>&#xA;&#xA;<p>e.g. I have:</p>&#xA;&#xA;<pre><code>PUT /index/type/1&#xA;{&#xA;  "sentence": "delicious cake"&#xA;}&#xA;&#xA;PUT /index/type/2&#xA;{&#xA;  "sentence": "horrible cake"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I want to get:</p>&#xA;&#xA;<pre><code>cake 2&#xA;horrible 1&#xA;delicious 1&#xA;</code></pre>&#xA;&#xA;<p>Also is it possible to do it for multiple fields (let's say I'd have <code>sentence1</code> and <code>sentence2</code> and I'd like to run such a count on the concatenation of them)?</p>&#xA;&#xA;<p>I know <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-termvectors.html" rel="nofollow">termvectors</a> give the ttf and that <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-multi-termvectors.html" rel="nofollow">mtermvectors</a> can do it for multiple documents but then I'd have to go through all the documents and handle the results myself somehow.</p>&#xA;&#xA;<p>Actually only the top K terms would be sufficient for me if I can control K.</p>&#xA;
<p>If your field 'sentence' is analyzed you can get TTF with <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/search-facets-terms-facet.html" rel="nofollow">Terms Facet</a>:</p>&#xA;&#xA;<pre><code>POST /index/type/_search&#xA;{&#xA;  "query": {&#xA;    "match_all": {}&#xA;  },&#xA;  "facets" : {&#xA;      "sentence" : {&#xA;          "terms" : {&#xA;              "field" : "sentence",&#xA;              "size" : 10&#xA;          }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>TTF will be in facet part of response</p>&#xA;&#xA;<p>Also you can pass array of fields ["sentence", "sentence2"] to count TTF across multiple fields</p>&#xA;&#xA;<pre><code>POST /index/type/_search&#xA;{&#xA;    "query" : {&#xA;        "match_all" : {  }&#xA;    },&#xA;    "facets" : {&#xA;        "multiple_sentence" : {&#xA;            "terms" : {&#xA;                "fields" : ["sentence", "sentence2"],&#xA;                "size" : 10&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;