34604033
How can i filter by field when have the same fields
<p>I want to do filter on the field <code>type</code> on a doc,and the doc has two object <code>message</code> and <code>tags</code>, but both <code>message</code> and <code>tags</code> have the <code>type</code> field.</p>&#xA;&#xA;<p><strong><em>Doc:</em></strong></p>&#xA;&#xA;<pre><code> {&#xA; "message":{&#xA;  "type":2,&#xA;  "body":"test"&#xA; },&#xA; "tags":{&#xA;    "tagname":"td",&#xA;     "type":0&#xA;    }&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>How can i filter the doc with message's type is 2 ?,i tried this but no result returned.</p>&#xA;&#xA;<pre><code>"filter" : {&#xA;  "query" : {&#xA;    "bool" : {&#xA;      "must" : {&#xA;        "bool" : {&#xA;          "should" : {&#xA;            "match" : {&#xA;              "type" : {&#xA;                "query" : 2,&#xA;                "type" : "boolean",&#xA;                "operator" : "AND"&#xA;              }&#xA;            }&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA; }&#xA;</code></pre>&#xA;
<p>Simply filtering on the field <code>message.type</code> will work given that the field <code>message</code> is not of <code>nested</code> type:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "term": {&#xA;      "message.type": {&#xA;        "value": 2&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>If <code>message</code> is of <code>nested</code> type then use the following nested query.</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "nested": {&#xA;      "path": "message",&#xA;      "query": {&#xA;        "term": {&#xA;          "message.type": {&#xA;            "value": 2&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;