34041575
elasticsearch filter by length of a string field
<p>i am trying to get records the has in 'title' more then X characters.</p>&#xA;&#xA;<p>NOTE: not all records contains title field.</p>&#xA;&#xA;<p>i have tried:</p>&#xA;&#xA;<pre><code>GET books/_search&#xA;{&#xA;    "filter" : {&#xA;          "script" : {&#xA;              "script" : "_source.title.length() &gt; 10"&#xA;          }&#xA;      }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>as a result, i get this error:</p>&#xA;&#xA;<pre><code>GroovyScriptExecutionException[NullPointerException[Cannot invoke method length() on null object&#xA;</code></pre>&#xA;&#xA;<p>how can i solve it?</p>&#xA;
<p>You need to take into account that some documents might have a null <code>title</code> field. So you can use the groovy null-safe operator. Also make sure to use the POST method instead:</p>&#xA;&#xA;<pre><code>POST books/_search&#xA;{&#xA;    "filter" : {&#xA;          "script" : {&#xA;              "script" : "_source.title?.size() &gt; 10"&#xA;          }&#xA;      }&#xA;}&#xA;</code></pre>&#xA;
<p>You can also use custom tokenizers to count the number of characters. Check this answer for a possible help: <a href="https://stackoverflow.com/a/47556098/463846">https://stackoverflow.com/a/47556098/463846</a></p>&#xA;