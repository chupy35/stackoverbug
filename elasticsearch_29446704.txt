29446704
how to detect changes in database and automatically adding new row to elasticsearch index
<p>What I've already done:</p>&#xA;&#xA;<p>I connected my hbase with elasticsearch via this tutorial: </p>&#xA;&#xA;<p><a href="http://lessc0de.github.io/connecting_hbase_to_elasticsearch.html" rel="nofollow">http://lessc0de.github.io/connecting_hbase_to_elasticsearch.html</a></p>&#xA;&#xA;<p>And I get index with hbase table content, but after adding new row to hbase, it is not automatically added to elasticsearch index. I tried to add this line to my conf:</p>&#xA;&#xA;<p><code>"schedule" : "* 1/5 * ? * *"</code></p>&#xA;&#xA;<p>and mapping:</p>&#xA;&#xA;<pre><code>"mappings": {&#xA;        "jdbc" : {&#xA;             "_id" : {&#xA;                 "path" : "ID"&#xA;             }&#xA;         }&#xA;} &#xA;</code></pre>&#xA;&#xA;<p>which assigns _id = ID, and ID has unique value in my hbase table.</p>&#xA;&#xA;<p>It's working well: when I add new row to hbase it is uploaded to index in less then 5 minutes. But it is not good for performance, because every 5 minutes it executes a query and doesn't add old content to index only because of _id has to be unique. It is good for small db, but I had over 10 millions row in my hbase table, so my index is working all time.</p>&#xA;&#xA;<p>It is any solution or plugin to elasticsearch to automatically detected changes in db and add only the new row to index?</p>&#xA;&#xA;<p>I create index using:</p>&#xA;&#xA;<pre><code>curl -XPUT 'localhost:9200/_river/jdbc/_meta' -d '{&#xA;    "type" : "jdbc",&#xA;    "jdbc" : {&#xA;        "url" : "jdbc:phoenix:localhost",&#xA;        "user" : "",&#xA;        "password" : "",&#xA;        "sql" : "select ID, MESSAGE from test",&#xA;        "schedule" : "* 1/5 * ? * *"&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>Thanks for help.</p>&#xA;
<p>You're looking for something called a "river" plugin. There are various around supporting all kinds of databases and even a physical file system. However, the one you're looking for it the <a href="https://github.com/mallocator/Elasticsearch-HBase-River" rel="nofollow">HBase River Plugin</a>.</p>&#xA;