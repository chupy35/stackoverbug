33622639
elasticsearch: how to remove unassigned shards
<p>elasticsearch 1.7.x on centOS</p>&#xA;&#xA;<p>Our three node cluster became a 2 node cluster.&#xA;All is well. We had 3 replicas of every shard, so we have it all.</p>&#xA;&#xA;<p>But now cluster health is yellow, and we have:</p>&#xA;&#xA;<pre><code> "unassigned_shards" : 5,&#xA;</code></pre>&#xA;&#xA;<p>We already changed the replica count setting in elasticsearch.yml down to 1 (from 2) and restarted ES on both nodes. This made no difference.</p>&#xA;&#xA;<p>What is the next step?</p>&#xA;&#xA;<p>I see how to reassign shards, but not how to eliminate the unassigned shards.</p>&#xA;
<p>Changing the number_of_replicas in <code>elasticsearch.yaml</code> is not enough, this settings is only used when creating new indexes.</p>&#xA;&#xA;<p>Use the <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/_index_settings.html" rel="nofollow">Index Settings AP√è</a> to change  the number of replicas of existing indexes:</p>&#xA;&#xA;<pre><code>PUT /_all/_settings&#xA;{&#xA;    "number_of_replicas": 2&#xA;}&#xA;</code></pre>&#xA;