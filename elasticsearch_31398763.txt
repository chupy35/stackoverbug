31398763
How to Insert unique column data into elasticsearch?
<p>I have a webcrawler that scrapes Business Names and Business Contact numbers and inserts into ElasticSearch</p>&#xA;&#xA;<p>The problem is i dot <strong>NOT</strong> want duplicate phone numbers inserted into the column</p>&#xA;&#xA;<p>Is there anyway i can achieve this internally in elasticsearch?</p>&#xA;&#xA;<p>If not, is there a better solution than the below steps</p>&#xA;&#xA;<blockquote>&#xA;  <p>Fetch Record -> Check for Duplicate phone number -> Insert</p>&#xA;</blockquote>&#xA;
<p>You need a <code>unique</code> token filter for this: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.6/analysis-unique-tokenfilter.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/reference/1.6/analysis-unique-tokenfilter.html</a></p>&#xA;&#xA;<p>If the phone numbers are put in the same field of one document, then create a tokenizer that should output as tokens each phone number.</p>&#xA;&#xA;<p>And for this tokenizer define a filter of type unique that will keep the unique tokens. Something around these lines:</p>&#xA;&#xA;<pre><code>  "analyzer": {&#xA;    "numbers": {&#xA;      "tokenizer": "[whatever]",&#xA;      "filter": [&#xA;        ...,&#xA;        "unique"&#xA;      ]&#xA;    }&#xA;  }&#xA;</code></pre>&#xA;