30178198
"OR" filter with match phrase prefix in Elasticsearch
<p>I would like to do an Elasticsearch query wherein i want to do an OR filter</p>&#xA;&#xA;<p>imagine i have this kind of documents</p>&#xA;&#xA;<pre><code>[ {name : "John Doe"}, {name :"Jane Doe"}, {name:"Steve Doe"} ]&#xA;</code></pre>&#xA;&#xA;<p>A query that does the same thing with this SQL Query </p>&#xA;&#xA;<pre><code>SELECT * from table WHERE name LIKE 'Ja%' OR name LIKE 'Jo%'&#xA;</code></pre>&#xA;&#xA;<p>Right now i'm using elasticsearch's match_phrase_prefix for the LIKE but i'm quite stuck with the OR. </p>&#xA;&#xA;<p>Thanks</p>&#xA;
<p>You can use <code>bool should</code> query for implementing the <code>OR</code> operation. You can actually make use of <code>prefix</code> query instead of <code>match_phrase_prefix</code> for what you've described. Anyways, if you still find use case for a <code>match_phrase_prefix</code> query just replace the <code>prefix</code> query in the request below with <code>match_phrase_prefix</code> query.</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "bool": {&#xA;      "should": [&#xA;        {&#xA;          "prefix": {&#xA;            "name": {&#xA;              "value": "ja"&#xA;            }&#xA;          }&#xA;        },&#xA;        {&#xA;          "prefix": {&#xA;            "name": {&#xA;              "value": "jo"&#xA;            }&#xA;          }&#xA;        }&#xA;      ]&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;