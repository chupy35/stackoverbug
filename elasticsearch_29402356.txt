29402356
ElasticSearch sorting document based on fields that the phrase is found
<p>In ElasticSearch how do i sort documents based on finding a phrase in the following order of fields. </p>&#xA;&#xA;<p>Search Phrase: Miami&#xA;Fields: Title, Content, Topics</p>&#xA;&#xA;<p>If found in Title, Content and in Topics it will show before other documents that the phrase is only found in Content.</p>&#xA;&#xA;<p>Maybe there is a way to say:&#xA;if phrase found in Title then weight 2&#xA;if phrase found in Content then weight 1.5&#xA;if phrase found in Topics then weight 1</p>&#xA;&#xA;<p>and this will be sum(weight) with _score</p>&#xA;&#xA;<p>My Current query looks like</p>&#xA;&#xA;<pre><code>{&#xA;  "index": "abc",&#xA;  "type": "mydocuments",&#xA;  "body": {&#xA;    "query": {&#xA;      "multi_match": {&#xA;        "query": "miami",&#xA;        "type": "phrase",&#xA;        "fields": [&#xA;          "title",&#xA;          "content",&#xA;          "topics",&#xA;          "destinations"&#xA;        ]&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;
<p>You can <a href="http://www.elastic.co/guide/en/elasticsearch/reference/1.3/query-dsl-multi-match-query.html" rel="nofollow"><strong>use boosting on fields</strong></a> with the caret <code>^</code> notation to score them higher than other matching fields</p>&#xA;&#xA;<pre><code>{&#xA;  "index": "abc",&#xA;  "type": "mydocuments",&#xA;  "body": {&#xA;    "query": {&#xA;      "multi_match": {&#xA;        "query": "miami",&#xA;        "type": "phrase",&#xA;        "fields": [&#xA;          "title^10",&#xA;          "content^3",&#xA;          "topics",&#xA;          "destinations"&#xA;        ]&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Here I have applied a weight of 10 to <code>title</code> and weight of 3 to <code>content</code>. Documents will be returned in decreasing <code>_score</code> order so you need to boost scores in fields that you consider more important; <a href="http://www.elastic.co/guide/en/elasticsearch/guide/current/query-time-boosting.html" rel="nofollow">the values to use for boosting are up to you and may require a little trial and improvement</a> to return documents in your preferred order.</p>&#xA;