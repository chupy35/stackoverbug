30224865
Why is a document for which _explain returns matched: true not being returned by _search?
<p>I'm scratching my head over the following Elasticsearch problem:</p>&#xA;&#xA;<p>GET <code>/myindex/mytype/_search</code> with the following body:</p>&#xA;&#xA;<pre class="lang-js prettyprint-override"><code>{&#xA;  "query": {&#xA;    "bool": {&#xA;      "should": [&#xA;        {&#xA;          "prefix": {&#xA;            "name": "attorneys"&#xA;          }&#xA;        },&#xA;        {&#xA;          "multi_match": {&#xA;            "query": "attorneys",&#xA;            "type": "most_fields",&#xA;            "fields": [&#xA;              "name^2",&#xA;              "description"&#xA;            ]&#xA;          }&#xA;        },&#xA;        {&#xA;          "nested": {&#xA;            "boost": 2.0,&#xA;            "path": "categories",&#xA;            "score_mode": "sum",&#xA;            "query": {&#xA;              "bool": {&#xA;                "should": [&#xA;                  {&#xA;                    "match": {&#xA;                      "categories.name": {&#xA;                        "fuzziness": 10,&#xA;                        "query": "attorneys"&#xA;                      }&#xA;                    }&#xA;                  },&#xA;                  {&#xA;                    "term": {&#xA;                      "categories.name": "attorneys"&#xA;                    }&#xA;                  }&#xA;                ]&#xA;// ...closing brackets trimmed for conciseness&#xA;</code></pre>&#xA;&#xA;<p>doesn't return the document with with ID=10007.</p>&#xA;&#xA;<p>However, GET <code>/myindex/mytype/10007/_explain</code> with exactly the same query body returns:</p>&#xA;&#xA;<pre class="lang-js prettyprint-override"><code>{&#xA;  "_index": "vendors",&#xA;  "_type": "vendor",&#xA;  "_id": "10007",&#xA;  "matched": true,&#xA;  "explanation": {&#xA;    "value": 0.26991397,&#xA;    "description": "product of:",&#xA;    "details": [&#xA;      {&#xA;        "value": 0.8097419,&#xA;        "description": "sum of:",&#xA;        "details": [&#xA;          {&#xA;            "value": 0.8097419,&#xA;            "description": "Score based on child doc range from 304 to 304"&#xA;          }&#xA;        ]&#xA;      },&#xA;      {&#xA;        "value": 0.33333334,&#xA;        "description": "coord(1/3)"&#xA;      }&#xA;    ]&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Why would <code>_explain</code> return <code>"matched": true</code> but <code>_query</code> not return the&#xA;document?</p>&#xA;
<p>How many total results does your query match? Since you don't specify from/size, the default is to return the first 10 results. Maybe the document 10007 comes later than that. </p>&#xA;