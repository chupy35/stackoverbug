32619266
query string doesn't work in elasticsearch scan&scroll search
<p>When I tried:</p>&#xA;&#xA;<pre><code>curl -XPOST 'http://localhost:9200/index/type/_search?search_type=scan&amp;scroll=2m' -d '{"query": {"match": {"host":"xxxx"}}}'&#xA;</code></pre>&#xA;&#xA;<p>I got a <code>scroll_id</code>. Then I issued:</p>&#xA;&#xA;<pre><code>curl -XPOST 'http://localhost:9200/_search/scroll?scroll=1m&amp;scroll_id=......'&#xA;</code></pre>&#xA;&#xA;<p>but the response contains logs belonging to other host.&#xA;Why and how to solve it?</p>&#xA;&#xA;<p>Thanks alot</p>&#xA;
<p>Try a term query instead of match: </p>&#xA;&#xA;<pre><code>{"query": {"term": {"host":"xxxx"}}}&#xA;</code></pre>&#xA;&#xA;<p>This would look for the exact value instead of analyzing the value you have for <code>xxxx</code> and a discussion of the differences is: <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/term-vs-full-text.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/guide/current/term-vs-full-text.html</a></p>&#xA;&#xA;<p>If that doesn't work, it could also be that the field is being analyzed, and the mapping would need to be updated as well. Can you share the mapping for the index and type: <a href="http://localhost:9200/index/_mapping/type/?pretty" rel="nofollow">http://localhost:9200/index/_mapping/type/?pretty</a> ?</p>&#xA;