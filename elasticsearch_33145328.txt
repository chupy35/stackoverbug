33145328
Add synonym analyzer to elasticsearch index
<p>i have an existing elasticsearch index and i would like to add a analyzer but when i execute this command </p>&#xA;&#xA;<pre><code>{&#xA;"analysis" : {&#xA;    "analyzer" : {&#xA;        "synonym" : {&#xA;            "tokenizer" : "whitespace",&#xA;            "filter" : ["synonym"]&#xA;        }&#xA;    },&#xA;"filter" : {&#xA;            "synonym" : {&#xA;                "type" : "synonym",&#xA;                "synonyms_path" : "synonym.txt",&#xA;                "ignore_case" : true&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>i get an error </p>&#xA;&#xA;<blockquote>&#xA;  <p>{"error":"IndexAlreadyExistsException[[nuxeo] already exists]","status":400}</p>&#xA;</blockquote>&#xA;&#xA;<p>so i have to remove the index before add or refresh the synonym file is not very smart &#xA;A simply way exist to add a analyzer ? or at least to refresh it? thanks</p>&#xA;
<p>You need to first close the index , update analyzer settings and then open the index. That is the only way to update existing analyzer settings. Note that it only makes sense to change analyzers which are not used while indexing but used </p>&#xA;&#xA;<pre><code>curl -XPOST 'localhost:9200/schoolrecords/_close'&#xA;curl -XPUT 'localhost:9200/schoolrecords/_settings' -d '{&#xA;"analysis" : {&#xA;    "analyzer" : {&#xA;        "synonym" : {&#xA;            "tokenizer" : "whitespace",&#xA;            "filter" : ["synonym"]&#xA;        }&#xA;    },&#xA;"filter" : {&#xA;            "synonym" : {&#xA;                "type" : "synonym",&#xA;                "synonyms_path" : "synonym.txt",&#xA;                "ignore_case" : true&#xA;            }&#xA;        }&#xA;    }&#xA;}'&#xA;curl -XPOST 'localhost:9200/schoolrecords/_open'&#xA;</code></pre>&#xA;