26172393
ReactJS Invalid Checksum
<p>I keep getting the following error when attempting server side rendering using ReactJS &amp; node. </p>&#xA;&#xA;<pre><code>React attempted to use reuse markup in a container but the checksum was invalid.&#xA;</code></pre>&#xA;&#xA;<p>I've seen an <a href="https://stackoverflow.com/questions/20978946/facebook-react-js-how-do-you-render-statefull-components-on-the-server">answer</a> that passing the same props on the server and client resolves this issue. In my example, I don't have any props, so I'm not sure that the answer applies to my problem.</p>&#xA;&#xA;<p>You can view my full example on my <a href="https://github.com/maestroh/react-server-rendering" rel="nofollow noreferrer">github</a> account.</p>&#xA;&#xA;<p>I'm including the important code below. Any insight is greatly appreciated.</p>&#xA;&#xA;<p><strong>JSX</strong></p>&#xA;&#xA;<pre><code>/** @jsx React.DOM */&#xA;var React = require('react');&#xA;var index = React.createClass({&#xA;    render: function() {&#xA;        return (&#xA;          &lt;html&gt;&#xA;          &lt;head&gt;&#xA;            &lt;script src="bundle.js"&gt;&lt;/script&gt;&#xA;          &lt;/head&gt;&#xA;          &lt;body&gt;&#xA;            &lt;div&gt;&#xA;              hello&#xA;           &lt;/div&gt;&#xA;          &lt;/body&gt;&#xA;         &lt;/html&gt;&#xA;     );&#xA;   }&#xA;});&#xA;&#xA;if (typeof window !== "undefined") {&#xA;  React.renderComponent(&lt;index/&gt;, document.documentElement);&#xA;} else {&#xA;  module.exports = index;&#xA;}&#xA;</code></pre>&#xA;&#xA;<p><strong>Server</strong></p>&#xA;&#xA;<pre><code>require('node-jsx').install();&#xA;var express = require('express'),&#xA;    app     = express(),&#xA;    React = require('react'),&#xA;    index = require('./index.jsx');&#xA;&#xA;var render = function(req, res){&#xA;  var component = new index();&#xA;  var str = React.renderComponentToString(component);&#xA;  res.set('Content-Type', 'text/html');&#xA;  res.send(str);&#xA;  res.end();&#xA;}&#xA;&#xA;app.get('/',render);&#xA;app.use(express.static(__dirname));&#xA;&#xA;app.listen(8080);&#xA;</code></pre>&#xA;
<p>Change</p>&#xA;&#xA;<pre><code>React.renderComponent(&lt;index/&gt;, document.documentElement);&#xA;</code></pre>&#xA;&#xA;<p>to</p>&#xA;&#xA;<pre><code>React.renderComponent(&lt;index/&gt;, document);&#xA;</code></pre>&#xA;&#xA;<p>and the notice goes away.</p>&#xA;&#xA;<p><img src="https://www.evernote.com/shard/s23/sh/03afeb69-56f0-4990-80aa-35ef13581b4d/179f7d5d7858c65aa1109c5109b5cd3f/deep/0/localhost-8080-and-ReactJS-Invalid-Checksum---Stack-Overflow.png" alt="Screenshot"></p>&#xA;