33266528
How to use range post_filter in elasticsearch
<p>I cannot find examples of the syntax anywhere and the following does not work:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "bool": {&#xA;          "must": [&#xA;            { "term": { "category": "catname"   }}&#xA;          ]&#xA;        }&#xA;      }&#xA;    }&#xA;  },&#xA;  "post_filter": {&#xA;    "terms": {"type": ["foo1", "foo2"] },&#xA;    "range": { "price": { "gte": 300, "lte": 600 } }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;
<p>You just need to wrap all your <code>terms</code> filters in an additional <code>bool/must</code> filter:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "bool": {&#xA;          "must": [&#xA;            {&#xA;              "term": {&#xA;                "category": "catname"&#xA;              }&#xA;            }&#xA;          ]&#xA;        }&#xA;      }&#xA;    }&#xA;  },&#xA;  "post_filter": {&#xA;    "bool": {&#xA;      "must": [&#xA;        {&#xA;          "terms": {  "type": [ "foo1", "foo2" ] }&#xA;        },&#xA;        {&#xA;          "range": {  "price": { "gte": 300, "lte": 600  } }&#xA;        }&#xA;      ]&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;