29004110
How to add 2 values in elasticsearch script?
<p>I am trying to create a <code>rows_processed</code> field by adding 2 fields <code>src_s_rows</code> and <code>tgt_s_rows</code>, but some how it is not working, it always gives me 0. Even when I give <code>"script": "(doc['src_s_rows'].value)"</code> instead of <code>"script": "(doc['src_s_rows'].value+doc['tgt_s_rows'].value)"</code> it still gives me 0. </p>&#xA;&#xA;<p>What is it that I am missing, please help.</p>&#xA;&#xA;<pre><code>GET run_hist/task_hist/_search&#xA;{&#xA;   "fields": [&#xA;      "THROUGHPUT_ROWS_PER_SEC",&#xA;      "start_time",&#xA;      "end_time",&#xA;      "src_s_rows",&#xA;      "tgt_s_rows"&#xA;   ],&#xA;   "query": {&#xA;      "filtered": {&#xA;         "filter": {&#xA;            "bool": {&#xA;               "must": [&#xA;                  {&#xA;                     "term": {&#xA;                        "_id": "249885850"&#xA;                     }&#xA;                  }&#xA;               ]&#xA;            }&#xA;         }&#xA;      }&#xA;   },&#xA;   "filter": {&#xA;      "script": {&#xA;         "script": "(doc['end_time'].value-doc['start_time'].value)&gt;minutes*1",&#xA;         "params": {&#xA;            "minutes": 60000&#xA;         }&#xA;      }&#xA;   },&#xA;   "script_fields": {&#xA;      "total_time_taken": {&#xA;         "script": "(doc['end_time'].value-doc['start_time'].value)/1000"&#xA;      },&#xA;      "rows_processed": {&#xA;         "script": "(doc['src_s_rows'].value+doc['tgt_s_rows'].value)"&#xA;      }&#xA;   },&#xA;   "size": 10000&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Screenshot given below</p>&#xA;&#xA;<p><img src="https://i.stack.imgur.com/crp5B.png" alt="enter image description here"></p>&#xA;
<p>Use <code>_source.src_s_rows.value</code> in place of <code>doc['src_s_rows'].value</code></p>&#xA;&#xA;<p>try this</p>&#xA;&#xA;<pre><code>"script": "(_source.src_s_rows.value+_source.tgt_s_rows.value)"&#xA;</code></pre>&#xA;