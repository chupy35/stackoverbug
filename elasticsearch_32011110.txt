32011110
ElasticSearch - Phrase Suggestor
<p>I am using ElasticSearch and I have the following index mapping:</p>&#xA;&#xA;<pre><code>post  /my_index&#xA;{ &#xA;  "mappings": {&#xA;    "medical_terms": {&#xA;      "properties": {&#xA;        "terms": {&#xA;          "type":     "string"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;} &#xA;&#xA;PUT my_index/medical_terms/1&#xA;{&#xA;  "term":   "Paracetamol tablets"&#xA;}&#xA;&#xA;POST /my_index/_search?search_type=count&#xA;{&#xA;  "suggest" : {&#xA;    "text" : "paracetmo tabelts",&#xA;    "simple_phrase" : {&#xA;      "phrase" : {&#xA;        "field" : "term",&#xA;        "size" : 1,&#xA;        "real_word_error_likelihood" : 0.95,&#xA;        "max_errors" : 0.5,&#xA;        "gram_size" : 2,&#xA;        "highlight": {&#xA;          "pre_tag": "&lt;em&gt;",&#xA;          "post_tag": "&lt;/em&gt;"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>How do I get the phrase suggestor to return "paracetamol tablets" at the moment it returns:</p>&#xA;&#xA;<pre><code>"suggest": {&#xA;  "simple_phrase": [&#xA;     {&#xA;        "text": "paracetmo tabelts",&#xA;        "offset": 0,&#xA;        "length": 17,&#xA;        "options": [&#xA;           {&#xA;              "text": "paracetmo tablets",&#xA;              "highlighted": "paracetmo &lt;em&gt;tablets&lt;/em&gt;",&#xA;              "score": 0.24901225&#xA;           }&#xA;        ]&#xA;     }&#xA;  ]&#xA;</code></pre>&#xA;&#xA;<p>Do I need to use a custom analyzer and a dictionary?</p>&#xA;
<p>The problem is the <code>"max_errors" : 0.5,</code> parameter. If you set it to <code>0.8</code> it returns your expected result. I can't really explain you why 0.8 works because actually 0.5 means 50% of the terms can be written wrong and that is your usecase but somehow it works with 0.8. Maybe ask with that information in the elasticsearch usergroup?</p>&#xA;