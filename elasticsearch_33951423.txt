33951423
Sort terms aggregation results based on date they were first seen
<p>Suppose the event occurrence is like the following</p>&#xA;&#xA;<ul>&#xA;<li>eventA -10 AM</li>&#xA;<li>eventB -11 AM</li>&#xA;<li>eventA -12 AM</li>&#xA;</ul>&#xA;&#xA;<p>I need the <code>aggregation order</code> to be coming like </p>&#xA;&#xA;<ol>&#xA;<li>eventA (eventA is shown first because it came first)</li>&#xA;<li>eventB  </li>&#xA;</ol>&#xA;&#xA;<p>Can somebody help me on this?</p>&#xA;
<p>You can have a look at <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-order" rel="nofollow">ordering terms aggregation</a></p>&#xA;&#xA;<p>You need <code>event_date</code> <code>sub-aggregation</code> in your <code>terms aggregation</code> </p>&#xA;&#xA;<pre><code>{&#xA;  "size": 0,&#xA;  "aggs": {&#xA;    "event_name": {&#xA;      "terms": {&#xA;        "field": "event_name",&#xA;        "size": 10,&#xA;        "order": {&#xA;          "first_arrive": "asc"&#xA;        }&#xA;      },&#xA;      "aggs": {&#xA;        "first_event_occur": {&#xA;          "min": {&#xA;            "field": "event_date"&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;