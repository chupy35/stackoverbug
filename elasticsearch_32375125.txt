32375125
Multimatch Search on Multi word query
<p>I am looking to implement a <code>MultiMatchQuery</code> that searches a term like "Captain America" where the data is stored as <code>"firstname": "Captain"</code> and <code>"lastname":"America"</code>.</p>&#xA;&#xA;<p>I currently have:</p>&#xA;&#xA;<pre><code> MultiMatchQueryBuilder match = QueryBuilders.multiMatchQuery(&#xA;        text.toString(),&#xA;        "username",&#xA;        "firstname",&#xA;        "lastname"&#xA;    )&#xA;        .type(MatchQueryBuilder.Type.PHRASE_PREFIX)&#xA;        .operator(MatchQueryBuilder.Operator.AND);&#xA;</code></pre>&#xA;&#xA;<p>This, however, doesn't return any result.</p>&#xA;
<p>You, probably, need a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html#type-cross-fields" rel="nofollow">multi_match with cross_fields</a>, as it fits better with your use case.</p>&#xA;&#xA;<p>Haven't tried the code (it's just blindly written), but it should work or at least show the overall idea:</p>&#xA;&#xA;<pre><code> MultiMatchQueryBuilder match = QueryBuilders.multiMatchQuery(&#xA;        text.toString(),&#xA;        "username",&#xA;        "firstname",&#xA;        "lastname"&#xA;    )&#xA;        .type(MultiMatchQueryBuilder.Type.CROSS_FIELDS)&#xA;        .operator(MatchQueryBuilder.Operator.AND);&#xA;</code></pre>&#xA;