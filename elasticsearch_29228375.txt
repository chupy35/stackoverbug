29228375
Elastic Search: matching documents whose array contains this field
<p>I have a document similar to this:</p>&#xA;&#xA;<pre><code>{&#xA;name: "bob",&#xA;contains: ["a", "b", "c"]&#xA;},&#xA;{&#xA;name: "mary",&#xA;contains: ["a", "b"]&#xA;},&#xA;{&#xA;name: "Jason",&#xA;contains: ["b"]&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I want to make a query to find all of the people who contain "a" (bob and mary). How can I write the query?</p>&#xA;&#xA;<p>EDIT:</p>&#xA;&#xA;<p>Current query:</p>&#xA;&#xA;<pre><code>                query: {&#xA;                bool: {&#xA;                    must: [&#xA;                        { match: { exists: "yes" }},&#xA;                        { term: {contains: "a"}}&#xA;                    ],&#xA;                    must_not: [&#xA;                        { match: { status: "removed"}}&#xA;                    ]&#xA;&#xA;                }&#xA;            }&#xA;</code></pre>&#xA;
<p>A term filter/query on the <code>contains</code> field, such as <code>{term: {contains: "a"}}</code> will get you what you need. Assuming that you want to just match any document which satisfies that criteria, the full query would look something like:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "term": {&#xA;          "contains": "a"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}     &#xA;</code></pre>&#xA;&#xA;<p>This works because arrays of values are indexed individually, and a term query will find documents which contain an array containing that value if the field queried is a list.</p>&#xA;