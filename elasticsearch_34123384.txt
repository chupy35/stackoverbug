34123384
phrase_prefix query returns empty result if I search for 3 characters but returns non-empty result if I search for 4 and more characters
<p>I have this query :</p>&#xA;&#xA;<pre><code>"match": {   &#xA;    "_all": {&#xA;    "query": "ana",&#xA;    "type": "phrase_prefix"&#xA;   }&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>This query does not return anything with phrase "ana" that is 3 characters length, but if I search for 4 characters phrase "anat" it returns result :</p>&#xA;&#xA;<pre><code>match": {&#xA;  "_all": {&#xA;  "query": "anat",&#xA;  "type": "phrase_prefix"&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>What could be the problem here ? I have no idea why is that and how to solve this.</p>&#xA;&#xA;<p>Thanks !!!</p>&#xA;
<p>This could be due to <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.1/query-dsl-match-query.html#query-dsl-match-query-phrase-prefix" rel="nofollow"><code>max_expansions</code></a> parameter being set to its default value of 10.</p>&#xA;&#xA;<p>Try this</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "match": {&#xA;      "_all": {&#xA;        "query": "ana",&#xA;        "type": "phrase_prefix",&#xA;        "max_expansions": 100&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Try different values of "max_expansions", do not make it too large otherwise it will take time for query to return</p>&#xA;&#xA;<p>Does this help?</p>&#xA;