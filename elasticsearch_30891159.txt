30891159
Can I get outer document fields from nested top hits aggregation?
<p>I am making use of the functionality that was added in Elasticsearch 1.5 to allow a top hits aggregation inside a nested aggregation. The problem I have is that once I have my top nested documents I want to be able to also get fields from their outer documents. </p>&#xA;&#xA;<p>my pseudo aggregation structure is</p>&#xA;&#xA;<pre><code>nested: {&#xA;  some_other_aggreagation: {&#xA;      "top_hits": {&#xA;       }&#xA;  }&#xA;} &#xA;</code></pre>&#xA;&#xA;<p>The top nested hits include the index, type and id of the outer document, so I could perform a secondary search, but I'd like to avoid that. My other option is to return all of the hits from the query (currently I only return the results of the aggregations) and then match up the documents with the events in my code, but that seems bad from a performance point of view.</p>&#xA;&#xA;<p>Can anyone suggest something better? Thanks. </p>&#xA;