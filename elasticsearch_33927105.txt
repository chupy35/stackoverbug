33927105
Elasticsearch similarity match score for set of terms
<p>Is there a way to query for similarity (match score) for set of terms in elasticsearch?</p>&#xA;&#xA;<p><strong>Simple example</strong>:&#xA;<br/>Data:</p>&#xA;&#xA;<pre><code>doc1:{&#xA;    "tags":["tag1", "tag2", "tag3", "tag4"]&#xA; }&#xA; doc2:{&#xA;    "tags":["tag1", "tag2", "tag4"]&#xA; } &#xA;</code></pre>&#xA;&#xA;<p>Query:</p>&#xA;&#xA;<pre><code>criteria:{&#xA;    "tags":["tag1","tag2","tag3"]&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>Result </p>&#xA;&#xA;<pre><code>Result:{&#xA;    doc1 - match 100%&#xA;    doc2 - match 66.6%&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>Explanation:<br/>&#xA;doc1 has all tags that are present in search<br/>&#xA;doc2 has 2 of 3 tags that are present in search</p>&#xA;&#xA;<p>So basically query that will return list of documents ordered by match, where match = how similar are tags in document compared to tags in query. No fuzziness needed. Return in % is just an example, return in points or some other unit is fine. Number of tags can be different.<br/>&#xA;I am designing system so can store data in any format, whatever works for ElasticSearch. I looked at their docs, but probably missed this type of search.</p>&#xA;&#xA;<p>Many thanks for help.</p>&#xA;&#xA;<p><strong>Improvements</strong>&#xA;<br/>Is it possible to specify custom weight of match for each tag? &#xA;I.e. tag1 - 100points (or 20%), tag2 - 200 points (or 40%).</p>&#xA;
<p>Yes, you need the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/index-modules-similarity.html" rel="nofollow">similarity module</a></p>&#xA;&#xA;<p>Not sure about weighted match, maybe the boost attribute?</p>&#xA;