28841221
What is the maximum Elasticsearch document size?
<p>I read notes about Lucene deing limited to 2Gb documents. Are there any additional limitations on the size of documents that can be indexed in Elasticsearch?</p>&#xA;
<p>Lucene uses a byte buffer internally that uses 32bit integers for addressing. By definition this limits the size of the documents. So 2GB is max in theory.</p>&#xA;&#xA;<p><strong>In ElasticSearch:</strong></p>&#xA;&#xA;<p>There is a <code>max http request size</code> in the ES GitHub code, and it is set against <code>Integer.MAX_VALUE</code> or <code>2^31-1</code>. So, basically, <strong>2GB is the maximum document size for bulk indexing over HTTP</strong>. And also to add to it, ES does not process an HTTP request until it completes.</p>&#xA;&#xA;<p><strong>Good Practices:</strong></p>&#xA;&#xA;<ul>&#xA;<li>Do not use a very large java heap if you can help it: set it only as large as is necessary (ideally no more than half of the machineâ€™s RAM) to hold the overall maximum working set size for your usage of Elasticsearch. This leaves the remaining (hopefully sizable) RAM for the OS to manage for IO caching.</li>&#xA;<li>In client side, always use the bulk api, which indexes multiple documents in one request, and experiment with the right number of documents to send with each bulk request. The optimal size depends on many factors, but try to err in the direction of too few rather than too many documents. Use concurrent bulk requests with client-side threads or separate asynchronous requests.</li>&#xA;</ul>&#xA;&#xA;<p>For further study refer to these links:</p>&#xA;&#xA;<p>1) <a href="http://www.elasticsearch.org/blog/performance-considerations-elasticsearch-indexing/">Performance considerations for elasticsearch indexing</a></p>&#xA;&#xA;<p>2) <a href="https://github.com/elasticsearch/elasticsearch/issues/2237">Document maximum size for bulk indexing over HTTP</a></p>&#xA;