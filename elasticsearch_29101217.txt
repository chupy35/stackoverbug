29101217
How to update part of my document in Elasticsearch
<p>I'm just getting started with Logstash and Elasticsearch.</p>&#xA;&#xA;<p>See the code snippet below. In Elasticsearch I'm trying to update <code>host</code> value to <code>Foo</code> from <code>Bhargav</code></p>&#xA;&#xA;<p>What is the curl command I need to use to make this happen? Assuming I'm running Elasticsearch on <code>localhost:9200</code>.</p>&#xA;&#xA;<p><div class="snippet" data-lang="js" data-hide="false">&#xD;&#xA;<div class="snippet-code">&#xD;&#xA;<pre class="snippet-code-js lang-js prettyprint-override"><code>{&#xD;&#xA;  "took": 4,&#xD;&#xA;  "timed_out": false,&#xD;&#xA;  "_shards": {&#xD;&#xA;    "total": 15,&#xD;&#xA;    "successful": 15,&#xD;&#xA;    "failed": 0&#xD;&#xA;  },&#xD;&#xA;  "hits": {&#xD;&#xA;    "total": 8,&#xD;&#xA;    "max_score": 1.0,&#xD;&#xA;    "hits": [&#xD;&#xA;      {&#xD;&#xA;        "_index": "logstash-2011.05.18",&#xD;&#xA;        "_type": "apache_access",&#xD;&#xA;        "_id": "yyncoyOeTgij9awB13S4WQ",&#xD;&#xA;        "_score": 1.0,&#xD;&#xA;        "_source": {&#xD;&#xA;          "message": "134.39.72.245 - - [18/May/2011:12:40:18 -0700] \"GET /favicon.ico HTTP/1.1\" 200 1189 \"-\" \"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.2; .NET4.0C; .NET4.0E)\"",&#xD;&#xA;          "@version": "1",&#xD;&#xA;          "@timestamp": "2011-05-18T19:40:18.000Z",&#xD;&#xA;          "host": "Bhargav",&#xD;&#xA;          "timestamp": "18/May/2011:12:40:18 -0700",&#xD;&#xA;          "verb": "GET",&#xD;&#xA;          "request": "/favicon.ico",&#xD;&#xA;          "httpversion": "1.1",&#xD;&#xA;          "response": "200",&#xD;&#xA;          "bytes": "1189",&#xD;&#xA;          "referrer": "\"-\"",&#xD;&#xA;          "agent": "\"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.2; .NET4.0C; .NET4.0E)\""&#xD;&#xA;        }&#xD;&#xA;      },&#xD;&#xA;      {&#xD;&#xA;        "_index": "logstash-2011.05.18",&#xD;&#xA;        "_type": "apache_access",&#xD;&#xA;        "_id": "sMcXwrmTQzaiWW-zUSE7MA",&#xD;&#xA;        "_score": 1.0,&#xD;&#xA;        "_source": {&#xD;&#xA;          "message": "134.39.72.245 - - [18/May/2011:12:40:18 -0700] \"GET /favicon.ico HTTP/1.1\" 200 1189 \"-\" \"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.2; .NET4.0C; .NET4.0E)\"",&#xD;&#xA;          "@version": "1",&#xD;&#xA;          "@timestamp": "2011-05-18T19:40:18.000Z",&#xD;&#xA;          "host": "Bhargav",&#xD;&#xA;          "path": "/tmp/access_log",&#xD;&#xA;          "type": "apache_access",&#xD;&#xA;          "clientip": "134.39.72.245",&#xD;&#xA;          "ident": "-",&#xD;&#xA;          "auth": "-",&#xD;&#xA;          "timestamp": "18/May/2011:12:40:18 -0700",&#xD;&#xA;          "verb": "GET",&#xD;&#xA;          "request": "/favicon.ico",&#xD;&#xA;          "httpversion": "1.1",&#xD;&#xA;          "response": "200",&#xD;&#xA;          "bytes": "1189",&#xD;&#xA;          "referrer": "\"-\"",&#xD;&#xA;          "agent": "\"Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0; .NET CLR 2.0.50727; .NET CLR 3.0.4506.2152; .NET CLR 3.5.30729; InfoPath.2; .NET4.0C; .NET4.0E)\""&#xD;&#xA;        }&#xD;&#xA;      }&#xD;&#xA;    ]&#xD;&#xA;  }&#xD;&#xA;}</code></pre>&#xD;&#xA;</div>&#xD;&#xA;</div>&#xD;&#xA;</p>&#xA;
<p>Here the only option would be to use partial update in <a href="http://www.elastic.co/guide/en/elasticsearch/reference/current/docs-update.html" rel="nofollow">UPDATE API</a></p>&#xA;&#xA;<pre><code>curl -XPOST 'localhost:9200/test/type1/1/_update' -d '{&#xA;    "doc" : {&#xA;        "host" : "Bhargav"&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>But then this can be only applied to a single document.&#xA;There is a out of box for <a href="https://github.com/yakaz/elasticsearch-action-updatebyquery/" rel="nofollow">update by query</a> , you can try that.</p>&#xA;