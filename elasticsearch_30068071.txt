30068071
Using a terms query to list matching words in a document using Elasticsearch
<p>I am using Elasticsearch to index documents (PDF, Word, etc) using the Attachment Type plugin. Is it possible to query each document with a list of terms and have Elasticsearch return just the terms that match in the given document?</p>&#xA;&#xA;<p>For example, I have a query that uses bool to enforce the query against a single document by id and a terms query which contains a list of terms that I want to check are matched in the document:</p>&#xA;&#xA;<pre><code>{&#xA;  query:{&#xA;    filtered: {&#xA;      query:{&#xA;        bool: {&#xA;          must: [{match: {_id: id}}]&#xA;        }&#xA;      },&#xA;      filter: {&#xA;        terms: {&#xA;          attachment: terms&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I want to somehow use this query so that I pass the terms ['apple', 'wood', 'pen', 'paper', 'window'] to a document with id 1 and Elasticsearch will return just the matching terms in document 1 (e.g. 'paper', 'wood'). NOTE: In reality, the number of terms that I want to check against each document is quite large - in the 1000's</p>&#xA;