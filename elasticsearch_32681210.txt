32681210
How to compute scores from script_fields in elasticsearch?
<p>Im generating a custom field using "script_fields". And I would like to use that field to generate score for the documents. How can I achieve this in elasticsearch. It would be great if any one could post an example query.</p>&#xA;
<p>It's not really possible because when scores for the document are calculated the script field values are not computed yet. Search requests are typically executed in two phases: <strong>query</strong> and <strong>fetch</strong>. During the <strong>query</strong> phase scores are calculated and top documents are selected for retrieval. The list of the top documents is then used during <strong>fetch</strong> phase to retrieve the documents. During this retrieval process the script fields are calculated. </p>&#xA;&#xA;<p>In other words in order to use script to score the documents, you need to use this script in the <strong>query</strong> phase by placing it into the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-function-score-query.html" rel="nofollow">function_score</a> query, for example </p>&#xA;