33955324
elastic search score base length character
<p>I have Query 1 :</p>&#xA;&#xA;<pre><code>  "multi_match": {&#xA;    "query": "abcdef",&#xA;    "type": "best_fields",&#xA;    "fields": [&#xA;      "email"&#xA;    ]&#xA;  }&#xA;</code></pre>&#xA;&#xA;<p>and result is right:</p>&#xA;&#xA;<pre><code>  "total": 1,&#xA;  "max_score": 4.6334114,&#xA;  "hits": [&#xA;     {&#xA;        "_score": 4.6334114,&#xA;        "_source": {&#xA;           "id": 244,&#xA;           "email": "abcdef@xxxxx.com",&#xA;        }&#xA;     }&#xA;  ]&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>but Query 2:</p>&#xA;&#xA;<pre><code>  "multi_match": {&#xA;    "query": "abc",&#xA;    "type": "best_fields",&#xA;    "fields": [&#xA;      "email"&#xA;    ]&#xA;  }&#xA;</code></pre>&#xA;&#xA;<p>and result is :</p>&#xA;&#xA;<pre><code>  "total": 0,&#xA;  "max_score": null,&#xA;  "hits": []&#xA;</code></pre>&#xA;&#xA;<p>How to custom score to Query 2 get result same Query 1 ?</p>&#xA;&#xA;<p>Thanks</p>&#xA;
<p>You should learn to know how your terms are indexed, for instance your email (if you're using default settings) is emitting these tokens:</p>&#xA;&#xA;<ul>&#xA;<li><code>abcdef</code></li>&#xA;<li><code>xxxxx</code></li>&#xA;<li><code>com</code></li>&#xA;</ul>&#xA;&#xA;<p>That's why when you're querying with <code>"abcdef"</code> as a phrase, you're getting a match.</p>&#xA;&#xA;<p>Now you could use analyzer, which would use <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/analysis-edgengram-tokenfilter.html" rel="nofollow">Edge NGram filter</a> (or <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/analysis-edgengram-tokenizer.html" rel="nofollow">tokenizer</a>). So your email would emit such tokens:</p>&#xA;&#xA;<ul>&#xA;<li><code>abc</code></li>&#xA;<li><code>abcd</code></li>&#xA;<li><code>abcde</code></li>&#xA;<li><code>abcdef</code></li>&#xA;<li><code>abcefg</code>&#xA;...</li>&#xA;<li><code>com</code></li>&#xA;</ul>&#xA;&#xA;<p>You would have to index your emails using this <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/analysis-custom-analyzer.html" rel="nofollow">custom analyzer</a> and then your <code>abc</code> phrase would find a match </p>&#xA;