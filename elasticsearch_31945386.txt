31945386
Elasticsearch query does not take variable?
<p>Dynamic value or a variable doesn't work inside a <strong>elasticsearch "range" query</strong>.</p>&#xA;&#xA;<p>For explaining more this is a elasticsearch range query which find productId from 1000 to 11100, which is working perfectly ---</p>&#xA;&#xA;<pre><code>$json = '{&#xA;   "query" : {&#xA;       "range" : {&#xA;           "productId" : {&#xA;               "from" : '1000',&#xA;               "to" : '11100'&#xA;           }&#xA;       }&#xA;   }&#xA;}';&#xA;</code></pre>&#xA;&#xA;<p>On the other hand using the same query with a variable with the same value it returns me error like ---</p>&#xA;&#xA;<p><strong>{"error":"SearchPhaseExecutionException[Failed to execute phase [query], all shards failed; shardFailures</strong></p>&#xA;&#xA;<pre><code>$a =1000;&#xA;$b = 11100;&#xA;&#xA;$json = '{&#xA;       "query" : {&#xA;           "range" : {&#xA;               "productId" : {&#xA;                   "from" : '$a',&#xA;                   "to" : '$b'&#xA;               }&#xA;           }&#xA;       }&#xA;    }';&#xA;</code></pre>&#xA;&#xA;<p>Do anyone knows where i am making the mistake. </p>&#xA;&#xA;<p>Any suggestion will be great help. Thanks in advanced.</p>&#xA;
<p>If this is PHP, there's a problem with string concatenation:</p>&#xA;&#xA;<pre><code>$a = 1000;&#xA;$b = 11100;&#xA;&#xA;$json = '{&#xA;   "query" : {&#xA;       "range" : {&#xA;           "productId" : {&#xA;               "from" : '.$a.',&#xA;               "to" : '.$b.'&#xA;           }&#xA;       }&#xA;   }&#xA;}';&#xA;</code></pre>&#xA;&#xA;<p>see the dots around the variables.</p>&#xA;&#xA;<p>If you run the original piece of code by itself, the PHP parser should give you a parse error.</p>&#xA;