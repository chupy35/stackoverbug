31267714
How to dynamically assign value in elasticsearch query?
<p>I have Parent-Child mapping. Can I dynamically assign value in elasticsearch's query? I want <code>max_children</code> and <code>min_children</code> to be evaluated per parent. I've tried something like this, but it is not working:</p>&#xA;&#xA;<pre><code>"min_children": {&#xA;  "script": "doc['boxes_count'].value"&#xA;}, &#xA;"max_children": {&#xA;  "script": "doc['boxes_count'].value"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Current query looks like that, and is actually working</p>&#xA;&#xA;<pre><code>curl -XPOST 'localhost:9200/star_cars_development_car_washes/_search?pretty' -d '&#xA;{&#xA;  "query": {&#xA;    "has_child" : {&#xA;      "type" : "reservation",&#xA;      "min_children": 10, &#xA;      "max_children": 10, &#xA;      "query": {&#xA;        "filtered": {&#xA;          "filter": {&#xA;            "bool": {&#xA;              "must": [&#xA;                {&#xA;                  "range": {&#xA;                    "date": {"lte": "2015-07-21T03:36:00.000+03:00"}&#xA;                  }&#xA;                },&#xA;                {&#xA;                  "range": {&#xA;                    "ends_at": {"gte": "2015-07-21T03:36:00.000+03:00"}&#xA;                  }&#xA;                }&#xA;              ]&#xA;            }&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}'&#xA;</code></pre>&#xA;