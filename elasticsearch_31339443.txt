31339443
"boost" not working for "term" query
<p>I'm running Elasticsearch 1.5.2 and trying the following query:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "bool": {&#xA;          "must": [&#xA;            {&#xA;              "term": {&#xA;                "gender": "male"&#xA;              }&#xA;            }&#xA;          ]&#xA;        }&#xA;      },&#xA;      "query": {&#xA;        "bool": {&#xA;          "must": [&#xA;            {&#xA;              "match_all": {}&#xA;            }&#xA;          ],&#xA;          "should": [&#xA;            {&#xA;              "term": {&#xA;                "top_users": 1,&#xA;                "boost": 2&#xA;              }&#xA;            }&#xA;          ]&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Everything is fine until I add the <em>"boost": 2</em> to the should -> term part. The complete query is much more complex, that's why I need to boost, but the remaining queries don't make any difference: ES returns an error 400 if a <em>term</em> query gets a <em>boost</em> argument:</p>&#xA;&#xA;<p><em>QueryParsingException[[index_name] [_na] query malformed, must start with start_object]</em></p>&#xA;&#xA;<p>Any suggestions?</p>&#xA;
<p>It should be <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.6/query-dsl-term-query.html" rel="nofollow">like this</a>:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "bool": {&#xA;          "must": [&#xA;            {&#xA;              "term": {&#xA;                "gender": "male"&#xA;              }&#xA;            }&#xA;          ]&#xA;        }&#xA;      },&#xA;      "query": {&#xA;        "bool": {&#xA;          "must": [&#xA;            {&#xA;              "match_all": {}&#xA;            }&#xA;          ],&#xA;          "should": [&#xA;            {&#xA;              "term": {&#xA;                "top_users": {&#xA;                  "value": "1",&#xA;                  "boost": 2&#xA;                }&#xA;              }&#xA;            }&#xA;          ]&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;