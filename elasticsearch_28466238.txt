28466238
How to recover data from a renamed Elasticsearch cluster?
<p>I have just spent the best part of 12 hours indexing 70 million documents into Elasticsearch (1.4) on a single node, single server setup on an EC2 Ubuntu 14.04 box.  This completed successfully however before taking a snapshot of my server I thought it would be wise to rename the cluster to prevent it accidentally joining production boxes in the future, what a mistake that was!  After renaming in the elasticsearch.yml file and restarting the ES service my indexes have disappeared.</p>&#xA;&#xA;<p>I saw the data was still present in the data dir under the old cluster name, i tried stopping ES, moving the data manually in the filesystem and then starting the ES service again but still no luck.  I then tried renaming back to the old cluster name, putting everything back in place and still nothing.  The data is still there, all 44gb of it but I have no idea how to get this back.  I have spent the past 2 hours searching and all i can seem to find is advice on how to restore from a snapshot which I don't have.  Any advice would be hugely appreciated - I really hope I haven't lost a day's work.  I will never rename a cluster again!</p>&#xA;&#xA;<p>Thanks in advance.</p>&#xA;
<p>I finally fixed this on my own:  Stopped the cluster, deleted the nodes directory that had been created in the new cluster, copied my old nodes directort over being sure to respect the old structure exactly, chowned the folder to elasticsearch just in case, started up the cluster and breathed a huge sigh of relief to see 72 million documents!</p>&#xA;