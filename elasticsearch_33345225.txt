33345225
Nested filter returns wrong result when Object name is not given to search
<p>Using elastic search, I am trying to get data for nested object</p>&#xA;&#xA;<pre><code>BoolQueryBuilder boolBuilder = QueryBuilders.boolQuery();&#xA;NestedQueryBuilder nestedBuilder =      QueryBuilders.nestedQuery("Attributes", boolBuilder);&#xA;boolBuilder.must(QueryBuilders.termQuery("Attributes.attributeId", "1001"));&#xA;</code></pre>&#xA;&#xA;<p>Result comes if the query is like this,     </p>&#xA;&#xA;<pre><code> {&#xA;  "nested" : {&#xA;    "query" : {&#xA;      "bool" : {&#xA;        "must" : [ {&#xA;          "term" : {&#xA;            "Attributes.attributeId" : "1001"&#xA;          }&#xA;         ]&#xA;      }&#xA;    },&#xA;   "path" : "Attributes"&#xA;  }'   &#xA;</code></pre>&#xA;&#xA;<p>Result not coming if the query is like this,</p>&#xA;&#xA;<pre><code> {    &#xA;  "nested" : {&#xA;    "query" : {&#xA;      "bool" : {&#xA;        "must" : [ {&#xA;          "term" : {&#xA;            "attributeId" : "1001"&#xA;          }&#xA;         ]&#xA;      }&#xA;    },&#xA;    "path" : "Attributes"&#xA;  }&#xA;</code></pre>&#xA;&#xA;<p>Can somebody help me.Here i have to get result without using "<strong>Attributes.attributeId</strong>".ie. using "<strong>attributeId</strong>" alone data have to come.</p>&#xA;
<p>This is expected as per the nested query <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.4/query-dsl-nested-query.html" rel="nofollow">documentation</a> </p>&#xA;&#xA;<blockquote>&#xA;  <p>The query path points to the nested object path, and the query (or&#xA;  filter) includes the query that will run on the nested docs matching&#xA;  the direct path, and joining with the root parent docs. <strong>Note that any&#xA;  fields referenced inside the query must use the complete path (fully&#xA;  qualified).</strong></p>&#xA;</blockquote>&#xA;