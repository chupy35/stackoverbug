31474167
Very weird issue with elasticsearch, confusing data in fieldata_fields
<p>I have an index <code>http://127.0.0.1:9200/7fba4764eba5e00e4afcaa46b52690f2/</code></p>&#xA;&#xA;<p>Now if I open this url,</p>&#xA;&#xA;<p><code>http://127.0.0.1:9200/7fba4764eba5e00e4afcaa46b52690f2/_search?q=source_id:1832</code></p>&#xA;&#xA;<p>I will not get any data</p>&#xA;&#xA;<p>If I add type in that search, I will get desired data</p>&#xA;&#xA;<p><code>http://127.0.0.1:9200/7fba4764eba5e00e4afcaa46b52690f2/trash/_search?q=source_id:1832</code></p>&#xA;&#xA;<p>I don't know how to debug this issue, so I tried to dump the data stored in memory with this query:</p>&#xA;&#xA;<pre><code>{&#xA;    "query": {&#xA;        "query_string": {&#xA;            "query": "*"&#xA;        }&#xA;    },&#xA;    "fielddata_fields": [ "source_id" ]&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>And the <code>source_id</code> part was totally a mess, any ideas?</p>&#xA;&#xA;<pre><code>"fields" : {&#xA;        "source_id" : [&#xA;                      " \u0001\u0000\u0000\u0000\u0000\u0000\u0000\u0000\u000e(",&#xA;                      "0 \u0000\u0000\u0000\u0000\u0000\u0000",&#xA;                      "@\b\u0000\u0000\u0000\u0000",&#xA;                      "P\u0002\u0000\u0000"&#xA;                   ]&#xA;                },&#xA;</code></pre>&#xA;
<p>I believe this is similar to, if not the same as the problem posted here on SO: <a href="https://stackoverflow.com/a/30269676/382774">https://stackoverflow.com/a/30269676/382774</a>. From my answer on that topic:</p>&#xA;&#xA;<blockquote>&#xA;  <p><a href="https://github.com/elastic/elasticsearch/issues/8614" rel="nofollow noreferrer">https://github.com/elastic/elasticsearch/issues/8614</a> - identical field&#xA;  names in different mappings need to share the same type.</p>&#xA;</blockquote>&#xA;&#xA;<p>It's a bug they're working on.</p>&#xA;