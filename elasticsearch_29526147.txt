29526147
Can you tell if an elasticsearch index is being reindexed?
<p>I changed one of my mappings so I started a reindex using kopf. How can I tell when the reindex is done? </p>&#xA;&#xA;<p>I've tried searching the output of the following: </p>&#xA;&#xA;<pre><code>curl -GET http://example-elastic:9200/logstash-2015.03.31/_status?pretty&#xA;curl -GET http://example-elastic:9200/_cat/indices&#xA;curl -GET http://example-elastic:9200/_stats/indices&#xA;</code></pre>&#xA;&#xA;<p><strong>Update</strong>  </p>&#xA;&#xA;<p>I started the reindex with the kopf plugin. (Removed incorrect indexing command from question) </p>&#xA;&#xA;<p><strong>Update2</strong></p>&#xA;&#xA;<p>I figured out how to see the last index date, but it seems to me like there is a better way to tell if it is currently being indexed. </p>&#xA;&#xA;<p>Works on OSX</p>&#xA;&#xA;<pre><code>FOO=logstash-2015.03.31&#xA;curl -s -XGET "http://example-elastic:9200/l$FOO?pretty" | grep creation_date | sed  s'/[^0-9]//g' | date -j&#xA;&#xA;Wed Apr  8 16:42:23 MDT 2015&#xA;</code></pre>&#xA;&#xA;<p><strong>Update3</strong>  </p>&#xA;&#xA;<p>I installed <a href="https://www.npmjs.com/package/elasticsearch-reindex" rel="nofollow">a plugin</a> to give more feedback of how long an index takes. </p>&#xA;&#xA;<pre><code> elasticsearch-reindex -f http://example-elastic:9200/logstash-2015.03.22/string -t http://example-elastic:9200&#xA;</code></pre>&#xA;&#xA;<p>It looks like the indexing procedure takes a long time. 5 minutes in, and it is still at 2%</p>&#xA;&#xA;<pre><code>...&#xA;reindexing [=-----------------------------] 165200/8492680(2%) 158.1 7971.1s&#xA;reindexing [=-----------------------------] 165300/8492680(2%) 158.5 7984.9s&#xA;reindexing [=-----------------------------] 165400/8492680(2%) 158.5 7981.0s&#xA;</code></pre>&#xA;&#xA;<p>Is there a way to see this progress from elasticsearch?</p>&#xA;
<p>Take a look at the <a href="http://www.elastic.co/guide/en/elasticsearch/guide/current/_cat_api.html" rel="nofollow">cat api</a> and in particular, the output of <code>/_cat/nodes?help</code>.  You'll probably want to monitor the indexing ops with:</p>&#xA;&#xA;<p><code>curl -XGET 'http://localhost:9200/_cat/nodes?v&amp;h=indexing.index_current'</code></p>&#xA;