32751885
Elasticsearch Out of Memory Crash -- How to Delete Data?
<p>Well, I started piping data into ES until it ran itself out of memory and crashed. I run <code>free</code> and i see that all memory is entirely used up.</p>&#xA;&#xA;<p>I want to delete some data out of it (old data) but i can't query against <code>localhost:9200</code>, it rejects the connection.</p>&#xA;&#xA;<p>How to fix the fact that i can't delete out the old data?</p>&#xA;
<p>If you want to go hardcore about it, you can always delete anything in your data folder:</p>&#xA;&#xA;<pre><code>&gt; rm $ES_HOME/data/&lt;clustername&gt;&#xA;</code></pre>&#xA;&#xA;<p>Note: replace <code>&lt;clustername&gt;</code> with your real cluster name (the default is <code>elasticsearch</code>)</p>&#xA;
<p>Stop indexing. If it stabilizes itself after few minute then try deleting the data again. Restart the cluster.</p>&#xA;&#xA;<p>If it's still stuck, stop the indexing and restart the cluster.</p>&#xA;&#xA;<p>In any case, if the nodes went OOM they need to be restarted, as <a href="https://stackoverflow.com/questions/3058198/can-the-jvm-recover-from-an-outofmemoryerror-without-a-restart">the state the JVM is in is unknown</a>.</p>&#xA;