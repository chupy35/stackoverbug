30052870
Is ElasticSearch safe to allow every node to join cluster?
<p>ElasticSearch open port 9300 for node-to-node communication, and every machine in the same <code>network</code> with same <code>cluster.name</code> can auto join this cluster?</p>&#xA;&#xA;<p>I doubt is it safe to allow every node to join? </p>&#xA;&#xA;<p>If not, do I need to set <code>network.host</code> to a fixed ip address? Or is there a better way?</p>&#xA;
<p>It really depends on the networking stack of your nodes and how you interact with your cluster. If they are all running on a local network, inaccessible from the outside, then in general, allow other nodes to join freely is OK since it means someone from inside your network is trying to join.</p>&#xA;&#xA;<p>However, if your nodes have a public IP address, it's a good idea to change the default ports used, disable Zen multicast discovery, and give each node a list of the other nodes that are allowed to communicate with it.</p>&#xA;&#xA;<p>Straight from the elasticsearch.yml file :</p>&#xA;&#xA;<pre><code># 1. Disable multicast discovery (enabled by default):&#xA;#&#xA;discovery.zen.ping.multicast.enabled: false&#xA;#&#xA;# 2. Configure an initial list of master nodes in the cluster&#xA;#    to perform discovery when new nodes (master or data) are started:&#xA;#&#xA;discovery.zen.ping.unicast.hosts: ["enter_ip_here","enter_other_ip:port","etc..."]&#xA;</code></pre>&#xA;&#xA;<p>Note that these settings needs to be the same on all nodes (except for the list of hosts obviously) and a restart of the node is required for these to be taken into account.</p>&#xA;&#xA;<p>Also, you can indeed set the <code>network.host</code> to a fixed IP. This IP should be the one appearing in the list of <code>discovery.zen.ping.unicast.hosts</code>.</p>&#xA;