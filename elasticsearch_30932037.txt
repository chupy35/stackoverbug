30932037
How to implement auto-complete in elasticsearch
<p>I need to implement auto-complete feature in a field called "names" in my document. Here is the suggest query I am using for that:</p>&#xA;&#xA;<pre><code>{&#xA;"autoSuggest": {&#xA;"text": "word",&#xA;"completion": {&#xA;"field": "names"&#xA;}&#xA;}&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Im getting the following error running this query:</p>&#xA;&#xA;<pre><code>{&#xA;"_shards":{&#xA;"total":5,&#xA;"successful":0,&#xA;"failed":5,&#xA;"failures":[&#xA;{&#xA;"index":"myindex",&#xA;"shard":0,&#xA;"reason":"BroadcastShardOperationFailedException[[names][0] ]; nested: ElasticsearchException[failed to execute suggest]; nested: ClassCastException[org.elasticsearch.index.mapper.core.StringFieldMapper cannot be cast to org.elasticsearch.index.mapper.core.CompletionFieldMapper]; "&#xA;}&#xA;....&#xA;]&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>What is the reason for this error? and what should i do to enable the auto-complete?</p>&#xA;
<p>You need to define the suggester in the mapping first , only then it makes sense to call it out in the _suggest API.&#xA;You can refer more on the subject <a href="http://blog.qbox.io/quick-and-dirty-autocomplete-with-elasticsearch-completion-suggest" rel="nofollow">here</a>.</p>&#xA;