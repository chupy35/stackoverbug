32069017
How to apply filters using elasticsearch
<p>I am facing an issue with elasticsearch using 'tire' gem. I have applied search on articles and want to apply a filter so that draft articles should not be visible in search. My code is as follows:</p>&#xA;&#xA;<p>search_controller.rb</p>&#xA;&#xA;<pre><code>def articles_search&#xA;   @articles = Article.search(params)&#xA;end&#xA;</code></pre>&#xA;&#xA;<p>article.rb</p>&#xA;&#xA;<pre><code>include Tire::Model::Search&#xA;include Tire::Model::Callbacks&#xA;&#xA;  def self.search(params)&#xA;    if params[:query].present?&#xA;      tire.search(load: true) do&#xA;        query { string params[:query]} &#xA;        filter :terms, :state =&gt; ['published']&#xA;      end&#xA;    else&#xA;      tire.search(load: true) do&#xA;        query { string "*#{params["term"]}*"}&#xA;        filter :terms, :state =&gt; ['published'] &#xA;      end&#xA;    end &#xA;  end&#xA;</code></pre>&#xA;&#xA;<p>In articles table there is a column state I want only those articles with state 'published' but it's not working. It gives an empty result if I use filter :terms, :state => ['published'].</p>&#xA;