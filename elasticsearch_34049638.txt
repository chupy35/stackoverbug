34049638
how do you create a search in elasticsearch
<p>I am very new to elastic search and like to create a search string to get cpu_user for all hosts:</p>&#xA;&#xA;<p>Here is what my index and fields look like:</p>&#xA;&#xA;<pre><code>"web_app" : {&#xA;    "mappings" : {&#xA;      "data" : {&#xA;        "dynamic_templates" : [ {&#xA;          "iostat" : {&#xA;            "mapping" : {&#xA;              "type" : "double"&#xA;            },&#xA;            "match" : "iostat_*",&#xA;            "match_mapping_type" : "string"&#xA;          }&#xA;        } ],&#xA;        "_ttl" : {&#xA;          "enabled" : true,&#xA;          "default" : 2592000000&#xA;        },&#xA;        "properties" : {&#xA;          "alertCount" : {&#xA;            "type" : "long"&#xA;          },&#xA;          "appcode" : {&#xA;            "type" : "string",&#xA;            "index" : "not_analyzed"&#xA;          },&#xA;          "collisions" : {&#xA;            "type" : "double"&#xA;          },&#xA;          "cpu_idle" : {&#xA;            "type" : "double"&#xA;          },&#xA;          "cpu_system" : {&#xA;            "type" : "double"&#xA;          },&#xA;          "cpu_user" : {&#xA;            "type" : "double"&#xA;          },&#xA;          "host" : {&#xA;            "type" : "string",&#xA;            "index" : "not_analyzed"&#xA;          },&#xA;          "ierrs" : {&#xA;            "type" : "double"&#xA;          },&#xA;          "iostat" : {&#xA;            "properties" : {&#xA;              "iostat_dm-0" : {&#xA;                "type" : "double"&#xA;              },&#xA;              "iostat_vda" : {&#xA;                "type" : "double"&#xA;              },&#xA;              "iostat_vda1" : {&#xA;                "type" : "double"&#xA;              },&#xA;              "iostat_vda2" : {&#xA;                "type" : "double"&#xA;              },&#xA;              "iostat_vda3" : {&#xA;                "type" : "double"&#xA;              },&#xA;              "iostat_vdb" : {&#xA;                "type" : "double"&#xA;              },&#xA;              "iostat_vdc" : {&#xA;                "type" : "double"&#xA;              },&#xA;              "iostat_vdd" : {&#xA;                "type" : "double"&#xA;              }&#xA;            }&#xA;          },&#xA;</code></pre>&#xA;&#xA;<p>Any ideas how could create a seach string to pull cpu user for all hosts?</p>&#xA;&#xA;<p>I would like the output to be in json for example for each host, timestamp and cpu_user value.</p>&#xA;&#xA;<p>This is what the actual data looks like in elasticsearch:</p>&#xA;&#xA;<pre><code>{ "_index" : "web_app",&#xA;      "_type" : "data",&#xA;      "_id" : "12345",&#xA;      "_score" : 1.0,&#xA;      "_source":{"oerrs":"0","load_avg_1min":"0.00","thresholdValue":"8931.0","cpu_idle":"100","host":"server1","server_uptime":"117","runQ_threads":"1","iostat":{"iostat_vdc":"6.60","iostat_vda3":"3.00","iostat_vdd":"1.04","iostat_vda2":"2.90","iostat_dm-0":"3.26","iostat_vda1":"3.44","iostat_vdb":"0.45","iostat_vda":"2.90"},"ierrs":"0","appcode":"cds","load_avg_10min":"0.00","page_scanrate":"NA","memory_free":"10572","cpu_user":"0","alertCount":"6","timestamp":"2015-12-01T18:32:00.0051","thresholdLimit":"5.0","memory_used":"8398","collisions":"0","load_avg_15min":"0.00","cpu_system":"0"}&#xA;},&#xA;, {&#xA;      "_index" : "web_app",&#xA;      "_type" : "data",&#xA;      "_id" : "456",&#xA;      "_score" : 1.0,&#xA;      "_source":{"oerrs":"0","load_avg_1min":"0.14","thresholdValue":"19183.0","cpu_idle":"96","host":"server2","server_uptime":"80","runQ_threads":"1","iostat":{"iostat_vdc":"2.26","iostat_vda3":"8.97","iostat_vdd":"0.80","iostat_vda2":"3.60","iostat_dm-0":"3.10","iostat_vda1":"2.41","iostat_vdb":"2.74","iostat_vda":"4.10"},"ierrs":"0","appcode":"cds","load_avg_10min":"0.25","page_scanrate":"NA","memory_free":"409","cpu_user":"3","alertCount":"28","timestamp":"2015-12-01T18:32:00.0038","thresholdLimit":"10.0","memory_used":"24692","collisions":"0","load_avg_15min":"0.43","cpu_system":"1"}&#xA;    },&#xA;</code></pre>&#xA;