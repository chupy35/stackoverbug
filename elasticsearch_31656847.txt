31656847
Elasticsearch health showing Yellow
<p>Since I upgraded my ES Cluster and Kibana to the latest version ES 1.7 &amp; Kibana 4.1, my indexes health have not changed from Yellow to green.</p>&#xA;&#xA;<p>The ES log is showing this:</p>&#xA;&#xA;<pre><code>[2015-07-27 09:03:21,462][DEBUG][action.search.type       ] [elasticsearch2] [logstash-2015.07.09][2], node[1Bc8wWx2TXCIbIeaA_KoKQ], [P], s[STARTED]: Failed to execute [org.elasticsearch.action.search.SearchRequest@18ed1a80] lastShard [true]&#xA;org.elasticsearch.transport.RemoteTransportException: [elasticsearch1][inet[/10.20.121.63:9300]][indices:data/read/search[phase/query]]&#xA;Caused by: org.elasticsearch.ElasticsearchException: org.elasticsearch.common.breaker.CircuitBreakingException: [FIELDDATA] Data too large, data for [clientName.raw] would be larger than limit of [6400612761/5.9gb]&#xA;        at org.elasticsearch.index.fielddata.plain.AbstractIndexFieldData.load(AbstractIndexFieldData.java:80)&#xA;        at org.elasticsearch.search.aggregations.support.ValuesSource$MetaData.load(ValuesSource.java:88)&#xA;        at org.elasticsearch.search.aggregations.support.AggregationContext.bytesField(AggregationContext.java:180)&#xA;        at org.elasticsearch.search.aggregations.support.AggregationContext.valuesSource(AggregationContext.java:143)&#xA;        at org.elasticsearch.search.aggregations.support.ValuesSourceAggregatorFactory.create(ValuesSourceAggregatorFactory.java:53)&#xA;        at org.elasticsearch.search.aggregations.AggregatorFactories.createAndRegisterContextAware(AggregatorFactories.java:53)&#xA;        at org.elasticsearch.search.aggregations.AggregatorFactories.createTopLevelAggregators(AggregatorFactories.java:157)&#xA;        at org.elasticsearch.search.aggregations.AggregationPhase.preProcess(AggregationPhase.java:79)&#xA;        at org.elasticsearch.search.query.QueryPhase.execute(QueryPhase.java:100)&#xA;        at org.elasticsearch.search.SearchService.loadOrExecuteQueryPhase(SearchService.java:301)&#xA;        at org.elasticsearch.search.SearchService.executeQueryPhase(SearchService.java:312)&#xA;        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:776)&#xA;        at org.elasticsearch.search.action.SearchServiceTransportAction$SearchQueryTransportHandler.messageReceived(SearchServiceTransportAction.java:767)&#xA;        at org.elasticsearch.transport.netty.MessageChannelHandler$RequestHandler.doRun(MessageChannelHandler.java:279)&#xA;        at org.elasticsearch.common.util.concurrent.AbstractRunnable.run(AbstractRunnable.java:36)&#xA;        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1145)&#xA;        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)&#xA;        at java.lang.Thread.run(Thread.java:745)&#xA;Caused by: org.elasticsearch.common.util.concurrent.UncheckedExecutionException: org.elasticsearch.common.breaker.CircuitBreakingException: [FIELDDATA] Data too large, data for [clientName.raw] would be larger than limit of [6400612761/5.9gb]&#xA;        at org.elasticsearch.common.cache.LocalCache$Segment.get(LocalCache.java:2203)&#xA;        at org.elasticsearch.common.cache.LocalCache.get(LocalCache.java:3937)&#xA;        at org.elasticsearch.common.cache.LocalCache$LocalManualCache.get(LocalCache.java:4739)&#xA;        at org.elasticsearch.indices.fielddata.cache.IndicesFieldDataCache$IndexFieldCache.load(IndicesFieldDataCache.java:167)&#xA;        at org.elasticsearch.index.fielddata.plain.AbstractIndexFieldData.load(AbstractIndexFieldData.java:74)&#xA;</code></pre>&#xA;&#xA;<p>I ran the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-clearcache.html" rel="nofollow">clear cache</a> command as recommended but haven't seen any changes.</p>&#xA;&#xA;<p>Anyone come across this issue since upgrading?</p>&#xA;