34408918
Elasticsearch High CPU and RAM usage
<p>I am a newbie in this area. I have setup elasticsearch. It works fine but the cpu usage and memory used becomes very high. This is hampering the servers performance. This is my elastic search version</p>&#xA;&#xA;<pre><code>{&#xA;  "status" : 200,&#xA;  "name" : "Aireo",&#xA;  "cluster_name" : "elasticsearch",&#xA;  "version" : {&#xA;    "number" : "1.4.4",&#xA;    "build_hash" : "c88f77ffc81301dfa9dfd81ca2232f09588bd512",&#xA;    "build_timestamp" : "2015-02-19T13:05:36Z",&#xA;    "build_snapshot" : false,&#xA;    "lucene_version" : "4.10.3"&#xA;  },&#xA;  "tagline" : "You Know, for Search"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Server config: </p>&#xA;&#xA;<pre><code>cpu family  : 6&#xA;model       : 62&#xA;model name  : Intel(R) Xeon(R) CPU E5-2630L v2 @ 2.40GHz&#xA;stepping    : 4&#xA;microcode   : 0x1&#xA;cpu MHz     : 2399.998&#xA;cache size  : 15360 KB&#xA;MemTotal:        2049964 kB&#xA;MemFree:          122056 kB&#xA;Buffers:           77396 kB&#xA;Cached:           184528 kB&#xA;SwapCached:            0 kB&#xA;Active:          1685792 kB&#xA;Inactive:         139420 kB&#xA;Active(anon):    1569940 kB&#xA;Inactive(anon):     8332 kB&#xA;Active(file):     115852 kB&#xA;Inactive(file):   131088 kB&#xA;Unevictable:           0 kB&#xA;Mlocked:               0 kB&#xA;SwapTotal:             0 kB&#xA;SwapFree:              0 kB&#xA;</code></pre>&#xA;&#xA;<p>System usage:</p>&#xA;&#xA;<pre><code> PID  USER      PR      NI    VIRT        RES          SHR     S    %CPU     %MEM       TIME+      COMMAND&#xA;27029 elastic+  20      0     4361248     1.186g       7372    S     110.7    60.7       1037:36    java  &#xA;</code></pre>&#xA;&#xA;<p>_nodes/stats/jvm</p>&#xA;&#xA;<pre><code>{  &#xA;   "cluster_name":"elasticsearch",&#xA;   "nodes":{  &#xA;      "cYUNisljRXmeLSiMk6kY_Q":{  &#xA;         "timestamp":1450761255965,&#xA;         "name":"Aireo",&#xA;         "transport_address":"inet[128.199.229.70/128.199.229.70:9300]",&#xA;         "host":"TLM",&#xA;         "ip":[  &#xA;            "inet[128.199.229.70/128.199.229.70:9300]",&#xA;            "NONE"&#xA;         ],&#xA;         "jvm":{  &#xA;            "timestamp":1450761255965,&#xA;            "uptime_in_millis":64493824,&#xA;            "mem":{  &#xA;               "heap_used_in_bytes":1051633552,&#xA;               "heap_used_percent":99,&#xA;               "heap_committed_in_bytes":1056309248,&#xA;               "heap_max_in_bytes":1056309248,&#xA;               "non_heap_used_in_bytes":85983832,&#xA;               "non_heap_committed_in_bytes":87912448,&#xA;               "pools":{  &#xA;                  "young":{  &#xA;                     "used_in_bytes":139591680,&#xA;                     "max_in_bytes":139591680,&#xA;                     "peak_used_in_bytes":139591680,&#xA;                     "peak_max_in_bytes":139591680&#xA;                  },&#xA;                  "survivor":{  &#xA;                     "used_in_bytes":12757624,&#xA;                     "max_in_bytes":17432576,&#xA;                     "peak_used_in_bytes":17432576,&#xA;                     "peak_max_in_bytes":17432576&#xA;                  },&#xA;                  "old":{  &#xA;                     "used_in_bytes":899284872,&#xA;                     "max_in_bytes":899284992,&#xA;                     "peak_used_in_bytes":899284992,&#xA;                     "peak_max_in_bytes":899284992&#xA;                  }&#xA;               }&#xA;            },&#xA;            "threads":{  &#xA;               "count":50,&#xA;               "peak_count":52&#xA;            },&#xA;            "gc":{  &#xA;               "collectors":{  &#xA;                  "young":{  &#xA;                     "collection_count":844,&#xA;                     "collection_time_in_millis":4550&#xA;                  },&#xA;                  "old":{  &#xA;                     "collection_count":20606,&#xA;                     "collection_time_in_millis":54410384&#xA;                  }&#xA;               }&#xA;            },&#xA;            "buffer_pools":{  &#xA;               "direct":{  &#xA;                  "count":49,&#xA;                  "used_in_bytes":6269492,&#xA;                  "total_capacity_in_bytes":6269492&#xA;               },&#xA;               "mapped":{  &#xA;                  "count":1202,&#xA;                  "used_in_bytes":863065239,&#xA;                  "total_capacity_in_bytes":863065239&#xA;               }&#xA;            }&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I am using the default configuration in the elasticsearch xml.&#xA;Thanks in advance</p>&#xA;
<p>By default, <strong>Elasticsearch</strong> contains 1 GB heap size by default.</p>&#xA;&#xA;<blockquote>&#xA;  <p>For just about every deployment, this number is far too small. If you&#xA;  are using the default heap values, your cluster is probably configured&#xA;  incorrectly.</p>&#xA;</blockquote>&#xA;&#xA;<p>You need to increase your RAM or you can reduce Heap Size(if you playing with small amount of data)</p>&#xA;&#xA;<p><a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/heap-sizing.html" rel="nofollow">Setting Heap Size</a></p>&#xA;