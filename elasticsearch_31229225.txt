31229225
ElasticSearch doesn't find my script
<p>Somehow elasticsearch (version 1.5.2) doesn't find my script <code>sorting</code> in <code>/etc/elasticsearch/scripts/</code>. I gave the folder and the file itself file permissions for ES and have in my elasticsearch.yml: </p>&#xA;&#xA;<p><code>path.conf: /etc/elasticsearch</code></p>&#xA;&#xA;<p>Still I get a <em>ElasticsearchIllegalArgumentException[Unable to find on disk script sorting]</em> when querying:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "script": {&#xA;          "file": "sorting",&#xA;          "lang": "groovy"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Do I have to enable scripts from disc somehow?</p>&#xA;
<p>Your scripts should be placed in <code>/scripts</code> folder, under <code>/config</code> one and it should have a <code>.groovy</code> extension. From <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.6/modules-scripting.html#modules-scripting" rel="nofollow">the documentation</a>:</p>&#xA;&#xA;<blockquote>&#xA;  <p>Save the contents of the script as a file called <code>config/scripts/my_script.groovy</code> on every data node in the cluster</p>&#xA;</blockquote>&#xA;&#xA;<p>And, also, your query should use <code>script_file</code> not <code>file</code>:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "script": {&#xA;          "script_file": "sorting",&#xA;          "lang": "groovy"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;
<p>The script may be missing because the script was rejected by elastic search.</p>&#xA;&#xA;<p>Tail your elasticsearch log file and ensure that no errors are thrown when the script file is saved.</p>&#xA;