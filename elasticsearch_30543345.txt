30543345
date not parsing correct in elasticsearch
<p>In Elasticsearch,My index "records" and type "records".This index type contains some documents.&#xA;Structure of index type mapping </p>&#xA;&#xA;<pre><code>"mappings": {&#xA;&#xA;    "records": {&#xA;        "date_detection": false,&#xA;        "properties": {&#xA;            "dateModified": {&#xA;                "format": "dd/mm/yyyy",&#xA;                "type": "date"&#xA;            },&#xA;            "org": {&#xA;                "type": "string"&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>My documents are </p>&#xA;&#xA;<pre><code>{&#xA;    "org": "pm",&#xA;    "dateModified": "01/12/2015"&#xA;},&#xA;{&#xA;    "org": "muthuraj",&#xA;    "dateModified": "10/01/2013"&#xA;&#xA;},&#xA;{&#xA;    "org": "user",&#xA;    "dateModified": "12/05/2015"&#xA;&#xA;},&#xA; {&#xA;    "org": "satish",&#xA;    "dateModified": "2/05/2014"&#xA;&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>and I write query to get document dateModified > "02/05/2013"</p>&#xA;&#xA;<pre><code>{&#xA;    "query": {&#xA;        "bool": {&#xA;            "must": [&#xA;                {&#xA;                    "range": {&#xA;                        "records.dateModified": {&#xA;                            "gt": "02/05/2013"&#xA;                        }&#xA;                    }&#xA;                }&#xA;            ]&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>and I get result  like&#xA;{</p>&#xA;&#xA;<pre><code>"took": 14,&#xA;"timed_out": false,&#xA;"_shards": {&#xA;    "total": 2,&#xA;    "successful": 2,&#xA;    "failed": 0&#xA;},&#xA;"hits": {&#xA;    "total": 4,&#xA;    "max_score": 1,&#xA;    "hits": [&#xA;        {&#xA;            "_index": "records",&#xA;            "_type": "records",&#xA;            "_id": "NXD8t3TSQxev2WMcNTdchQ",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;                "org": "pm",&#xA;                "dateModified": "01/12/2015"&#xA;            }&#xA;        }&#xA;        ,&#xA;        {&#xA;            "_index": "records",&#xA;            "_type": "records",&#xA;            "_id": "vyxdivH8RLujCFSNWMQTdg",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;                "org": "muthuraj",&#xA;                "dateModified": "10/01/2013"&#xA;            }&#xA;        }&#xA;        ,&#xA;        {&#xA;            "_index": "records",&#xA;            "_type": "records",&#xA;            "_id": "QqDTULhwSqOGykYCOOrcHw",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;                "org": "user",&#xA;                "dateModified": "12/05/2015"&#xA;            }&#xA;        }&#xA;        ,&#xA;        {&#xA;            "_index": "records",&#xA;            "_type": "records",&#xA;            "_id": "btPGMDPgRPimNgLHK2y2OA",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;                "org": "satish",&#xA;                "dateModified": "2/05/2014"&#xA;            }&#xA;        }&#xA;    ]&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>}</p>&#xA;&#xA;<p>"dateModified": "10/01/2013" This is less than "2/05/2015" but this also getting in result why it is coming like this.&#xA;How to solve this problem</p>&#xA;
<p>There are a couple of issues with what you posted (your mapping isn't structured properly, and the document you posted would not be returned by your query in any case), but maybe those are just artifacts of the way you posted your question.</p>&#xA;&#xA;<p>What you're trying to do worked for me. First I created a simple index with your mapping (properly structured, with type name <code>"doc"</code>):</p>&#xA;&#xA;<pre><code>DELETE /test_index&#xA;&#xA;PUT /test_index&#xA;{&#xA;   "mappings": {&#xA;      "doc": {&#xA;         "date_detection": false,&#xA;         "properties": {&#xA;            "dateCreated": {&#xA;               "properties": {&#xA;                  "date": {&#xA;                     "type": "date",&#xA;                     "format": "dd/mm/yyyy"&#xA;                  },&#xA;                  "time": {&#xA;                     "type": "string"&#xA;                  }&#xA;               }&#xA;            },&#xA;            "dateModified": {&#xA;               "type": "date",&#xA;               "format": "dd/mm/yyyy"&#xA;            }&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Then indexed a couple of documents:</p>&#xA;&#xA;<pre><code>PUT /test_index/doc/1&#xA;{&#xA;   "Project": "02ff5704273e",&#xA;   "ProjectSpace": "tigerPark",&#xA;   "relationDesc": [&#xA;      "Project-hasSpace-recordId",&#xA;      "recordId-forProject-Project"&#xA;   ],&#xA;   "org": "user",&#xA;   "docType": "ProjectSpace",&#xA;   "dateCreated": {&#xA;      "date": "22/05/2015",&#xA;      "time": "18:28 IST"&#xA;   },&#xA;   "dateModified": "22/05/2015",&#xA;   "revision": 1&#xA;}&#xA;&#xA;PUT /test_index/doc/2&#xA;{&#xA;   "Project": "02ff5704273e",&#xA;   "ProjectSpace": "tigerPark",&#xA;   "relationDesc": [&#xA;      "Project-hasSpace-recordId",&#xA;      "recordId-forProject-Project"&#xA;   ],&#xA;   "org": "user",&#xA;   "docType": "ProjectSpace",&#xA;   "dateCreated": {&#xA;      "date": "30/05/2015",&#xA;      "time": "18:28 IST"&#xA;   },&#xA;   "dateModified": "30/05/2015",&#xA;   "revision": 1&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Then when I ran your query, the correct document was returned:</p>&#xA;&#xA;<pre><code>POST /test_index/_search&#xA;{&#xA;   "query": {&#xA;      "range": {&#xA;         "dateModified": {&#xA;            "gt": "28/05/2015"&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;...&#xA;{&#xA;   "took": 29,&#xA;   "timed_out": false,&#xA;   "_shards": {&#xA;      "total": 5,&#xA;      "successful": 5,&#xA;      "failed": 0&#xA;   },&#xA;   "hits": {&#xA;      "total": 1,&#xA;      "max_score": 1,&#xA;      "hits": [&#xA;         {&#xA;            "_index": "test_index",&#xA;            "_type": "doc",&#xA;            "_id": "2",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;               "Project": "02ff5704273e",&#xA;               "ProjectSpace": "tigerPark",&#xA;               "relationDesc": [&#xA;                  "Project-hasSpace-recordId",&#xA;                  "recordId-forProject-Project"&#xA;               ],&#xA;               "org": "user",&#xA;               "docType": "ProjectSpace",&#xA;               "dateCreated": {&#xA;                  "date": "30/05/2015",&#xA;                  "time": "18:28 IST"&#xA;               },&#xA;               "dateModified": "30/05/2015",&#xA;               "revision": 1&#xA;            }&#xA;         }&#xA;      ]&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>So your problem would appear to be somewhere else. I don't think it matters here, but I used Elasticsearch 1.5.1.</p>&#xA;&#xA;<p>Here is all the code I used:</p>&#xA;&#xA;<p><a href="http://sense.qbox.io/gist/2a97abc1530060b02f3b1a68ab81e5cd84bff915" rel="nofollow">http://sense.qbox.io/gist/2a97abc1530060b02f3b1a68ab81e5cd84bff915</a></p>&#xA;
<p>The issue is <code>"format": "dd/mm/yyyy"</code>. ES thinks <code>mm</code> refers to minutes, so you need to use <code>MM</code>. I've always found date formatting in ES to be a little confusing and not very well-documented, but it's quite powerful. You might take a look at this <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-date-format.html" rel="nofollow">reference</a>.</p>&#xA;&#xA;<p>Using the second version of your question, I can set up an index like this:</p>&#xA;&#xA;<pre><code>DELETE /test_index&#xA;&#xA;PUT /test_index&#xA;{&#xA;   "settings": {&#xA;      "number_of_shards": 1&#xA;   },&#xA;   "mappings": {&#xA;      "records": {&#xA;         "date_detection": false,&#xA;         "properties": {&#xA;            "dateModified": {&#xA;               "format": "dd/MM/yyyy",&#xA;               "type": "date"&#xA;            },&#xA;            "org": {&#xA;               "type": "string"&#xA;            }&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;&#xA;POST /test_index/records/_bulk&#xA;{"index":{"_id":1}}&#xA;{"org": "pm","dateModified": "01/12/2015"}&#xA;{"index":{"_id":2}}&#xA;{"org": "muthuraj","dateModified": "10/01/2013"}&#xA;{"index":{"_id":3}}&#xA;{"org": "user","dateModified": "12/05/2015"}&#xA;{"index":{"_id":4}}&#xA;{"org": "satish","dateModified": "2/05/2014"}&#xA;</code></pre>&#xA;&#xA;<p>Then the query works as expected:</p>&#xA;&#xA;<pre><code>POST /test_index/_search&#xA;{&#xA;   "query": {&#xA;      "bool": {&#xA;         "must": [&#xA;            {&#xA;               "range": {&#xA;                  "records.dateModified": {&#xA;                     "gt": "02/05/2013"&#xA;                  }&#xA;               }&#xA;            }&#xA;         ]&#xA;      }&#xA;   }&#xA;}&#xA;...&#xA;{&#xA;   "took": 2,&#xA;   "timed_out": false,&#xA;   "_shards": {&#xA;      "total": 1,&#xA;      "successful": 1,&#xA;      "failed": 0&#xA;   },&#xA;   "hits": {&#xA;      "total": 3,&#xA;      "max_score": 1,&#xA;      "hits": [&#xA;         {&#xA;            "_index": "test_index",&#xA;            "_type": "records",&#xA;            "_id": "1",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;               "org": "pm",&#xA;               "dateModified": "01/12/2015"&#xA;            }&#xA;         },&#xA;         {&#xA;            "_index": "test_index",&#xA;            "_type": "records",&#xA;            "_id": "3",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;               "org": "user",&#xA;               "dateModified": "12/05/2015"&#xA;            }&#xA;         },&#xA;         {&#xA;            "_index": "test_index",&#xA;            "_type": "records",&#xA;            "_id": "4",&#xA;            "_score": 1,&#xA;            "_source": {&#xA;               "org": "satish",&#xA;               "dateModified": "2/05/2014"&#xA;            }&#xA;         }&#xA;      ]&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Here's the code:</p>&#xA;&#xA;<p><a href="http://sense.qbox.io/gist/24e468f010ef9323e5974b1e0534c755cb097cfd" rel="nofollow">http://sense.qbox.io/gist/24e468f010ef9323e5974b1e0534c755cb097cfd</a></p>&#xA;