34507111
analyzer for spelling mistakes
<p>I have saved the user inputs directly in elastcisearch. The name field has various spelling combinations for the same student.</p>&#xA;&#xA;<pre><code>PrabhuNath Prasad&#xA;PrabhuNathPrasad&#xA;Prabhu NathPrasad&#xA;&#xA;Prabhu Nath Prashad&#xA;PrabhuNath Prashad&#xA;PrabhuNathPrashad&#xA;Prabhu NathPrashad&#xA;</code></pre>&#xA;&#xA;<p>The real name of the student is "<strong>Prabhu Nath Prasad</strong>" and when I search by that name, I should get all the above results back. Is there any analyzer in elasticsearch that can take care of it?</p>&#xA;
<p>There is no analyzer for that however, what you can look into is the "fuzzy"..</p>&#xA;&#xA;<p>In your query specify the fuzziness which can help you in getting the above record.</p>&#xA;&#xA;<p>I will Suggest you to go through the links below</p>&#xA;&#xA;<p><a href="https://www.elastic.co/blog/found-fuzzy-search" rel="nofollow">https://www.elastic.co/blog/found-fuzzy-search</a></p>&#xA;&#xA;<p><a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/fuzzy-match-query.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/guide/current/fuzzy-match-query.html</a></p>&#xA;&#xA;<p><a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/fuzziness.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/guide/current/fuzziness.html</a></p>&#xA;&#xA;<p>This will help you achieve what you want.</p>&#xA;&#xA;<p>Also there wont be any straight way to get the record if the user have typed "PrabhuNath", because elastic will treat it as a single token, however you can use "phrase_prefix" query which help you fetch records while the user is typing..</p>&#xA;&#xA;<p>Your query will look like this to get the basic spelling mistake</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "match": {&#xA;      "name": {&#xA;        "query":"PrabhuNath Prasad",&#xA;        "fuzziness": 2&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;
<p>You could do that <code>custom_analyzer</code>, This is my setup</p>&#xA;&#xA;<pre><code>POST name_index&#xA;{&#xA;  "settings": {&#xA;    "analysis": {&#xA;      "analyzer": {&#xA;        "my_custom_analyzer": {&#xA;          "char_filter": [&#xA;            "space_removal"&#xA;          ],&#xA;          "tokenizer": "keyword",&#xA;          "filter": [&#xA;            "lowercase",&#xA;            "asciifolding"&#xA;          ]&#xA;        }&#xA;      },&#xA;      "char_filter": {&#xA;        "space_removal": {&#xA;          "type": "pattern_replace",&#xA;          "pattern": "\\s+",&#xA;          "replacement": ""&#xA;        }&#xA;      }&#xA;    }&#xA;  },&#xA;  "mappings": {&#xA;    "your_type": {&#xA;      "properties": {&#xA;        "name": {&#xA;          "type": "string",&#xA;          "fields": {&#xA;            "variation": {&#xA;              "type": "string",&#xA;              "analyzer": "my_custom_analyzer"&#xA;            }&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I have mapped <code>name</code> with both <code>standard analyzer</code> and <code>custom_analyzer</code> which uses <code>keyword tokenizer</code> and <code>lowercase filter</code> along with <code>char_filter</code> which removes space and joins the string. This <code>char_filter</code> will help us query different variations effectively.</p>&#xA;&#xA;<p>I inserted all those 7 combinations you have given in index. This is my query</p>&#xA;&#xA;<pre><code>GET name_index/_search&#xA;{&#xA;  "query": {&#xA;    "bool": {&#xA;      "should": [&#xA;        {&#xA;          "match": {&#xA;            "name": "Prabhu Nath Prasad"&#xA;          }&#xA;        },&#xA;        {&#xA;          "match": {&#xA;            "name.variation": {&#xA;              "query": "Prabhu Nath Prasad",&#xA;              "fuzziness": "AUTO"&#xA;            }&#xA;          }&#xA;        }&#xA;      ]&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>This handles all your possibilities and it will also give back <em>prabhu</em>, <em>prasad</em> etc.</p>&#xA;&#xA;<p>Hope this helps!!</p>&#xA;