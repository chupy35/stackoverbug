33126209
ElasticSearch object filter not working
<p>I try to create mappings and indexes by using Jest.&#xA;After I inserted some data, I tried to filter the query and It didn't work. </p>&#xA;&#xA;<p>I have an object mapping like this:</p>&#xA;&#xA;<pre><code>http://localhost:9200/contacts?pretty=true&#xA;"contacts" : {&#xA;  ...&#xA;     "mappings" : {&#xA;        "contact" : {&#xA;            "properties" : {&#xA;              ...&#xA;              "user" : {&#xA;                 "properties" : {&#xA;                   "id" : {&#xA;                   "type" : "long"&#xA;                  },&#xA;                  "uuid" : {&#xA;                    "type" : "string"&#xA;                  }&#xA;               }&#xA;            }&#xA;        }&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>Data: </p>&#xA;&#xA;<pre><code>{&#xA;  "_index" : "contacts",&#xA;  "_type" : "contact",&#xA;  "_id" : "131530ff-d125-47c1-8fae-f48f2def9037",&#xA;  "_version" : 1,&#xA;  "found" : true,&#xA;  "_source":{"id":"131530ff-d125-47c1-8fae-f48f2def9037","shared":false,"favourite":false,"user":{"id":1,"uuid":"AB353469"}}&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>My query:</p>&#xA;&#xA;<pre><code>http://localhost:9200/contacts/_search&#xA;{&#xA;  "query":{  &#xA;     "filtered":{  &#xA;         ...&#xA;         "filter":{&#xA;            "term" : { &#xA;            "user.uuid" : "AB353469" }&#xA;          }&#xA;     }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Response:</p>&#xA;&#xA;<pre><code>{&#xA;  "took": 14,&#xA;  "timed_out": false,&#xA;  "_shards": {&#xA;    "total": 5,&#xA;    "successful": 5,&#xA;    "failed": 0&#xA;  },&#xA;  "hits": {&#xA;     "total": 0,&#xA;     "max_score": null,&#xA;     "hits": []&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Could you please tell me why It didn't work? &#xA;Thank you very much!</p>&#xA;&#xA;<p>P.S:&#xA;- Elasticsearch version: 1.7.2</p>&#xA;
<p>Change initiatorUuid mapping from</p>&#xA;&#xA;<pre><code>              "initiatorUuid" : {&#xA;                "type" : "string"&#xA;              }&#xA;</code></pre>&#xA;&#xA;<p>to</p>&#xA;&#xA;<pre><code>              "initiatorUuid" : {&#xA;                "type" : "string",&#xA;                "index": "not_analyzed"&#xA;              }&#xA;</code></pre>&#xA;&#xA;<p>re-create the index, re-index the documents and try again.</p>&#xA;