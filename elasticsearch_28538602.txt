28538602
Mapping a field to geo-point after indexing data in elastic-search
<p>I have already created index and imported data into index, but without mapping. My data has a filed "geolocatoin":"lat,lng". Now i want to run geo-spatial queries based on geolocation. So i mapped the filed geolocation to geo-point using the following curl command:</p>&#xA;&#xA;<pre><code>curl -XPUT 'http://localhost:9200/index/place/_mapping?ignore_conflicts=true' -d '&#xA;{    &#xA;    "place" : {&#xA;        "properties" : {        &#xA;        "geolocation" : { "type" : "geo_point" }        &#xA;        }&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>i got <code>{"acknowledged":true}</code> as response. </p>&#xA;&#xA;<p>but when i tried to run geo-spatial query, it throws the error </p>&#xA;&#xA;<pre><code>field [geolocation] is not a geo_point field]; &#xA;</code></pre>&#xA;&#xA;<p>So. whether i have reindex after mapping. But reindexing is not possible because its a large dataset. How can i accomplish this. Please share your ideas....</p>&#xA;
<p>I think that you must reindex after mapping for some mapping type. You can try write a script to update all documents to move your old field to new field with good mapping.</p>&#xA;&#xA;<p>If your index is used for the production, you can try create an alias to your current index and you use it in your program. You create a new index with good mapping and after reindex, you switch your alias on your index.</p>&#xA;