33398459
How do I add an attribute to an Elasticsearch node for the purpose of Shard Allocation Filtering?
<p>I am attempting to follow the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/index-modules-allocation.html#shard-allocation-filtering" rel="nofollow">reference guide</a> to make sure certain indexes end up on certain machines. I am attempting to give 2 of my nodes an attribute named "storage_type", where one node gets "long_term" and one gets "short_term". </p>&#xA;&#xA;<p>I understand that I need to add the attribute of "storage_type" to each oo the nodes, and then set each index to have <code>{"index.routing.allocation.require.tag" : "short"}</code> or <code>{"index.routing.allocation.require.tag" : "long"}</code> respectively. </p>&#xA;&#xA;<p>I have attempted to add these settings via curl calls, like most ES things, but it does not appear that I could <code>PUT</code> settings. IE: <code>curl -XPUT localhost:9200/_nodes/my_node_name/_settings -d '{"storage_term" : "short_term"}'</code></p>&#xA;&#xA;<p>So how do I add these attributes such as "storage_type" (which is n to nodes? Is it a config file? A command line argument? An http call that I'm missing?</p>&#xA;
<p>It's not to be done through <code>curl</code> calls. You need to use <code>elasticsearch.yml</code>.</p>&#xA;&#xA;<ul>&#xA;<li>in <code>elasticsearch.yml</code>:</li>&#xA;</ul>&#xA;&#xA;&#xA;&#xA;<pre><code>node.storage_term: short_term&#xA;</code></pre>&#xA;
<p>Since version <code>5.0</code> node attributes are to be set via <strong><code>node.attr.</code></strong>:</p>&#xA;&#xA;<pre><code>node.attr.storage_term: short_term&#xA;</code></pre>&#xA;&#xA;<p>See <a href="https://www.elastic.co/guide/en/elasticsearch/reference/5.0/shard-allocation-filtering.html" rel="nofollow noreferrer">Shard Allocation Filtering</a> section of the official reference.</p>&#xA;