29095730
Elasticsearch : Multiple conditions in query string
<p>I am using the following JSON for applying multiple conditions in the search query.</p>&#xA;&#xA;<pre><code>GET my_index/my_type/_search&#xA;{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "query": {&#xA;        "query_string": {&#xA;          "default_field : "andi_new"&#xA;          "query": "network:onenetwork AND publisher:someplublisher"&#xA;        }&#xA;      },&#xA;      "filter": {&#xA;        "range": {&#xA;          "time": {&#xA;            "gte": "2015-03-12 00:00:00",&#xA;            "lte": "2015-03-12 23:59:59"&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I am selecting the filter values based on a drop down in my PHP web application. So all the filters are not applied once.</p>&#xA;&#xA;<p>If I have only condition in the quesry string query, everything is working fine. Also if i include OR then also it is working. But when I add 'AND' and provide another column condition as shown above, it is not working. Is there any other filter for applying different conditions ?</p>&#xA;
<p>You are missing a closing double inverted quote after <code>default_field</code> and a comma at the end of that line. Try the query below:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "query": {&#xA;        "query_string": {&#xA;          "default_field" : "andi_new",&#xA;          "query": "network:onenetwork AND publisher:someplublisher"&#xA;        }&#xA;      },&#xA;      "filter": {&#xA;        "range": {&#xA;          "time": {&#xA;            "gte": "2015-03-12 00:00:00",&#xA;            "lte": "2015-03-12 23:59:59"&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;