33726961
elastic error while setting mapping
<p>I am getting this error while trying to set mapping..</p>&#xA;&#xA;<p>Compressor detection can only be called on some xcontent bytes or compressed xcontent bytes</p>&#xA;&#xA;<pre><code>XContentBuilder mapping = XContentFactory.jsonBuilder()&#xA;                    .startObject("mydocuments")&#xA;                    .startObject("mytype")&#xA;                    .startObject("properties")&#xA;                    .startObject("blob_field")&#xA;                    .field("type", "string")&#xA;                    .field("index", "not_analyzed")&#xA;                    .endObject()&#xA;                    .endObject()&#xA;                    .endObject()&#xA;                    .endObject();&#xA;            PutMappingResponse putMappingResponse = client.admin().indices()&#xA;                    .preparePutMapping("mydocuments")&#xA;                    .setType("mytype")&#xA;                    .setSource(mapping)&#xA;                    .execute().actionGet();&#xA;</code></pre>&#xA;
<p>Is this with Elasticsearch 2.0? In 2.0 they no longer shade dependencies. Add the required Jackson dependencies to your classpath and the error may be resolved.</p>&#xA;
<p>You need to convert your mapping object to a string first</p>&#xA;&#xA;<pre><code>XContentBuilder mapping = XContentFactory.jsonBuilder()&#xA;                .startObject("mydocuments")&#xA;                .startObject("mytype")&#xA;                .startObject("properties")&#xA;                .startObject("blob_field")&#xA;                .field("type", "string")&#xA;                .field("index", "not_analyzed")&#xA;                .endObject()&#xA;                .endObject()&#xA;                .endObject()&#xA;                .endObject();&#xA;&#xA;        PutMappingResponse putMappingResponse = client.admin().indices()&#xA;                .preparePutMapping("mydocuments")&#xA;                .setType("mytype")&#xA;                .setSource(mapping.string())      &lt;---- transform to string&#xA;                .execute().actionGet();&#xA;</code></pre>&#xA;
<p>Could you print your request body and try it in command line? Try to print this:</p>&#xA;&#xA;<pre><code>client.admin().indices()&#xA;                .preparePutMapping("mydocuments")&#xA;                .setType("mytype")&#xA;                .setSource(mapping)&#xA;</code></pre>&#xA;