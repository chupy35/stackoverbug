31701229
How to efficiently move data from elasticsearch index (with one shard) to another index (with 5 shards)?
<p>I have an elasticsearch index which contains around 5 GB of data on a single node in a single shard. Now I have created another index with same settings as older one, but with number_of_shards as 5 instead of 1. </p>&#xA;&#xA;<p>I am looking for the most efficient approach to copy the data from older index to newer index without any downtime. </p>&#xA;
<p>I would suggest using <a href="https://www.elastic.co/guide/en/logstash/current/index.html" rel="nofollow">Logstash</a> for this. You could use the following configuration. Make sure to replace the source and target hosts, as well as the index and type names to match your local environment.</p>&#xA;&#xA;<p><strong>File: reindex.conf</strong></p>&#xA;&#xA;<pre><code>input {&#xA;  elasticsearch {&#xA;   hosts =&gt; "localhost:9200"       &lt;---- your source host&#xA;   index =&gt; "my_source_index"&#xA;  }&#xA;}&#xA;filter {&#xA; mutate {&#xA;  remove_field =&gt; [ "@version", "@timestamp" ]&#xA; }&#xA;}&#xA;output {&#xA; elasticsearch {&#xA;   host =&gt; "localhost"       &lt;--- your target host&#xA;   port =&gt; 9200&#xA;   protocol =&gt; "http"&#xA;   manage_template =&gt; false&#xA;   index =&gt; "my_target_index"&#xA;   document_type =&gt; "my_type"&#xA;   workers =&gt; 5&#xA; }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>And then you can simply launch it with</p>&#xA;&#xA;<pre><code>bin/logstash -f reindex.conf&#xA;</code></pre>&#xA;