31771110
Elasticsearch simple contains search using Java API
<p>I'm trying to play with Java API of Elastic Search and struggling to find the right querybuilder to use.</p>&#xA;&#xA;<p>My JSON has got fields like: name, description etc.</p>&#xA;&#xA;<p>My JSON (One sample):</p>&#xA;&#xA;<pre><code>{ &#xA;    "_id" : { "$oid" : "5160988c96cc620a5db6dafa" },&#xA;    "name" : "Spinach Strata Recipe", &#xA;    "ingredients" : "8 ounces day-old crusty bread, such as pain au levain, large dice (about 6 cups)\n2 cups coarsely chopped baby spinach leaves (about 3 1/2 ounces)\n3/4 cup crumbled provolone cheese (about 3 3/4 ounces)\n2 tablespoons extra-virgin olive oil, plus more for coating the pan\n1 tablespoon finely grated lemon zest (from about 1 medium lemon)\n2 teaspoons Dijon mustard\n1/8teaspoon kosher salt\n1/2 teaspoon freshly ground black pepper\n6 ex   large eggs\n2 cups whole milk\n1/2 teaspoon finely chopped fresh oregano leaves", &#xA;    "url" : "http://www.chow.com/users/recipes/29915-spinach-strata",     &#xA;    "image" : null,&#xA;    "ts" : { "$date" : 1365285004038 },&#xA;    "cookTime" : null,&#xA;    "source" : "chow",&#xA;    "recipeYield" : "6 servings",&#xA;    "prepTime" : null,&#xA;    "description" : "Aside from being comforting and filling, stratas are really easy to make. Whisked eggs and milk are poured over bread and your favorite fillings, then everything..." &#xA;}&#xA;</code></pre>&#xA;&#xA;<p>This is how I"m indexing:</p>&#xA;&#xA;<pre><code>Settings settings = ImmutableSettings.settingsBuilder().put("cluster.name", "elasticsearch_sai").build();&#xA;    final TransportClient client = new TransportClient(settings);&#xA;    Client _client = client.addTransportAddress(new InetSocketTransportAddress("localhost", Integer.parseInt("9300")));&#xA;    reader.lines().limit(10000).forEach(json -&gt; {&#xA;        IndexResponse response = _client.prepareIndex("openrecipe", "recipe")&#xA;                .setSource(json)&#xA;                .execute()&#xA;                .actionGet();&#xA;     System.out.println("Indexed: "+response.getId()+" --&gt; "+response.isCreated());&#xA;    });&#xA;&#xA;    _client.admin().indices().prepareRefresh().execute().actionGet()   ;&#xA;</code></pre>&#xA;&#xA;<p>I want to search all the documents which has got the word sandwich in the name field (case insensitive).</p>&#xA;&#xA;<p>But this doesn't work:</p>&#xA;&#xA;<pre><code>   SearchResponse response = _client.prepareSearch("openrecipe")        &#xA;       .setTypes("recipe")                                          &#xA;       .setFrom(0).setSize(60)                                      &#xA;       .setSearchType(SearchType.QUERY_AND_FETCH)                   &#xA;       .setQuery(QueryBuilders.termQuery("name", "sandwich"))       &#xA;       .execute()                                                   &#xA;       .actionGet();                                                &#xA;</code></pre>&#xA;