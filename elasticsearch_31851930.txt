31851930
Update ElasticSearch Mapping type without delete it
<p>I have this mapping type on my Index.</p>&#xA;&#xA;<pre><code>{&#xA;    "iotsens-summarizedmeasures": {&#xA;        "mappings": {&#xA;            "summarizedmeasure": {&#xA;                "properties": {&#xA;                    "id": {&#xA;                        "type": "long"&#xA;                    },&#xA;                    "location": {&#xA;                        "type": "boolean"&#xA;                    },&#xA;                    "rawValue": {&#xA;                        "type": "string"&#xA;                    },&#xA;                    "sensorId": {&#xA;                        "type": "string"&#xA;                    },&#xA;                    "summaryTimeUnit": {&#xA;                        "type": "string"&#xA;                    },&#xA;                    "timestamp": {&#xA;                        "type": "date",&#xA;                        "format": "dateOptionalTime"&#xA;                    },&#xA;                    "value": {&#xA;                        "type": "string"&#xA;                    },&#xA;                    "variableName": {&#xA;                        "type": "string"&#xA;                    }&#xA;                }&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>I want to update <code>sensorId</code> field to.</p>&#xA;&#xA;<pre><code>"sensorId": {&#xA;    "type": "string",&#xA;    "index": "not_analyzed"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Is there any way to update the index without delete and re-mapping it? I don't have to change type of field, I only set <code>"index": "not_analyzed"</code>.</p>&#xA;&#xA;<p>Thanks you.</p>&#xA;
<p>What you can do is make a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-core-types.html#_multi_fields_3" rel="nofollow">multi-field</a> out of your existing <code>sensorId</code> field like this with a sub-field called <code>raw</code> which is <code>not_analyzed</code>:</p>&#xA;&#xA;<pre><code>curl -XPUT localhost:9200/iotsens-summarizedmeasures/_mapping/summarizedmeasure -d '{&#xA;    "summarizedmeasure": {&#xA;        "properties": {&#xA;            "sensorId": {&#xA;                "type": "string",&#xA;                "fields": {&#xA;                    "raw": {&#xA;                        "type": "string",&#xA;                        "index": "not_analyzed"&#xA;                    }&#xA;                }&#xA;            }&#xA;        }&#xA;    }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>However, you still have to re-index your data to make sure all <code>sensorId.raw</code> sub-fields get created.</p>&#xA;