29378839
parent-child documents relation retrieval
<p>could you help me with little problem regarding parent-child documents relation?</p>&#xA;&#xA;<p>Considering JSON, I have objects, each of them contains an array of sub-objects. Sub-objects contain some text fields.&#xA;I need to maintain full-text-search on these objects and construct snippets. I need highlighting for building snippets.&#xA;If I use nested objects, highlighting does not deal with them.&#xA;Therefore, I use Parent-Child relationships.</p>&#xA;&#xA;<p>Now I need to retrieve Parent-documents, which children match the query_string. Furthermore, I need to get highlighted fields of matched children and associate each one(each child) with corresponding parent to construct snippets in my application.</p>&#xA;&#xA;<p>Is it possible to accomplish my goal in one query?</p>&#xA;
<p>I think that you should consider using the <code>children</code> aggregation. With that you can retrieve children items within their parents. It's aggregation so you are not able to get the whole document (just id) but with that you retrieve the relationship... Then with another query you can get document details quickly.</p>&#xA;&#xA;<p>Link here : <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-children-aggregation.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-children-aggregation.html</a></p>&#xA;&#xA;<p>And more details : <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/children-agg.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/guide/current/children-agg.html</a></p>&#xA;