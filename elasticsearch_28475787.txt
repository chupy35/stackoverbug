28475787
time difference in elasticsearch took and that calculated manually
<p>Hi i can't figure out why there is such difference in ES time and query time.</p>&#xA;&#xA;<pre><code>var url = "192.168.100.11:9200";&#xA;var elasticsearch = require('elasticsearch');&#xA;&#xA;var client = new elasticsearch.Client({&#xA;    host: url&#xA;});&#xA;var accounts = [];   &#xA;var startTime = new Date();&#xA;client.search({"index":"test", "type":"testdata1", searchType:"count"}).then(&#xA;    function (searchData) {&#xA;        var endDate = new Date();&#xA;        console.log(" total time : [" + (endDate - startTime) + "]")&#xA;        console.log(" ES   &gt;&gt;&gt;&gt;&gt; :" + JSON.stringify(searchData.took));&#xA;    }).catch(function (err) {&#xA;        console.log(" errr  &gt;&gt;&gt;&gt; :" + err);&#xA;    });&#xA;</code></pre>&#xA;&#xA;<p>Output:</p>&#xA;&#xA;<blockquote>&#xA;  <p>total time : [37]</p>&#xA;  &#xA;  <p>ES   >>>>> :2</p>&#xA;</blockquote>&#xA;&#xA;<p>As u can see, es result took shows query was executed in 2 ms, but if i calculate total time taken to run in code , it took 37ms. What took 35ms ?</p>&#xA;
<p>According to <a href="https://discuss.elastic.co/t/query-timing-took-value-and-what-im-measuring/9870/2" rel="nofollow noreferrer">this thread</a>, the 'took' value measures wall time of query execution in Elasticsearch, which includes queue waiting time but excludes </p>&#xA;&#xA;<ul>&#xA;<li>serializing the request into JSON on the client</li>&#xA;<li>sending the request over the network</li>&#xA;<li>deserializing the request from JSON on the server</li>&#xA;<li>serializing the response into JSON on the server</li>&#xA;<li>sending the response over the network </li>&#xA;<li>deserializing the response from JSON on the client</li>&#xA;</ul>&#xA;