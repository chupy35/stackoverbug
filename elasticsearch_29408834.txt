29408834
ElasticSearch: How to disable shard reallocation of all shards?
<p>I developed a search plugin for elasticsearch, but when upgrading this plugin, i need to shutdown the nodes one by one, and each time i have to wait for the reallocation process a long time. &#xA;In the document, it said the reallocation process can be stopped by:</p>&#xA;&#xA;<pre><code>curl -XPUT localhost:9200/_cluster/settings -d '{&#xA;    "transient" : {&#xA;           "cluster.routing.allocation.enable" : "none"&#xA;     }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>When I run this command, i got following error:</p>&#xA;&#xA;<pre><code>ElasticsearchIllegalArgumentException[Can't update non dynamic settings[[index.transient.cluster.routing.allocation.enable]] for open indices[..]&#xA;</code></pre>&#xA;&#xA;<p>What can i do?</p>&#xA;&#xA;<p>btw:&#xA;sorry for my poor english...</p>&#xA;
<p>So close!</p>&#xA;&#xA;<p>Try:</p>&#xA;&#xA;<pre><code>curl -XPUT 'http://localhost:9200/_cluster/settings' -d '{&#xA;"transient" : {&#xA;    "cluster.routing.allocation.disable_allocation": "true"&#xA;}}'&#xA;</code></pre>&#xA;