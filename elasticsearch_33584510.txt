33584510
return only source data from elasticsearch query
<p>I post a query to elasticsearch get data of index.. I only need these fields data and how many documents found information... but there is "took","shards" and inside of a document "_id","_index","_score". these are un necessary for my purpose..</p>&#xA;&#xA;<p>Here my simple request:</p>&#xA;&#xA;<pre><code>query='{"query": {"match_all": {}}}';&#xA; $.ajax({&#xA;        url: "http://localhost:9200/webproxylog/_search?source=" + query,&#xA;        type:"GET",&#xA;        dataType: "json",&#xA;        data: $.param(params),&#xA;        success: function(data) {...&#xA;</code></pre>&#xA;&#xA;<p>I check the response data in success method here how it seems:&#xA;<a href="https://i.stack.imgur.com/4LCdX.png" rel="noreferrer"><img src="https://i.stack.imgur.com/4LCdX.png" alt="enter image description here"></a></p>&#xA;&#xA;<p>I just want to get hits which documents in, and in documents I just want to "_source" object that have fields data."took","shards","_id","_index", unneccessary, how can I disable them</p>&#xA;
<p>Just use the <a href="https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/index.html" rel="nofollow">ElasticJS</a>, the API recommended by ElasticSearch will help JS client to communicate easily with elasticsearch nodes. You will save a lot of time by using this API.</p>&#xA;
<p>You can't turn off the response meta-data. You can return <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-request-fields.html" rel="nofollow noreferrer"><code>fields</code></a> instead of <code>_source</code> if you only want specific fields, but that doesn't really decrease the complexity. The library can abstract some of that away, but I don't find it terribly difficult to simply parse the ES responses directly.</p>&#xA;&#xA;<p>You do, of course, have to write a little JavaScript. Luckily it's not too hard. Something like this usually works nicely for me:</p>&#xA;&#xA;<pre><code>var results = es_response_data['hits']['hits'].map(function(i){&#xA;    return i['_source']; &#xA;});&#xA;</code></pre>&#xA;
<p>Yes you can remove the extra fields from _source </p>&#xA;&#xA;<p>Answer is just one simple word <strong><code>filter_path</code></strong></p>&#xA;&#xA;<p><strong>Curl :</strong></p>&#xA;&#xA;<pre><code>curl -XGET 'http://localhost:9200/webproxylog/_search?filter_path=hits.hits._source'&#xA;</code></pre>&#xA;&#xA;<p><strong>Node :</strong></p>&#xA;&#xA;<p>If you are using any node '<code>elasticsearch</code>' you need to add just one extrs param <code>filterPath</code></p>&#xA;&#xA;<pre><code>client.search({&#xA;        index: 'index',&#xA;        type: 'type',&#xA;        filterPath : ['hits.hits._source'], // this will remove extra fileds _index / _score / _id ...&#xA;        body: {&#xA;            sort: [&#xA;                {"posted_dt": {"order": "desc"}},&#xA;                "_score"&#xA;            ],&#xA;            query: query,&#xA;            size: 50,&#xA;            from: index * 50&#xA;        }&#xA;    }&#xA;</code></pre>&#xA;&#xA;<p><strong>In your case :</strong></p>&#xA;&#xA;<p>you just need to add that extra field in your url like:</p>&#xA;&#xA;<pre><code>"http://localhost:9200/webproxylog/_search?filter_path=hits.hits._source&amp;source=" + query&#xA;</code></pre>&#xA;