30052429
Elasticsearch 503 error MasterNotDiscoveredException
<p>I am new to ES. I want to add some new nodes in <code>elasticsearch.yml</code> file for the same cluster, but I have this error when I try to check the cluster health</p>&#xA;&#xA;<pre><code>(GET _cluster/health):&#xA;   "error": "MasterNotDiscoveredException[waited for [30s]]",&#xA;   "status": 503&#xA;</code></pre>&#xA;&#xA;<p>This is my config file:</p>&#xA;&#xA;<pre><code>cluster.name: mycluster6&#xA;node.name: "nodeA"&#xA;node.master: true&#xA;node.data: true&#xA;discovery.zen.ping.multicast.enabled: false&#xA;&#xA;cluster.name: mycluster6&#xA;node.name: "nodeB"&#xA;node.master: false&#xA;node.data: true&#xA;discovery.zen.ping.multicast.enabled: false&#xA;&#xA;cluster.name: mycluster6&#xA;node.name: "nodeC"&#xA;node.master: false&#xA;node.data: true&#xA;discovery.zen.ping.multicast.enabled: false&#xA;&#xA;cluster.name: mycluster6&#xA;node.name: "nodeD"&#xA;node.master: false&#xA;node.data: true&#xA;discovery.zen.ping.multicast.enabled: false&#xA;&#xA;discovery.zen.minimum_master_nodes: 3&#xA;</code></pre>&#xA;&#xA;<p>in console:</p>&#xA;&#xA;<pre><code>java.lang.NullPointerException&#xA;    at org.elasticsearch.marvel.agent.Utils.extractHostsFromHttpServer(Utils.java:90)&#xA;    at org.elasticsearch.marvel.agent.exporter.ESExporter.openAndValidateConnection(ESExporter.java:344)&#xA;    at org.elasticsearch.marvel.agent.exporter.ESExporter.openExportingConnection(ESExporter.java:212)&#xA;    at org.elasticsearch.marvel.agent.exporter.ESExporter.exportXContent(ESExporter.java:275)&#xA;    at org.elasticsearch.marvel.agent.exporter.ESExporter.exportNodeStats(ESExporter.java:173)&#xA;    at org.elasticsearch.marvel.agent.AgentService$ExportingWorker.exportNodeStats(AgentService.java:305)&#xA;    at org.elasticsearch.marvel.agent.AgentService$ExportingWorker.run(AgentService.java:225)&#xA;    at java.lang.Thread.run(Thread.java:745)&#xA;[2015-05-05 14:00:58,053][TRACE][discovery.zen            ] [nodeD] full ping responses: {none}&#xA;[2015-05-05 14:00:58,053][DEBUG][discovery.zen            ] [nodeD] filtered ping responses: (filter_client[true], filter_data[false]) {none}&#xA;[2015-05-05 14:00:58,053][TRACE][discovery.zen            ] [nodeD] not enough master nodes [[]]&#xA;[2015-05-05 14:00:58,053][TRACE][discovery.zen            ] [nodeD] starting to ping&#xA;[2015-05-05 14:01:01,065][TRACE][discovery.zen            ] [nodeD] full ping responses: {none}&#xA;[2015-05-05 14:01:01,065][DEBUG][discovery.zen            ] [nodeD] filtered ping responses: (filter_client[true], filter_data[false]) {none}&#xA;[2015-05-05 14:01:01,065][TRACE][discovery.zen            ] [nodeD] not enough master nodes [[]]&#xA;[2015-05-05 14:01:01,065][TRACE][discovery.zen            ] [nodeD] starting to ping&#xA;[2015-05-05 14:01:04,079][TRACE][discovery.zen            ] [nodeD] full ping responses: {none}&#xA;[2015-05-05 14:01:04,079][DEBUG][discovery.zen            ] [nodeD] filtered ping responses: (filter_client[true], filter_data[false]) {none}&#xA;[2015-05-05 14:01:04,079][TRACE][discovery.zen            ] [nodeD] not enough master nodes [[]]&#xA;[2015-05-05 14:01:04,079][TRACE][discovery.zen            ] [nodeD] starting to ping&#xA;[2015-05-05 14:01:05,795][ERROR][marvel.agent             ] [nodeD] exporter [es_exporter] has thrown an exception:&#xA;</code></pre>&#xA;