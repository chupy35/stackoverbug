33044428
Elastic Search Date Histogram is not working for 24 hour Format
<p>We are sending the IIS Logs from Log Stash to Elastic Search. But the date histogram search is not returning the correct result. Below is the Query</p>&#xA;&#xA;<pre>&#xA;&#xA;    {&#xA;      "size":0,&#xA;       "query":{  &#xA;          "filtered":{  &#xA;             "filter":{  &#xA;                "bool":{  &#xA;                   "must":[  &#xA;                      {  &#xA;                         "query":{  &#xA;                            "terms":{  &#xA;                               "request":[ &#xA;                                  "/hotel/getrates.aspx",&#xA;                                  "/planner/travelplan.aspx"&#xA;                               ]&#xA;                            }&#xA;                         }&#xA;                      },&#xA;                      {  &#xA;                         "query":{  &#xA;                            "match":{  &#xA;                               "method":"GET"&#xA;                            }&#xA;                         }&#xA;                      },&#xA;                      {  &#xA;                         "range":{  &#xA;                            "EventTime":{  &#xA;                               "gte":"now-22h",&#xA;                               "lte":"now-16h"&#xA;                            }&#xA;                         }&#xA;                      }&#xA;                   ]&#xA;                }&#xA;             }&#xA;          }&#xA;       },&#xA;       "aggs":{  &#xA;          "timevalue":{  &#xA;             "date_histogram":{  &#xA;                "field":"EventTime",&#xA;                "interval":"hour",&#xA;                "format":"yyyy-MM-dd hh:mm:ss"&#xA;             },&#xA;             "aggs":{  &#xA;                "request":{  &#xA;                   "terms":{  &#xA;                      "field":"request"&#xA;                   },&#xA;                   "aggs":{  &#xA;                      "status":{  &#xA;                         "terms":{  &#xA;                            "field":"status"&#xA;                         }&#xA;                      }&#xA;                   }&#xA;                }&#xA;             }&#xA;          }&#xA;       }&#xA;    }&#xA;&#xA;</pre>&#xA;&#xA;<p>Results are only for hour window 00-12, not for the 13-23.&#xA;Can someone please explain the reason.</p>&#xA;