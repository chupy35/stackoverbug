31810262
ElasticSearch routing based on array field
<p><em>I've tried to google my question but search results are flooded with articles using very basic implementation of routing. I didn't manage to find anything useful.</em></p>&#xA;&#xA;<p>Let's say I have an object "product":</p>&#xA;&#xA;<pre><code>{ price: 100, category: 1 }&#xA;</code></pre>&#xA;&#xA;<p>Routing based on "category" field will work as expected.</p>&#xA;&#xA;<p>Now I change my "product" to:</p>&#xA;&#xA;<pre><code>{ price: 100, categories: [1,2,3] }&#xA;</code></pre>&#xA;&#xA;<p>How routing will behave based on "categories" field? Is it safe to do it? Any side effects (except possible product duplication in search results)?&#xA;Will ES engine split an array and put product into different shards? Or will it combine all values into one (for example, "1_2_3") and put this product into a single shard?</p>&#xA;&#xA;<p>I would be really thankful for any thoughts on this topic.</p>&#xA;