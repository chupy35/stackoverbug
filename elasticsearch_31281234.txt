31281234
Elasticsearch - inconsistent num of document between _cat/indices and <index>/_search
<p>Here is what I got from the two URLs</p>&#xA;&#xA;<p><a href="http://localhost:9200/_cat/indices?v" rel="nofollow">http://localhost:9200/_cat/indices?v</a></p>&#xA;&#xA;<pre><code>health status index          pri rep docs.count docs.deleted store.size pri.store.size &#xA;green  open   myindex        5   1         40            0    263.4kb        131.7kb &#xA;</code></pre>&#xA;&#xA;<p><a href="http://localhost:9200/myindex/_search" rel="nofollow">http://localhost:9200/myindex/_search</a></p>&#xA;&#xA;<pre><code>hits: {total: 10, max_score: 1, hits: [...]}&#xA;</code></pre>&#xA;&#xA;<p>hits.total=10 returned from the second URL is expected, but why docs.count = 40 returned the first URL is different? Thanks!</p>&#xA;
<p>One option is that you have deleted docs: documents are immutable in ES so any modification (including delete) will create a new copy of the doc with a new version-number.</p>&#xA;&#xA;<p>The call to <code>_cat/indices?v</code> returns a count of all the docs including the deleted ones, though you can't access them through <code>_search</code></p>&#xA;
<p>If you stored documents with type <em>nested</em> in the index, the difference in document is most likely because of that.</p>&#xA;&#xA;<p>Each nested document is stored as separate hidden document within Elasticsearch to be able to keep relationships within these nested documents.&#xA;For more information, it is well documented <a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/nested-objects.html" rel="nofollow">here</a> </p>&#xA;&#xA;<p>Thus, as it is hidden, you can not find it via the search api and only get the "main" documents as results. </p>&#xA;&#xA;<p>Moreover, there is an <a href="https://github.com/elastic/elasticsearch/issues/17319" rel="nofollow">issue on github</a> which should clarify the difference between the two counts. </p>&#xA;