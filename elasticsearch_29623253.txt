29623253
How to createin ES an index with different analyzers for search and indexing?
<p>I'm trying to set up index with with different analyzers for indexing and search.&#xA;The SENSE I type the following code:</p>&#xA;&#xA;<pre><code>PUT my_index&#xA;{&#xA;   "mappings" : {&#xA;      "my_type" : {&#xA;         "properties" : {&#xA;            "content" : {&#xA;               "type" : "string",&#xA;               "index": "analyzed",&#xA;               "analyzer": "my_index_analyzer"&#xA;            }&#xA;         }&#xA;      }&#xA;   },&#xA;   "settings" : {&#xA;      "number_of_shards" : 1,&#xA;      "analysis" : {&#xA;                "filter" : {&#xA;                    "my_filter" : {&#xA;                        "type" : "pattern_capture",&#xA;                        "preserve_original" :1,&#xA;                        "patterns" : ["(([a-z]+)(\\d*))"]                                          &#xA;                             }},&#xA;                "index_analyzer" : {&#xA;                     "my_index_analyzer" : {&#xA;                        "tokenizer" : "standard",&#xA;                        "type" : "custom",&#xA;                        "filter" : ["my_filter"]&#xA;                              }},&#xA;                "search_analyzer" : {&#xA;                    "my_search_analyzer" : {&#xA;                        "type" : "custom",&#xA;                        "tokenizer" : "standard",&#xA;                        "filter" : ["standard", "lowercase"]&#xA;                }&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>But this does not seem to work; the ES instance always returns me an error like</p>&#xA;&#xA;<blockquote>&#xA;  <p>MapperParsingException[mapping [my_type]]; nested:&#xA;  MapperParsingException[Analyzer [my_index_analyzer] not found for&#xA;  field [content]]</p>&#xA;</blockquote>&#xA;
<p>Change your analyzer part to</p>&#xA;&#xA;<pre><code>"analyzer": {&#xA;        "my_index_analyzer" : {&#xA;          "tokenizer" : "standard",&#xA;          "type" : "custom",&#xA;          "filter" : ["my_filter"]&#xA;        },&#xA;        "my_search_analyzer" : {&#xA;          "type" : "custom",&#xA;          "tokenizer" : "standard",&#xA;          "filter" : ["standard", "lowercase"]&#xA;        }&#xA;      }&#xA;    }&#xA;</code></pre>&#xA;&#xA;<p>and change the mapping part to:</p>&#xA;&#xA;<pre><code>"properties" : {&#xA;        "content" : {&#xA;          "type" : "string",&#xA;          "index": "analyzed",&#xA;          "index_analyzer": "my_index_analyzer",&#xA;          "search_analyzer": "my_search_analyzer"&#xA;        }&#xA;      }&#xA;</code></pre>&#xA;