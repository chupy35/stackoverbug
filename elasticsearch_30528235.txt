30528235
Can I use ElasticSearch mapping transform to duplicate a field
<p>I read here about mapping transform: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-transform.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-transform.html</a></p>&#xA;&#xA;<blockquote>&#xA;  <p>The result of the transform is indexed but the original source is&#xA;  stored in the _source field.</p>&#xA;</blockquote>&#xA;&#xA;<p>So I thought I can use it to "copy" a field. I try:</p>&#xA;&#xA;<pre><code>{&#xA;   "mappings":{&#xA;      "opportunity":{&#xA;         "transform":{&#xA;            "script":"ctx._source['skill_suggest']=ctx._source['skill']"&#xA;         }&#xA;      }&#xA;   }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Then I perform the query on the "skill_suggest" field but return no result (the same query on "skill" work fine).</p>&#xA;&#xA;<p>So what I'm doing wrong?<br>&#xA;Can I some how "copy" some fields on the fly? I want to perform full-text seach on "skill" but also the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-suggesters-completion.html" rel="nofollow">Completion Suggester</a> but I cannot modify the data schema sent from client.</p>&#xA;
<p>This sounds like a perfect match for <code>multi-fields</code>: <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/_multi_fields.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/reference/current/_multi_fields.html</a></p>&#xA;