34612476
How to set distance value of geodistance filter from elasticsearch storted data
<p>I have to set distance value from content stored in eslaticsearch database inside the field address.radius.</p>&#xA;&#xA;<p>distance only accept distance value when i tried to set "address.radius" I got an error.</p>&#xA;&#xA;<pre><code>{&#xA;"query": {&#xA;    "bool": {&#xA;        "must": [&#xA;        {&#xA;            "nested": {&#xA;                "path": "address",&#xA;                "filter": {&#xA;                    "geo_distance": {&#xA;                        "distance": "address.radius", // How to set address.radius in kilometer&#xA;                        "location": {&#xA;                            "lat": 48.873452,&#xA;                            "lon": 2.3522219&#xA;                        }&#xA;                    }&#xA;                }&#xA;            }&#xA;        }&#xA;    ]&#xA;    }&#xA;}}&#xA;</code></pre>&#xA;&#xA;<p>Obviously it's works when i set "distance": "25km" for instance.</p>&#xA;&#xA;<p>Thank you for your help</p>&#xA;
<p>The <code>distance</code> parameter only accepts a specific <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-geo-distance-query.html#_options_4" rel="nofollow">distance expression</a> (<code>25km</code>, <code>10mi</code>, etc), which can be expressed with <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/common-options.html#distance-units" rel="nofollow">various distance units</a>.</p>&#xA;&#xA;<p>So, it's not possible to specify a field for the <code>distance</code> parameter. What <code>geo_distance</code> queries do is to retrieve documents whose <code>location</code> is within the specified distance (e.g. <code>25km</code>) of the specified location (e.g. <code>48.873452,2.3522219</code>)</p>&#xA;