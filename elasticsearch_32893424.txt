32893424
Filter documents with more than one date in Elastic Search
<p>I have documents with a field that contains multiple dates. </p>&#xA;&#xA;<pre><code>"release_date" : [&#xA;"2015-07-10",&#xA;"2015-07-13",&#xA;"2015-07-26",&#xA;"2015-07-27"&#xA;]&#xA;</code></pre>&#xA;&#xA;<p>I would like to <strong>filter all documents with at least a date greater than a another given date</strong>.</p>&#xA;&#xA;<p>I was able to use range filter when the document just had one date</p>&#xA;&#xA;<pre><code>{&#xA;    "constant_score": {&#xA;        "filter": {&#xA;            "range" : {&#xA;                "release_date" : {&#xA;                    "gte": "2012-01-01",&#xA;                }&#xA;            }&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>But now that I have more than one date, I don't find the way to achieve a similar result. Is it possible?</p>&#xA;&#xA;<p>Thanks!</p>&#xA;
<p>Make sure that you're "release_date" field is properly mapped to a date object.  The following example works for what you're trying to do:</p>&#xA;&#xA;<pre><code>PUT test1&#xA;&#xA;PUT /test1/_mapping/type1&#xA;{&#xA;    "type1" : {&#xA;        "properties" : {&#xA;            "release_date" : {"type" : "date"}&#xA;        }&#xA;    }&#xA;}&#xA;&#xA;POST test1/type1&#xA;{&#xA;  "release_date" : [&#xA;    "2014-03-28",&#xA;    "2010-03-28",&#xA;    "2011-03-28"&#xA;    ]&#xA;}&#xA;&#xA;GET test1/type1/_search&#xA;{&#xA;  "query": {&#xA;"filtered": {&#xA;      "filter": {&#xA;        "range": {&#xA;          "release_date": {&#xA;            "gte": "2013-01-01"&#xA;          }&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;