30390200
Is it possible to display only the sort values,excluding the other hits content in elastic-search?
<p>This is the query I used to sort a field named "age" in my indexed documents using following query:</p>&#xA;&#xA;<pre><code>{&#xA;    "query": {&#xA;        "match_all": {}&#xA;    },&#xA;    "sort": {&#xA;        "_script": {&#xA;            "script": "doc[\"age\"].value",&#xA;            "lang": "groovy",&#xA;            "type": "number",&#xA;            "order": "asc"&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>And following is the response:</p>&#xA;&#xA;<pre><code>{&#xA;    "hits": {&#xA;        "total": 3,&#xA;        "max_score": null,&#xA;        "hits": [&#xA;            {&#xA;                "_index": "monthdata",&#xA;                "_type": "monthdata",&#xA;                "_id": "121224354",&#xA;                "_score": null,&#xA;                "_source": {&#xA;                    "profile": {&#xA;                        "name": "Merlin",&#xA;                        "age": 25,&#xA;                        "sex": "female"&#xA;                    }&#xA;                },&#xA;                "sort": [&#xA;                    25&#xA;                ]&#xA;            }&#xA;        ]&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>What I need to accomplish is that, I don't want the document data to be shown with it,but just the sort array.</p>&#xA;&#xA;<p>I have tried adding <code>"size" : 0</code> with my query,but it makes the entire hits to be gone.</p>&#xA;&#xA;<p>How can I get to display only the sort array?</p>&#xA;
<p>I don't think you can do that. The purpose of sorting is to sort <strong>documents</strong>, if you take out the documents, you are left with a list of values? Doesn't make sense.</p>&#xA;&#xA;<p>What you could do to lighten the results is to specify the <code>fields</code> you want to see. If you don't specify any <code>fields</code>, none will be returned, but the sorting value will:</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "match_all": {}&#xA;  },&#xA;  "sort": {&#xA;    "_script": {&#xA;      "script": "doc[\"age\"].value",&#xA;      "lang": "groovy",&#xA;      "type": "number",&#xA;      "order": "asc"&#xA;    }&#xA;  },&#xA;  "fields": []&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>that will give you</p>&#xA;&#xA;<pre><code>{&#xA;    "hits": {&#xA;        "total": 3,&#xA;        "max_score": null,&#xA;        "hits": [&#xA;            {&#xA;                "_index": "monthdata",&#xA;                "_type": "monthdata",&#xA;                "_id": "121224354",&#xA;                "_score": null,&#xA;                "sort": [&#xA;                    25&#xA;                ]&#xA;            },&#xA;            {&#xA;                "_index": "monthdata",&#xA;                "_type": "monthdata",&#xA;                "_id": "121224352",&#xA;                "_score": null,&#xA;                "sort": [&#xA;                    32&#xA;                ]&#xA;            },&#xA;            {&#xA;                "_index": "monthdata",&#xA;                "_type": "monthdata",&#xA;                "_id": "121224355",&#xA;                "_score": null,&#xA;                "sort": [&#xA;                    35&#xA;                ]&#xA;            }&#xA;        ]&#xA;    }&#xA;}&#xA;</code></pre>&#xA;
<p>Setting "size" to zero wont work in this context,because size specifies the number of documents to be fetched and shown in the results. An alternate would be setting the fields attribute in the script like below:</p>&#xA;&#xA;<pre><code>{&#xA;    "query": {&#xA;        "match_all": {}&#xA;    },&#xA;    "sort": {&#xA;        "_script": {&#xA;            "script": "doc[\"age\"].value",&#xA;            "lang": "groovy",&#xA;            "type": "number",&#xA;            "order": "asc"&#xA;        }&#xA;    },&#xA;    "fields": []&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>This will give you the desired results.</p>&#xA;