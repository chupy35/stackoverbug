33951570
Match documents where the field 1 is more than field 2
<pre><code>doc1 = {&#xA;    "field1": 34,&#xA;    "field2": 15&#xA;}&#xA;doc2 = {&#xA;    "field1": 12,&#xA;    "field2": 46&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>How to match all the documents where field 1 is greater that field 2. &#xA;That is in the above case the search will result in the matching of doc1 only.</p>&#xA;
<p>You can use a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/query-dsl-script-filter.html" rel="nofollow"><code>script</code> filter</a> that can directly compare the fields.</p>&#xA;&#xA;<pre><code>{&#xA;  "query": {&#xA;    "filtered": {&#xA;      "filter": {&#xA;        "script": {&#xA;          "script": "doc.field1.value &gt; doc.field2.value"&#xA;        }&#xA;      }&#xA;    }&#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Note that in order for this to work you need to <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-scripting.html#enable-dynamic-scripting" rel="nofollow">enable dynamic scripting</a>.</p>&#xA;