32805572
In a should bool clause in elasticsearch what is default score mode?
<p>Actually i am writing three query inside my should boo query clause in ES now i was wondering what is the default score_mode of the should clause as i want to use maximum of all three query score how can i achieve that. My query is given below now where to define score_mode ??</p>&#xA;&#xA;<pre><code>bool: {&#xA;                "disable_coord": true,&#xA;                "should": [&#xA;                  {&#xA;                    term : { 'address.area2' : search_area2 }&#xA;                  },&#xA;                  {&#xA;                    term : { "address.area1" : search_area1 }&#xA;                  },&#xA;                  {&#xA;                    term : { 'address.city' : search_city }&#xA;                  }&#xA;                ], "boost": 2.0&#xA;              }&#xA;</code></pre>&#xA;
<p>From the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html" rel="nofollow">Bool Query docs</a>:</p>&#xA;&#xA;<blockquote>&#xA;  <p>The bool query takes a more-matches-is-better approach, so the score&#xA;  from each matching must or should clause will be added together to&#xA;  provide the final _score for each document.</p>&#xA;</blockquote>&#xA;&#xA;<p>To override that behavior, wrap your <code>bool</code> in a </p>&#xA;&#xA;<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/query-dsl-function-score-query.html" rel="nofollow">Function Score Query</a>. You can define a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/query-dsl-function-score-query.html#function-field-value-factor" rel="nofollow">Field Value Factor Function</a>  for <code>address.area2</code>, one for <code>address.area1</code> and one for <code>address.city</code>, then use <code>max</code> as <code>score_mode</code>.</p>&#xA;&#xA;<p>The resulting function score should be something like the following (did not try, you may have to modify a bit)</p>&#xA;&#xA;<pre><code>"function_score": {&#xA;    "query": YOUR_BOOL_QUERY,&#xA;    "boost": 2,&#xA;    "functions": [&#xA;        {&#xA;            "field_value_factor": {&#xA;                "field": "address.area2",&#xA;                "factor": 1&#xA;            }&#xA;        },&#xA;        {&#xA;            "field_value_factor": {&#xA;                "field": "address.area1",&#xA;                "factor": 1&#xA;            }&#xA;        },&#xA;        {&#xA;            "field_value_factor": {&#xA;                "field": "address.city",&#xA;                "factor": 1&#xA;            }&#xA;        }&#xA;    ],&#xA;    "score_mode": "max",&#xA;    "boost_mode": "replace"&#xA;}&#xA;</code></pre>&#xA;&#xA;<p><strong>UPDATE:</strong></p>&#xA;&#xA;<p>added <code>"boost_mode": "replace"</code> according to <a href="https://www.elastic.co/guide/en/elasticsearch/reference/2.0/query-dsl-function-score-query.html" rel="nofollow">docs</a>, because we want to ignore the query score and only use our function score</p>&#xA;