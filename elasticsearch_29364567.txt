29364567
Elastic Search inconsistent index count
<p>I am indexing a large dataset 30 million rows and following each re-index (using a JDBC river) I am seeing inconsistencies in the total size of the index.</p>&#xA;&#xA;<p>I am using:&#xA;curl -XGET '<a href="http://localhost:9200/index_name/_count" rel="nofollow">http://localhost:9200/index_name/_count</a>'</p>&#xA;&#xA;<p>and the results vary by as much as 100,000 results after each re-index.</p>&#xA;&#xA;<p>I can't see any index errors in the log.</p>&#xA;
<p>One possibility is that your refresh_interval setting is set to a high number. This option is used to reduce disk IO. Indexed results may only be available after this interval has expired. </p>&#xA;&#xA;<p>You can also use the refresh API to force a refresh to take place. Like this:</p>&#xA;&#xA;<pre><code>curl -XPOST 'http://localhost:9200/index_name/_refresh'&#xA;</code></pre>&#xA;&#xA;<p>See the <a href="http://www.elastic.co/guide/en/elasticsearch/guide/current/near-real-time.html#refresh-api" rel="nofollow">elastic documentation</a> for more details.</p>&#xA;
<p>The algorithm used by ElasticSearch to count the number of entries in the index performs the operation in bounded memory usage. This leads to approximate results. To increase the precision you can set the </p>&#xA;&#xA;<pre><code>precision_threshold : AMOUNT_OF_ERROR&#xA;</code></pre>&#xA;&#xA;<p>Still there is always a scope of 5% error in elastic search</p>&#xA;