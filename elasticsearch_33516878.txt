33516878
Simple autocomplete in Elasticsearch
<p>Is it possible to have a simple autocomplete in Elasticsearch?</p>&#xA;&#xA;<p>I need to enter a beginning of a word into search input and I want elasticsearch to find all words starting with it. I want Elasticsearch to search in all fields in my type (<code>Post</code> containing <code>Title</code>, <code>Body</code>, <code>Tags</code>).</p>&#xA;&#xA;<p>In <a href="https://github.com/elastic/elasticsearch-net-example#part-5-suggestions" rel="nofollow">this example</a> I need to add special suggest fields i.e. <code>TitleSuggest</code>, <code>BodySuggest</code> etc. and specify input and output logic.</p>&#xA;&#xA;<p>It also returns a list of <code>Posts</code> while I just need words.</p>&#xA;
<p>from what i understand i will do like this :</p>&#xA;&#xA;<pre><code> {&#xA;    "query" : {&#xA;        "dis_max" : {&#xA;            "tie_breaker" : 0,&#xA;            "boost" : 1,&#xA;            "queries" : [{&#xA;                    "wildcard" : {&#xA;                        "title" : "searchme*"&#xA;                    }&#xA;                }, {&#xA;                    "wildcard"&#xA;                     : {&#xA;                        "body" : "searchme*"&#xA;                    }&#xA;                }, {&#xA;                    "wildcard" : {&#xA;                        "tags" : "searchme*"&#xA;                    }&#xA;                }&#xA;            ]&#xA;        }&#xA;    },&#xA;    "aggs" : {&#xA;        "title" : {&#xA;            "terms" : {&#xA;                "field" : "title",&#xA;                "size" : 10&#xA;            }&#xA;        },&#xA;        "body" : {&#xA;            "terms" : {&#xA;                "field" : "body",&#xA;                "size" : 10&#xA;            }&#xA;        },&#xA;        "tags" : {&#xA;            "terms" : {&#xA;                "field" : "tags",&#xA;                "size" : 10&#xA;            }&#xA;        }&#xA;    }&#xA; }&#xA;</code></pre>&#xA;&#xA;<p>It search all the datas begining with "searchme" in the fields :  title, body, tags and return a list of 10 terms for each.</p>&#xA;&#xA;<p>there is also autocomplete in elastic but i never use it yet :&#xA;<a href="https://www.elastic.co/guide/en/elasticsearch/guide/current/_index_time_search_as_you_type.html" rel="nofollow">https://www.elastic.co/guide/en/elasticsearch/guide/current/_index_time_search_as_you_type.html</a></p>&#xA;
<p>According to one post from elastic issue tracker, maybe you should try query like this:</p>&#xA;&#xA;<pre><code>.Query(q =&gt; &#xA;  q.Text(tq =&gt; tq                                              &#xA;    .OnField(t =&gt; t.MyField1.Suffix("autocomplete"))&#xA;    .QueryString(searchString)&#xA;  )                    &#xA;  &amp;&amp; q.Text(tq =&gt; tq                                              &#xA;    .OnField(t =&gt; t.MyField2.Suffix("autocomplete"))&#xA;    .QueryString(searchString)&#xA;  )    &#xA;)&#xA;</code></pre>&#xA;&#xA;<p>more info:&#xA;<a href="https://github.com/elastic/elasticsearch-net/issues/456" rel="nofollow">https://github.com/elastic/elasticsearch-net/issues/456</a> </p>&#xA;