34169189
Elastic Search Not Finding Data Directory
<p>Standing up a new cluster on ES 2.1 and I'm having trouble setting the path.data directory.</p>&#xA;&#xA;<p>Here is my config setting</p>&#xA;&#xA;<pre><code># ----------------------------------- Paths ------------------------------------&#xA;#&#xA;# Path to directory where to store the data (separate multiple locations by comma):&#xA;#&#xA;path.data: /home/elasticUser/elasticFiles&#xA;</code></pre>&#xA;&#xA;<p>Here is the read write stuff:</p>&#xA;&#xA;<pre><code>[elasticUser@WLIELASTICP01 ~]$ ls -hn&#xA;total 0&#xA;drwxrwxrwx. 2 1002 1002 6 Dec  9 13:21 elasticFiles&#xA;drwxrwxrwx. 2 1002 1002 6 Dec  9 13:49 elasticLogs&#xA;</code></pre>&#xA;&#xA;<p>I have chowned the dir to elasticUser as well.</p>&#xA;&#xA;<p>When I fire up ES:</p>&#xA;&#xA;<pre><code>sudo systemctl start elasticsearch&#xA;</code></pre>&#xA;&#xA;<p>Nothing Happens and the logs state:</p>&#xA;&#xA;<pre><code>java.lang.IllegalStateException: Unable to access 'path.data' (/home/elasticUser/elasticFiles)&#xA;        at org.elasticsearch.bootstrap.Security.addPath(Security.java:229)&#xA;        at org.elasticsearch.bootstrap.Security.addFilePermissions(Security.java:203)&#xA;        at org.elasticsearch.bootstrap.Security.createPermissions(Security.java:184)&#xA;        at org.elasticsearch.bootstrap.Security.configure(Security.java:105)&#xA;        at org.elasticsearch.bootstrap.Bootstrap.setupSecurity(Bootstrap.java:196)&#xA;        at org.elasticsearch.bootstrap.Bootstrap.setup(Bootstrap.java:167)&#xA;        at org.elasticsearch.bootstrap.Bootstrap.init(Bootstrap.java:285)&#xA;        at org.elasticsearch.bootstrap.Elasticsearch.main(Elasticsearch.java:35)&#xA;Caused by: java.nio.file.AccessDeniedException: /home/elasticUser/elasticFiles&#xA;        at sun.nio.fs.UnixException.translateToIOException(UnixException.java:84)&#xA;        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:102)&#xA;        at sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:107)&#xA;        at sun.nio.fs.UnixFileSystemProvider.createDirectory(UnixFileSystemProvider.java:384)&#xA;        at java.nio.file.Files.createDirectory(Files.java:674)&#xA;        at java.nio.file.Files.createAndCheckIsDirectory(Files.java:781)&#xA;        at java.nio.file.Files.createDirectories(Files.java:767)&#xA;        at org.elasticsearch.bootstrap.Security.ensureDirectoryExists(Security.java:250)&#xA;        at org.elasticsearch.bootstrap.Security.addPath(Security.java:227)&#xA;        ... 7 more&#xA;</code></pre>&#xA;&#xA;<p>I had the same issues with data.logs and just changed them back to default.. any ideas?</p>&#xA;
<p>Figured this out...</p>&#xA;&#xA;<p>Since my "OPS" team mounted the data drive on /home/ I needed to grant access to /home/elasticUser/ .</p>&#xA;