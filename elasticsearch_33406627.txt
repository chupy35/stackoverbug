33406627
Using a string to build Query DSL for Elasticsearch
<p>I'm using Meteor (so Javascript, Node, NPM, etc) and would like to provide a simple text input for users to search via Elasticsearch. I would like to be able to use modifiers on the text like + and "" and search for a specific field. I'm looking for something that can convert a plain text input into Elasticsearch Query DSL.</p>&#xA;&#xA;<p>These would be some example queries:</p>&#xA;&#xA;<p>This query would mean that the keyword "tatooine" must exist:</p>&#xA;&#xA;<pre><code>stormtrooper +tatooine&#xA;</code></pre>&#xA;&#xA;<p>This would mean that "death star" should be one keyword:</p>&#xA;&#xA;<pre><code>stormtrooper "death star"&#xA;</code></pre>&#xA;&#xA;<p>This would search for the keyword "bloopers" only in the category field:</p>&#xA;&#xA;<pre><code>stormtrooper category=bloopers&#xA;</code></pre>&#xA;&#xA;<p>Is there a library that can do this? Can a generic solution exist or is this why I can't find any existing answers to this?</p>&#xA;
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/query-dsl-simple-query-string-query.html" rel="nofollow"><code>simple_query_string</code></a> would support your query syntax out of the box, except for <code>category=bloopers</code> which should be <code>category:bloopers</code> instead, but otherwise it should work:</p>&#xA;&#xA;<pre><code>curl -XPOST localhost:9200/your_index/_search -d '{&#xA;  "query": {&#xA;    "simple_query_string": {&#xA;      "query": "stormtrooper category:bloopers"&#xA;    }&#xA;  }&#xA;}'&#xA;&#xA;curl -XPOST localhost:9200/your_index/_search -d '{&#xA;  "query": {&#xA;    "simple_query_string": {&#xA;      "query": "stormtrooper +tatooine"&#xA;    }&#xA;  }&#xA;}'&#xA;</code></pre>&#xA;&#xA;<p>You can also send the query in the <a href="https://www.elastic.co/guide/en/elasticsearch/reference/1.7/query-dsl-query-string-query.html" rel="nofollow">query string</a> directly like this:</p>&#xA;&#xA;<pre><code>curl -XPOST localhost:9200/your_index/_search?q=stormtrooper%20%22death%20star%22"&#xA;</code></pre>&#xA;