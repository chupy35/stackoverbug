29504876
Use search fields as parameters in script_fields
<h3>Background: the parameter is user-supplied so I can't enable scripting but only script_file.</h3>&#xA;&#xA;<p>I'm trying to use a field value as a param,</p>&#xA;&#xA;<p>I will replace the <code>XXX</code> below to a field name in the original search result,</p>&#xA;&#xA;<pre><code>"script_fields": {&#xA;    "my_field": {&#xA;        "script_file": "my_test",&#xA;        "params": {&#xA;          "my_var": "XXX"&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>But I couldn't find relevant part <a href="http://www.elastic.co/guide/en/elasticsearch/reference/1.4/search-request-script-fields.html" rel="nofollow">in the document here</a>, what is the syntax?</p>&#xA;
<p>You can refer to the field in the script.</p>&#xA;&#xA;<pre><code>"script_fields": {&#xA;    "my_field": {&#xA;        "script_file": "myScript",&#xA;        "params": {&#xA;          "my_var": "fieldName"&#xA;        }&#xA;    }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Now from the script use the field name parameter to refer to that field.</p>&#xA;&#xA;<pre><code>myScript -&#xA;var fieldValue = doc[my_var].value&#xA;</code></pre>&#xA;&#xA;<p>You can read more on the same <a href="http://blog.qbox.io/elasticsearch-scripting-sorting" rel="nofollow">here</a>.</p>&#xA;