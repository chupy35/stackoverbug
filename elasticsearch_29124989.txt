29124989
Add multi_match to Elastic Search Function Score Query
<p>Currently, I am only querying the "content" of a web page stored in elastic search for a keyword match. I would like to add the title to that equation. I am using the top code (under "MARRY THIS") and would like to somehow insert the bottom code ("WITH THIS") but can't seem to find an explanation on how to do so.</p>&#xA;&#xA;<pre><code>MARRY THIS&#xA;&#xA;{&#xA;    "query": {&#xA;        "function_score": {&#xA;            "query": {&#xA;                "match": {&#xA;                    "content": "keyword"&#xA;                }&#xA;            },&#xA;            "functions": [{&#xA;                "field_value_factor": {&#xA;                    "field": "obls",&#xA;                    "factor": 0.5,&#xA;                    "modifier": "ln2p"&#xA;                }&#xA;            }]&#xA;        }&#xA;    },&#xA;    "from": "0",&#xA;    "size": "100"&#xA;}&#xA;&#xA;WITH THIS&#xA;&#xA;{&#xA;  "multi_match" : {&#xA;    "query":    "keyword", &#xA;    "fields": [ "title^3", "content" ] &#xA;  }&#xA;}&#xA;</code></pre>&#xA;&#xA;<p>Thanks in advance!</p>&#xA;
<p>I figured it out after a lot of trial and error, it looks like this:</p>&#xA;&#xA;<pre><code>{&#xA;    "query": {&#xA;        "function_score": {&#xA;            "query": {&#xA;                "multi_match": {&#xA;                    "query": "baseball",&#xA;                    "fields": ["content", "title"]&#xA;                }&#xA;            },&#xA;            "functions": [{&#xA;                "field_value_factor": {&#xA;                    "field": "obls",&#xA;                    "factor": 0.5,&#xA;                    "modifier": "ln2p"&#xA;                }&#xA;            }]&#xA;        }&#xA;    },&#xA;    "from": "10",&#xA;    "size": "100"&#xA;}&#xA;</code></pre>&#xA;