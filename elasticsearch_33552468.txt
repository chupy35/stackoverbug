33552468
Elasticsearch-- Different number of hits for the same query, caused by JDBC indexing errors
<p>I have an Elasticsearch index with 5 shards, holding just over 20,000 records. It is being fully re-indexed each night. Simple term searches for common words return a different number of 'hits' on different days, even when no new records are added. I see that the document counts for <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html#search-aggregations-bucket-terms-aggregation-approximate-counts" rel="nofollow">terms aggregation queries are approximate</a>. </p>&#xA;&#xA;<p>However, I don't see documentation that search term queries return approximate totals. Has anyone else seen this effect with simple term queries? What can I do to get exact totals (or at least consistent totals)? </p>&#xA;&#xA;<p>As an initial change, I am moving to a single shard, but I would like to know if there is any documentation of the issue I am seeing.</p>&#xA;&#xA;<p><strong>UPDATE:</strong> I retested and found that the JDBC driver we are using did not index the whole database each time. This issue is referenced <a href="https://github.com/jprante/elasticsearch-jdbc/issues/143" rel="nofollow">here</a>, and requires changes in the JDBC driver parameters.</p>&#xA;